================================================================================
===
=== GeoNetwork 4.0.0: List of changes
===
================================================================================
- Merge pull request #5015 from fxprunayre/es-merge-master-20200916
- Updates from transifex.
- Merge remote-tracking branch 'origin/master' into es-merge-master-20200916
- JPA / Metadata / Stream results. (#4994)
- Avoid empty attribute sections in the metadata editor
- CSW / Remove unused code for saving settings.
- Search / Restore filter and migrate CSW config
- Harvester / Improvements (#5012)
- Search results / Grid mode / Display status properly
- Landing page / Improve multilingual support (#4924)
- Editor / Label above input mode / Fix offset for thesaurus picker (#5002)
- DB / Migration / Add step to set sequence value to current / Register step in migration config.
- DB / Migration / Add step to set sequence value to current.
- Update README.md (#4997)
- API / Migration / Fix truncated step name
- 4.0.x / API / Migration not in documentation
- Kibana / Only allow access to authenticated users in the catalog.
- Merge pull request #5000 from fxprunayre/es-merge-master-20200909
- Merge remote-tracking branch 'origin/master' into es-merge-master-20200909
- Duration / Keep view mode simple
- Formatter improvements (ISO19110 mainly) (#4905)
- Which minimum profile is required to manage/create template? (#4932)
- Example of configuring ldap security for recursion (#4990)
- Display contact web address description and linkage if name is not provided in full view
- Formatter / Render table when configured
- Schema / 19115-3 / Thesaurus / Override label
- Schema / 19115-3 / Translation / French
- Build / Zip / Make shell script executable (#4988)
- Add classes for TYPE to related rows and add to map buttons (#4978)
- Merge pull request #4989 from fxprunayre/es-merge-master-20200904
- Updates from transifex.
- Merge remote-tracking branch 'origin/master' into es-merge-master-20200904
- Merge remote-tracking branch 'origin/master' into es-merge-master-20200904
- Replace broken JAR installer for ZIP distribution (#4984)
- UI improvements for the bounding box block in the editor: - re-order the UI element - group elements (add elements to a toolbar for the map) - change delete icons and couple them to the input fields - delete the previous search item when switching the region type
- UserSearch / 255 char is too small for URLs (#4883)
- Adding support remote datasets for operatesOn caused problems for har…vested records with link to external ressource #4830 - use local dataset version if available in the local catalogue (#4844)
- some improvement suggestions for dcat export (#4898)
- Harvester / CSW / Update / Apply xpath filter and batch edits (#4910)
- Identicon config (#4939)
- ES / Search / Wrong query results if query base is using OR
- Elasticsearch / Indexing / Polygon. (#4967)
- Admin / Indexing error / Trigger indexing
- Index / Add progress indicator.
- homepage: same typeahead option as in search page
- Fix for aligning logo and GN name (#4969)
- Addresses metadata101/iso19115-3:2018#87
- Locale / Avoid double loading / Fix extra ',' causing Wro4J error
- Merge pull request #4971 from geonetwork/fxprunayre-patch-10
- Editor board / Do not focus on first suggestion.
- Uniform look for the contribute pages / Access manager (#4963)
- Show an error message when the invalid XML is entered: (#4949)
- Keywords / Group keywords by type when not part of a thesaurus (#4861)
- Indexing / Do not allow to start indexing if already running task (#4962)
- Locale / Avoid double loading. (#4965)
- don't show language nav-pills if only one language (#4964)
- Merge pull request #4960 from fxprunayre/es-merge-master-20200826
- Merge remote-tracking branch 'origin/master' into es-merge-master-20200826
- [a11y] Combine GN logo and name in one link in the top menu
- Improved visibilty of links on map panels
- A11y improvements to the map panels and map toggle buttons
- Improvements to the a11y of the user feedback options and screens: - added aria-labels - removed collapsing panels - order of headings
- Uniform look for the contribute pages, same (readable) title (H1), same nesting of rows and columns
- Fix for the Admin Settings menu to get stuck.
- Editor / Table head label font size consistent with others
- Editor / GeoPublisher / Fix map init
- Harvester / OGC WxS / Migrate template list to use ES search. Fixes https://github.com/geonetwork/core-geonetwork/issues/4850.
- Move to Elasticsearch 7.9.0
- Redirect / Fix portal redirect (#4956)
- Preserve lastmodified during copy-schemas-ant target (#4948)
- Allow GeoNetwork datadir from tomcat context Parameter (#4943)
- Harvester / OGC WxS / Add WMTS basic support (#4829)
- LDAP changes for AD and other configurations (#4938)
- Update from transifex.
- add custom file for supported languages, so it doesn't throw 404 (#4860)
- INSPIRE / Registry is now available on https (#4935)
- minor doc changes (#4923)
- Merge latest changes made in metadata101 which were not part of https://github.com/geonetwork/core-geonetwork/pull/4701.
- Active filter / Add support for UUID when only selection is used.
- Improved nesting of `<div>`s to solve the overlapping footer issue in the list view on the results page. Changed padding and background color for the links in the list view.
- Make Info blocks on the homepage look more like the blocks on the results page
- add custom file for supported languages, so it doesn't throw 404 (#4860)
- INSPIRE / Registry is now available on https (#4935)
- Migration / Fix SQL error.
- minor doc changes (#4923)
- Home / Aggregation config (#4933)
- Search / UI improvements (#4929)
- Indexing error / Facet may be empty. Do not display title.
- Indexing error / Store field as boolean. Fix query due to draft mode.
- Indexing error / Better reporting of errors.
- API / Add index and db count. Fix indexing error on aggregates in some documents.
- Merge latest changes made in metadata101 which were not part of https://github.com/geonetwork/core-geonetwork/pull/4701.
- Merge pull request #4927 from fxprunayre/iso19115-3-unpack-update
- Restyle search results and search results toolbar
- Fix test related to Spring update and new LDAP work.
- ISO19115-3 / Updates following https://github.com/geonetwork/core-geonetwork/pull/4701
- Merge remote-tracking branch 'origin/master' into 4.0.x
- Index / Add keyword not related to thesaurus / Type may be undefined or empty.
- Fixed null pointer error on the jeevesAppContext while destroying object. It would occur when GN failed to startup correctly.
- Editor / Directory / Add contact breaks scrolling
- Editor / Turn off hotkeys while editing
- better error handling for language detection
- Index / Add keyword not related to thesaurus.
- Associated record / Store all relations in index. (#4912)
- Record view / Keyword / Link may be undefined or empty.
- INSPIRE / Update INSPIRE theme URI to registry
- INSPIRE / Update INSPIRE theme URI to registry
- Editor / Directory / Add contact breaks scrolling
- Editor / Turn off hotkeys while editing
- better error handling for language detection
- Fixed null pointer error on the jeevesAppContext while destroying object. It would occur when GN failed to startup correctly.
- New LDAP test cases and infrastructure (#4878)
- Don't clear the multilingual fields when changing protocol (#4894)
- Fix for add-schema services snippet
- Use unpack to support use of schema plugins as artifacts (#4701)
- Merge branch 'improve_import_error_message'
- Improve error message when uploading a mef zip file containing lots of records. Identify the uuid of the record that failed to load. (#4838)
- Reformat code
- Use constant for the setting name
- Code formatting
- Improve import schema not allowed exception message
- Fixed typo with attachment
- Updates from transifex.
- Merge pull request #4901 from fxprunayre/es-merge-master-20200803
- Merge remote-tracking branch 'origin/master' into es-merge-master-20200803
- Fixed bug uninitialized baseURL This caused values to be http://localhost:8080null instead of http://localhost:8080/geonetwork
- Prevent moving down of the last layer.
- update email in source code contact details to operational email address (#4853)
- Fix issued with using jdbc.port value when set.  #4833 Issue related to https://stackoverflow.com/questions/28369582/spring-boot-spring-always-assigns-default-value-to-property-despite-of-it-bein
- Harvester / CSW / Fix batch edit condition (#4857)
- URL `/` redirect / Jsessionid appended to URL
- ES / Update from transifex and contact org in results (#4895)
- Add a localized time format in harvester logs
- Associated resources / Remote record support. (#4899)
- Validation report / Link check / Display status / Update message.
- Validation report / Link check / Display status.
- Facet / Filter / Disable autofill
- Landing page / Fix links.
- UserSearch  / Revert enabled by default.
- Home page / Fix suggestion. Improve config for facet with more examples. Score : boost down obsolete records.
- Saved selection / Migrate to ES.
- Facet / Add collapsed init state config.
- Facet / Support tree even if agg values contains '/' - switch to a less common separator. Test fix
- Facet / Support tree even if agg values contains '/' - switch to a less common separator. Add example for INSPIRE Priority dataset.
- Saved selection / Avoid init if not enabled.
- INSPIRE / Fix field names.
- Index / ResourceIdentifier MUST be part of full text search. Experiment recordLink object to store associated resources.
- Search improvement / Add possibility to customize search query. Configure a default score boosting down member of series and old records.
- Search improvement
- Editor board / Access manager / Use search API instead of proxy. (#4879)
- Facet / Add filter
- Active filter / Improvements
- Language may be encoded using a prefix before language code
- Editor / Attributes / Add support for directive on form element
- Index translations
- Index field which are not ISO based.
- Search / Allow searches on `_groupOwner`
- New metadata / Increase number of templates.
- ISO19115-3 / Associated resource / Add remote operatesOn support. Fix source.
- ISO19139 / Keep xlink:href if no uuidref is set.
- Associated record
- Data directory / Improve initialization
- Externalize InspireValidatorUtils configuration (#4876)
- Add schema dependency to service module so that unit tests will not fail. (#4835)
- Facet / Fix recursive call.
- [#4864] Fix for thumbnails on the homepage containing a space
- Add `href=""` to make the links accessible for keyboards
- Editor board / Fix facet on standard
- Record view / Temporal range is array.
- Dependabot alerts.
- add dublin core section to thesaurus (#4831)
- PDF, CSV and ZIP export improvements.
- DB translations / Allow override transifex ones
- Index / Do not index xlink:href as keyword. It is in link property.
- Record view / Display temporal extent.
- ES Proxy / Fix no result when authenticated with not an admin
- Facet / Add configuration to display facet based on user profile.
- add dublin core section to thesaurus (#4831)
- Merge pull request #4837 from fxprunayre/es-merge-master-20200708
- Update libs reported by github security.
- Improve error message when uploading a mef zip file containing lots of records. Identify the uuid of the record that failed to load.
- Merge remote-tracking branch 'origin/master' into es-merge-master-20200708
- Upgrade for JPA 2 (#4827)
- validation report UX (#4828)
- do not want a default namespace to be inferred from srsName attribute when default namespace is gml (#4824)
- Editor / Polygon / Fix validation error on srsName and id attributes. (#4791)
- Enhance ESRI REST API support (#4784)
- Remove the 'geonet' namespace from the metadata (added to the metadata to handle the metadata editing logic) before applying update-fixed-info process, to avoid it's added to the stored metadata
- Search / Restore active filters with Elasticsearch (#4815)
- DB / Replacing unused CswCapabilitiesInfo by Translations  (#4823)
- group reviewer should be able do publish an md even if they can't edi… (#4816)
- Update from transifex.
- Thesaurus download now use API. (#4821)
- Fix JS error when getting INSPIRE config.
- OpenAPI / Remove test server on swagger2 node.
- Merge pull request #4749 from fxprunayre/open-api-spring5update
- Remove Cacheable annotation in SchematronCriteriaGroup and enable tests. To investigate further the error caused when the annotation is enabled in this entity
- make message more specific
- fix typo
- MapService / show an error when parsing WMTS options failed
- Map / avoid error when no world extent on proj
- Map / do not put an extent restriction on map views
- OpenAPI / Improvements.
- OpenAPI / Doc and request body for search endpoint.
- Test / Ignore jeeves formatter service & Groovy. Schematron group rules needs improvements.
- Pom / Fix duplicate deps.
- Test / Fix NPE and remove 0.1 in API path.
- Test / Fix NPE.
- Test / Update JSON expected encoding.
- Update MetadataLinkId, used as IdClass in MetadataLink, to use the Link class identifier instead of using an instance of the class Link, otherwise the following error happens: Failed to convert request element in entity with @IdClass
- Update API doc page to use send the CSRF token
- Remove API version JS API requests and update module injection for GnSearchController
- Fix import.
- Add multilingual titles to thesauri (#4766)
- Merge remote-tracking branch 'origin/4.0.x' into open-api-spring5update
- Align JAXB version
- Fix missing variable - related to pull request #4794 (#4796)
- Avoid duplicated thesaurus label in the metadata editor for iso19139 metadata multilingual metadata (#4794)
- Improve code to handle error responses in thesaurus upload via file or url
- Update iso19139 multilingual template language codes to match database language codes. Related to #4786 (#4788)
- present message as html (#4787)
- add notification if layer was added
- Map editor / use map promise to add the vector layer (#4785)
- Merge remote-tracking branch 'origin/master' into 4.0.x
- shorten index names for oracle 30 char limit (#4776)
- Home page / Add possibility to customize facets. (#4768)
- xml-cache-manager - Fix double logging trace
- restrict template creation as well based on METADATA_IMPORT_RESTRICT (#4783)
- Improved styling for the portals (#4771)
- User profile - display group/profiles as text for non useradmin and administrators profiles
- Update multiselect directive to support readonly mode. User profile page uses this directive for group/profiles, but should not allow to change that information to non admin users.
- New thesaurus form - enable the Create button if the form is filled, display errors in missing fields (#4762)
- Add macOS profile to download elastic search (#4761)
- Fix typos in development documentation (#4767)
- Update software instructions, standard license and contributing files (#4697)
- UX keyword chooser - enter key (#4735)
- Portal page improvement
- Harvester / When log file is missing, log message at debug level. (#4748)
- Improved way of declaring the `isUserFeedbackEnabled` variable (#4754)
- OpenAPI / Only one path to access the API now. No version number anymore. The API version correspond to the running GeoNetwork version.
- Index iso19139 specification title with gmx:Anchor
- Fixed bug with history link to the metadata. (#4738)
- Group management updates for User Administrators to allow saving the changes and make the group name field readonly
- add priority dataset to predefined dates
- Update inflate mechanism to work with subtemplates in iso19139
- fix the display of some error messages on alerts add a notification if editor fails to open fix notification if create metadata fails
- Fix merge.
- Update swagger UI for Open API.
- Open API doc + Swagger UI.
- Update to spring 5.
- Disable db migration test which requires net.bytebuddy but makes domain module to fail to init.
- Update to JPA 1.11.23.
- Update Powermock and fix bytebyddy class not found.
- Update to spring 4.3 and spring security 4.2.
- Spring / Use versionless XSD - latest should be picked up from the JAR.
- Update to hibernate 5.
- Open API migration / endpoint is called but open API not created - probably require spring 5.
- Open API migration / Tentative to make GN Spring app to load the SpringDoc API.
- Open API Migration / Spring MVC servlet do not scan API...
- Open API Migration / Spring MVC servlet is initialized - but does not return OpenAPI doc.
- Open API migration / Tentative to make the openapi servlet to start.
- Open API migration.
- Fix related to PR https://github.com/geonetwork/core-geonetwork/pull/3569 to send the element name as as directive parameter
- allow multiple freekeyword sections (#4737)
- Merge remote-tracking branch 'origin/4.0.x' into 4.0.x
- Merge remote-tracking branch 'origin/master' into 4.0.x
- Improved way of displaying unknown related type
- add proxy for UrlChecker and change UserAgent (#4709)
- fix spaces-in-url keyword encoding (#4733)
- Add validation option to OAI-PMH harvester UI (#4729)
- Fix indexing errors with multiple titles
- Display only the first help icon in a multilingual field in the Editor
- INSPIRE / Do not drop INSPIRE validation when validating record when closing editor. (#4731)
- Fix opening of metadata related resource, related to PR #4662 (#4730)
- fix online resources
- Process / Fix missing thesaurusDir variable required by some processes. (#4718)
- Update iso19115-3.2018 schema reference
- Allow to use gn-checkbox-with-nilreason directive for specific boolean fields. Related to #2437 (#3569)
- Proxy / Limit to URL host registered in records. (#4712)
- ES / Update to 7.7.0.
- Search / Add score configuration.
- Shift to new maven repositories (OSGeo) (#4700)
- Update INSPIRE validator url to use https
- Landing page / Display link to the portal by default. (#4666)
- add-schema.sh : Update formatting of the lines being added to the pom.xml file (#4614)
- More uniform view by adding more Bootstrap classes
- Fix error with bootstrap.less not found when displaying error page. (#4707)
- Fix dependency issue #4661.  xml-commons-resolver (1.2) conflicts with xml-resolver-patched (1.2.1) - same jar different version. (#4706)
- Editor / Associated panel / Edit link / Init type selector (#4696)
- Bot session exclusion / Move hard coded list to config. (#4656)
- Add missing translation xlink:type
- Restructured search boxes: - same width on `Home` and `Search` page - same width for advanced panel - improved responsiveness - removed/cleanup CSS
- CSW harvester - javascript error related to map filter when filling the server url #4685
- Associated resources / Support remote datasets for operatesOn and associated records origin (#4608)
- Link analysis improvement (#4607)
-  Extent API / Add color parameters (#4704)
- Update review permissions check to verify if the user is reviewer in the metadata groups owner, instead of checking the edit privilege. Fixes #4589
- Don't add '#' to thesaurus url. Related to #3918
- Display metadata schemas versions
- Home page / Add tooltip on title and overview
- Support mandatory flag in editor sections. Initially supported for BoundingBox (#4605)
- jdom transitive dependency excludes (due to ill-advised jaxen pom) (#4690)
- Map editor - use map promise to add the bbox layer (#4673)
- Fix null pointer exception in thesaurus API when no thesaurus was supplied. (#4689)
- Update records_french.json
- Update and rename records_test_french.json to records_french.json
- Merge pull request #4688 from fxprunayre/4-mergemaster
- UI Config / Add more like this query configuration.
- Aggs / Histogram / Use keyed mode only. Fix label on selection of upper range.
- Aggs / Fix removal of a bucket having numeric key.
- Aggs / Draft histogram support.
- Aggs / Add tooltip for negative filter.
- Aggs / Fix date histogram.
- Merge remote-tracking branch 'origin/master' into 4-mergemaster
- Update labels.xml (#4680)
- Add method to support HttpClientContext for HttpUriRequest requests in GeonetHttpRequestFactory (#4671)
- Transifex / Add v4 resource files and synch mechanism.
- Transifex / Add v4 resource file and update.
- Search / Add support for lucene expression
- Indexing / More robust for date type
- Log / Fix placeholder substitution
- Metadata editor - map loads OSM layers even if a context file is configured #4655
- Draft beans fixes to work fine when disabled: - Use IMetadataUtils interface in DraftUtilities - Improve the documentation for the beans that require disabling / enabling.
- Set encoding to UTF-8 in metadata notifier requests (#4669)
- Fix regression bug from #4644 Was not able to set db_type to connect to other databases due to ${db.type} not being passed correctly. (#4670)
- Update iso19115-3.2018 schema reference
- allow schemas to present their own settings titles translations (#4631)
- Editor / Overview / Add JPEG format in file filter. (#4646)
- use more precise references for setting element values on server (#4664)
- Updated db connections so that it can be specified as env variables. (#4644)
- Remove non required filter related to PR #4662 causing a test failure
- Merge remote-tracking branch 'origin/master' into 4.0.x / Missing files.
- Map / Fix error 500 https://github.com/geonetwork/core-geonetwork/issues/4660.
- Merge remote-tracking branch 'origin/master' into 4.0.x
- Use portal filter to retrieve associated resources: some relations use a query in Lucene that already uses the portal filter, but other relations were retrieving directly the metadata without that filter, so could be retrieved metadata not available in a portal
- Added missing i18n file for por language
- Fixed two classes in database migration with wrong package names
- Migrate to GeoTools 23.0 (#4488)
- 4481: fix memory leak due to incorrect ref count handling
- minor layout changes to multi entry combiner (#4652)
- Fix typo in closing XML tag (#4647)
- Update version to 4.0.0-alpha.2
- One styling for all scrollbars and increase the width/height
- Search / CSV export / Trigger download in browser (#4641)
- Updated connection settings from so that it supports supplying the port and connectionProperties parameter. (#4625)
- Fix serialization exclusion in MetadataCategory (#4639)
- Fix login form display caused by https://github.com/geonetwork/core-geonetwork/pull/4633 (#4640)
- Fix facet definitions for topic categories and GeoNetwork categories, should not be tagged as localized. Fixes #4637
- Shibboleth improvements (#4633)
- Transfer owner / NPE when history is ON and group owner is null (which is allowed in the DB) (#4635)
- Fix ImportWebMapTest due to changes in 20693c711a6404d49208364adc2a63202d1ec6ad (#4634)
- Angular view / Associated resource / Layer name may contain quote (#4611)
- improvements to Multi Entry Combiner (#4615)
- UUID collision options for Directory type harvester (#4519)