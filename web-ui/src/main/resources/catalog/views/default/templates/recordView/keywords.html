<div>
  <div data-ng-if="mdView.current.record.cat.length > 0 ||
                   mdView.current.record.cl_topic.length > 0"
       class="gn-margin-bottom flex-row">
    <span class="badge badge-rounded"
          title="{{'listOfCategories' | translate}}">
      <i class="fa fa-fw fa-tags"></i>
    </span>
    <div>

      <h3 data-translate="">listOfCategories</h3>

      <div class="gn-label-list">
        <button data-ng-repeat="cat in mdView.current.record.cat"
                data-ng-click="filterBy('cat', cat)"
                data-ng-if="!sortKeywordsAlphabetically"
                class="btn btn-xs btn-default"
                title="{{'clickToFilterOn' | translate}} {{('cat-' + cat) | translate}}">
          <span class="fa gn-icon-{{cat}} resource-color"></span>&nbsp;
          {{('cat-' + cat) | translate}}
        </button>

        <button data-ng-repeat="cat in mdView.current.record.cat  | orderBy:sortByCategory"
                data-ng-click="filterBy('cat', cat)"
                data-ng-if="sortKeywordsAlphabetically"
                class="btn btn-xs btn-default"
                title="{{'clickToFilterOn' | translate}} {{('cat-' + cat) | translate}}">
          <span class="fa gn-icon-{{cat}} resource-color"></span>&nbsp;
          {{('cat-' + cat) | translate}}
        </button>
      </div>
      <hr data-ng-if="mdView.current.record.cat.length > 0 &&
                        mdView.current.record.cl_topic.length > 0" />

      <div class="gn-label-list">
        <button data-ng-repeat="cat in mdView.current.record.cl_topic track by $index"
                data-ng-click="filterBy('cl_topic.key', cat.key)"
                data-ng-if="(cat != '') && !sortKeywordsAlphabetically"
                class="btn btn-xs btn-default"
                title="{{'clickToFilterOn' | translate}} {{cat.key | translate}}">
          <span class="fa gn-icon-{{cat.key}} topic-color"></span>&nbsp;
          {{cat.key | translate}}
        </button>

        <button data-ng-repeat="cat in mdView.current.record.cl_topic  | orderBy: 'key | translate'"
                data-ng-click="filterBy('cl_topic.key', cat.key)"
                data-ng-if="(cat != '') && sortKeywordsAlphabetically"
                class="btn btn-xs btn-default"
                title="{{'clickToFilterOn' | translate}} {{cat.key | translate}}">
          <span class="fa gn-icon-{{cat.key}} topic-color"></span>&nbsp;
          {{cat.key | translate}}
        </button>
      </div>
    </div>
  </div>
  <div data-ng-repeat="(key, t) in mdView.current.record.allKeywords"
       data-ng-if="(user.canEditRecord(mdView.current.record)
                     && viewConfig.internalThesaurus
                     && viewConfig.internalThesaurus.indexOf(key) !== -1)
                    || highlightedThesaurus.indexOf(key) === -1"
       class="gn-margin-bottom flex-row">
    <span class="badge badge-rounded">
      <i class="fa fa-fw fa-tags"></i>
    </span>
    <div>
      <h3 data-translate="">{{(t.title || key) | translate}}</h3>

      <div ng-if="key === 'th_regions'">
        <div class="gn-label-list"
          data-ng-init="keywordWithGroup = mdView.current.record.getKeywordsGroupedByUriBase('th_regions', '(.*\/C19|.*#[A-Za-z]*).*')">

          <button data-ng-repeat="k in (list = (keywordWithGroup | orderBy: ['-group','default']))"
                  class="btn btn-default btn-xs"
                  title="{{'clickToFilterOn' | translate}} {{::k.default | capitalize}}"
                  aria-label="{{'clickToFilterOn' | translate}} {{::k.default | capitalize}}"
                  data-ng-click="filterBy('tag.default', k.default)">
            {{::k.default | capitalize}}
          </button>
        </div>
      </div>
      <div ng-if="key !== 'th_regions'">
        <div data-ng-if="!sortKeywordsAlphabetically"
             class="gn-label-list">
          <button data-ng-repeat="k in t.keywords track by $index"
                  class="btn btn-default btn-xs"
                  title="{{'clickToFilterOn' | translate}} {{::k.default | capitalize}}"
                  aria-label="{{'clickToFilterOn' | translate}} {{::k.default | capitalize}}"
                  data-ng-click="filterBy('tag.default', k.default)">
            {{::k.default | capitalize}}
          </button>
        </div>
        <div data-ng-if="sortKeywordsAlphabetically"
             class="gn-label-list">
          <button data-ng-repeat="k in t.keywords | orderBy: 'default'"
                  class="btn btn-default btn-xs"
                  title="{{'clickToFilterOn' | translate}} {{::k.default | capitalize}}"
                  aria-label="{{'clickToFilterOn' | translate}} {{::k.default | capitalize}}"
                  data-ng-click="filterBy('tag.default', k.default)">
            {{::k.default | capitalize}}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
