<div data-ng-controller="gnsSextantSearchForm" class="form-horizontal" role="form">

  <!--any field-->
  <div class="input-group gn-search-input">
    <input type="text" ng-model="searchObj.params.any" placeholder="{{'anyPlaceHolder' | translate}}"
           typeahead="address for address in getAnySuggestions($viewValue)" typeahead-focus-first="false" typeahead-loading="anyLoading" class="form-control"
           typeahead-min-length="1" id="anySearchField" autocomplete="off">
    <i ng-show="anyLoading" class="fa fa-refresh inner-spinner"></i>
      <span class="input-group-btn">
        <button type="submit" data-ng-click="triggerSearch()" class="btn btn-default search-btn">
          <i class="fa fa-search"></i>
        </button>
      </span>
  </div>

  <!--Map field-->
  <div gn-map-field="searchObj.searchMap" gn-map-field-geom="searchObj.params.geometry" gn-map-field-opt="mapfieldOpt"></div>

  <div class="sxt-searchform-content" sxt-custom-scroll>

    <div data-ng-repeat="facet in ::facetConfig">

      <!--Standard multi facet panel-->
      <div data-ng-if="::facet.key != 'category'" gn-facet-multiselect="{{::facet.langs[lang] || facet.key}}" gn-facet-multiselect-title="{{facet.labels[lang]}}"
           gn-facet-multiselect-filter="{{::facet.filter}}"
           gn-facet-multiselect-collapsed="{{::isFacetsCollapse(facet.langs[lang] || facet.index || facet.key)}}"></div>

      <!--Facet tree for categories-->
      <div class="gn-facet" data-ng-if="::facet.key == 'category'">
        <h5 gn-collapsible="treeFacetCollapsed">
          <span class="fa fa-arrow-circle-right" ng-class="{'fa-rotate-90': !treeFacetCollapsed, 'gn-field-empty': isFacetsCollapse('sextantTheme')}"></span>
          {{'sextantThemes' | translate}}
        </h5>
        <div class="row filter-input sxt-layertree-filter" data-ng-show="!treeFacetCollapsed" data-ng-if="::facet.filter" >
          <span class="fa fa-times-circle clear" ng-click="ctrl.activeFilter = ''" ng-show="ctrl.activeFilter" title="{{'clear'|translate}}"></span>
          <input type="text" class="form-control input-sm layerfilter" placeholder="{{'filter'|translate}}"
                 data-ng-model="ctrl.activeFilter" data-ng-model-options="{debounce: 300}">
        </div>

        <div sxt-category-tree class="sxt-categorytree" ng-class="{'collapse': treeFacetCollapsed}" sxt-category-tree-conf="thesaurus[0]" sxt-custom-scroll></div>
      </div>

    </div>
  </div>
</div>

<button type="submit" data-ng-click="resetSearch()" class="btn btn-default sxt-reset-btn" data-ng-disabled="!searchObj.canReset" translate>resetFilter</button>
