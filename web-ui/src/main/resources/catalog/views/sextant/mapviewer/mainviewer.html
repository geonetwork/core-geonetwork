<div class="wrapper" data-ng-controller="gnViewerController">
  <div class="sxt-main-tabs">

    <!-- <button class="btn btn-default btn-xs sxt-panel-toggle" ng-show="active.tool"> -->
    <!--   <span class="fa" ng-class="(active.tool) ? 'fa-minus' : 'fa-minus'"></span> -->
    <!-- </button> -->

    <sxt-tab-switcher />
  </div>
  <div id="map" ngeo-map="map" class="map"></div>
  <div gn-gfi="" dismiss=".popover" map="map" ng-class="{'leftBarExpanded': active.tool}"></div>
  <gn-features-tables gn-features-tables-map="map" ng-class="{'leftBarExpanded': active.tool}" gn-active="active.tool"></gn-features-tables>


  <!-- Left buttons - Tools-->
  <div class="tools main-tools" ng-class="{'activeTool': active.tool, 'sxt-maximize-layer-tools': active.maximized }">

    <div gi-btn-group gnv-close-panel data-ng-controller="toolsController" class="sxt-panel-button">
      <button sxt-tool class="btn btn-default" ng-model="activeTools.layers" type="submit" rel="#layers" gi-btn gnv-tools-btn>
        <span class="fsxt">c</span>
        <span role="tooltip" data-translate="">Layers</span>
      </button>
      <button sxt-tool class="btn btn-default" ng-model="activeTools.import" type="submit" rel="#importLayer" gi-btn gnv-tools-btn>
        <span class="fsxt">d</span>
        <span role="tooltip" data-translate="">add</span>
      </button>
      <button sxt-tool class="btn btn-default" ng-model="activeTools.contexts" type="submit" rel="#contexts" gi-btn gnv-tools-btn>
        <span class="fa fa-bookmark"></span>
        <span role="tooltip" data-translate="">Contexts</span>
      </button>
      <button sxt-tool class="btn btn-default" ng-model="activeTools.print" type="submit" rel="#print" gi-btn gnv-tools-btn>
        <span class="fa fa-print"></span>
        <span role="tooltip" data-translate="">Print</span>
      </button>
      <button sxt-tool gi-btn class="btn btn-default" type="submit" ng-model="mInteraction.active" rel="#measures" gnv-tools-btn>
        <span class="fsxt">a</span>
        <span role="tooltip" data-translate="">Measure</span>
      </button>
      <button sxt-tool gi-btn class="btn btn-default" type="submit" rel="#draw" ng-model="drawVector.inmap" gnv-tools-btn>
        <span class="fa fa-pencil"></span>
        <span role="tooltip" data-translate="">Annotations</span>
      </button>
      <button ng-if="benthique" sxt-tool gi-btn class="btn btn-default" type="submit" rel="#benthique" ng-model="activeTools.benthique" gnv-tools-btn>
        <span class="fa fa-anchor"></span>
        <span role="tooltip" data-translate="">Esp√®ces benthiques</span>
      </button>
    </div>

    <div class="panel-tools-container" ng-class="{'sxt-tab-open': active.tool }">

      <!--Layer tree & background layers-->
      <div class="panel panel-default force-hide panel-tools" id="layers" gnv-layermanager-btn>
        <div class="layers clearfix" ng-class="{'layers-tools-expanded': active.layersTools}">


          <div class="sxt-layertree" sxt-custom-scroll>
            <div gn-baselayerswitcher="" gn-baselayerswitcher-map="map"></div>
            <div gn-terrain-switcher="ol3d"
                 ng-show="is3dEnabled"></div>
            <div sxt-layertree="map"></div>
          </div>

          <hr class="sxt-layer-separator">
          <div class="btn-group sxt-layer-tabs sxt-ncwms-tabs" ng-show="layerTabs.ncwms.active">
            <button class="btn btn-default btn-xs" ng-click="layerTabSelect('ncwms')" ng-class="{'active': layerTabs.ncwms.active}">
              <span class="btn btn-default btn-xs pull-right">&times;</span>
              <span translate>ncwms</span>
            </button>
          </div>
          <div class="btn-group sxt-layer-tabs sxt-ncwms-tabs" ng-show="layerTabs.wps.active">
            <button class="btn btn-default btn-xs" ng-click="layerTabSelect('wps')" ng-class="{'active': layerTabs.wps.active}">
              <span class="btn btn-default btn-xs pull-right">&times;</span>
              <span translate>process</span>
            </button>
          </div>
          <div class="btn-group sxt-layer-tabs sxt-ncwms-tabs" ng-show="layerTabs.wfsfilter.active">
            <button class="btn btn-default btn-xs" ng-click="layerTabSelect('wfsfilter')" ng-class="{'active': layerTabs.wfsfilter.active}">
              <span class="btn btn-default btn-xs pull-right">&times;</span>
              <span translate>filter</span>
            </button>
          </div>
          <button class="btn btn-default btn-xs" sxt-layer-tools-toggle>
            <i class="fa" ng-class="{ 'fa-plus': !active.maximized, 'fa-minus': active.maximized }"></i>
          </button>
          <div class="btn-group sxt-layer-tabs" ng-class="{'sxt-hidden': isSeparatedTool()}">
            <button class="btn btn-default btn-xs" ng-click="layerTabSelect('legend')" ng-class="{'active': layerTabs.legend.active}">
              <span translate>legend</span>
            </button>
            <button class="btn btn-default btn-xs" ng-click="layerTabSelect('sort')" ng-class="{'active': layerTabs.sort.active}">
              <span translate>sort</span>
            </button>
            <button class="btn btn-default btn-xs" ng-click="layerTabSelect('source')" ng-class="{'active': layerTabs.source.active}">
              <span translate>source</span>
            </button>
          </div>


          <tabset class="sxt-layers-tabset">

            <tab active="layerTabs.legend.active" select="handleTabParsing()">
              <tab-heading>
                <i class="fa fa-picture-o fa-fw"></i>
                <span translate>legends</span>
              </tab-heading>
              <div class="panel-carousel" gn-legend-panel="map" sxt-custom-scroll axis="yx"></div>
            </tab>

            <tab active="layerTabs.sort.active">
              <tab-heading>
                <i class="fa fa-sort fa-fw"></i>
                <span translate>sort</span>
              </tab-heading>
              <div class="panel-carousel" gn-layerorder-panel="map" sxt-custom-scroll></div>
            </tab>

            <tab active="layerTabs.source.active">
              <tab-heading>
                <i class="fa fa-info fa-fw"></i>
                <span translate>sources</span>
              </tab-heading>
              <div class="panel-carousel" gn-layersources-panel="map" sxt-custom-scroll></div>
            </tab>

            <tab active="layerTabs.ncwms.active">
              <tab-heading>
                <i class="fa fa-anchor fa-fw"></i>
                <span translate>ncwms</span>
              </tab-heading>
              <div class="ncwms-root" sxt-custom-scroll>
                <div ng-repeat="layer in map.getLayers().getArray()" class="ncwms-item">
                  <div ng-show="active.NCWMS == layer && layer.visible" class="panel panel-default panel-ncwms-container" ng-if="layer.ncInfo">
                    <div class="panel-heading">{{layer.get('label')}}</div>
                    <div gn-ncwms-transect="" map="map" layer="layer"></div>
                  </div>
                </div>
              </div>
            </tab>

            <tab active="layerTabs.wps.active">
              <tab-heading>
                <i class="fa fa-cog"></i>
                <span translate>process</span>
              </tab-heading>
              <div class="wps-container" sxt-custom-scroll>
                <div class="sxt-wps-panel"></div>
              </div>
            </tab>

            <tab active="layerTabs.wfsfilter.active">
              <tab-heading>
                <i class="fa fa-cog"></i>
                <span translate>filter</span>
              </tab-heading>
              <div class="wps-container" sxt-custom-scroll>
                <div class="sxt-wfsfilter-panel"></div>
              </div>
            </tab>

          </tabset>

        </div>
      </div>

      <!--Import layer WMS,WMTS,KML-->
      <div class="panel panel-default force-hide panel-tools" id="importLayer" gnv-layermanager-btn>
        <div class="panel-body">

          <div class="btn-group flux">
            <button type="button" class="btn btn-default" data-translate="">LayerWMS</button>
            <button type="button" class="btn btn-default" data-translate="">LayerWMTS</button>
            <button type="button" class="btn btn-default" data-translate="">LayerKML</button>
          </div>

          <div class="panel-carousel-window">
            <div class="panel-carousel-container">
              <div class="panel-carousel" gn-wms-import="wms" gn-wms-import-map="map" sxt-custom-scroll></div>
              <div class="panel-carousel" gn-wms-import="wmts" gn-wms-import-map="map" sxt-custom-scroll></div>
              <div class="panel-carousel" gn-kml-import="" gn-kml-import-map="map" sxt-custom-scroll></div>
            </div>
          </div>
        </div>
      </div>

      <div class="panel panel-default force-hide panel-tools" id="contexts">

      <div class="panel-body">
        <div gn-ows-context="" map="map"></div>
      </div>
    </div>

    <!--Measure Info Panel-->
    <div class="panel panel-default force-hide panel-tools" id="measures">
      <div class="panel-body panel-sm">
        <div class="gn-measure-text">
          <div class="alert alert-warning hidden-print" translate>measure_instruction</div>
          <dl class="dl-horizontal">
            <dt>{{'Distance' | translate}}</dt>
            <dd>{{measureObj.distance | measure}}</dd>
            <dt>{{'Surface' | translate}}</dt>
            <dd>{{measureObj.surface | measure:'area':['km&sup2', ' m&sup2']}}</dd>
          </dl>
        </div>
      </div>
    </div>

      <!--Draw Panel-->
      <div class="panel panel-default force-hide panel-tools" id="draw">
        <div class="panel-body">
          <div class="gn-draw-styleform" gn-draw="" map="map" vector="drawVector">
          </div>
        </div>
      </div>

      <!--Espece benthique panel-->
      <div ng-if="benthique" class="panel panel-default force-hide panel-tools" id="benthique">
        <div class="panel-body">
          <h5 data-translate="">benthiqueSpicies</h5>
          <div class="sxt-benthique" sxtb-panel="map">
          </div>
        </div>
      </div>

    <div class="panel panel-default force-hide panel-tools" id="print" sxt-custom-scroll>

      <div class="panel-body">
        <div gn-mapprint="" print-active="activeTools.print" map="map"></div>
      </div>
    </div>

      </div>

  </div>


  <!--Top right buttons - Navigation-->
  <div class="btn-group sx-toolbar tools" gn-localisation-input map="map"></div>
  <div class="btn-group sx-toolbar tools basket-tools">
  </div>

  <!--Top right buttons - Navigation-->
  <div class="tools control-tools">
    <button class="btn btn-default btn-zoomin" type="submit" data-ng-click="zoom(map,1)">
      <span class="fa fa-plus"></span>
      <span role="tooltip" data-translate="">Zoom</span>
    </button>
    <button class="btn btn-default btn-maxextent" type="submit" data-ng-click="zoomToMaxExtent(map)">
      <span class="fa fa-globe"></span>
      <span role="tooltip" data-translate="">maxExtentZoom</span>
    </button>
    <button class="btn btn-default btn-zoomout" type="submit" data-ng-click="zoom(map,-1)">
      <span class="fa fa-minus"></span>
      <span role="tooltip" data-translate="">ZoomOut</span>
    </button>
    <button gn-graticule-btn="map" class="btn btn-default" type="submit">
    </button>
    <button class="btn btn-default" type="submit" sxt-full-screen="map">
      <span class="fa fa-expand"></span>
      <span role="tooltip" data-translate="">fullScreen</span>
    </button>
    <button class="btn btn-default" type="submit"
            data-ng-if="is3DModeAllowed"
            data-ng-click="switch2D3D(map)">
      <span class="fa fa-cube"
            data-ng-class="is3dEnabled ? 'fa-cube' : 'fa-square-o'"/>
      <span role="tooltip" data-translate="">switchFrom2DTo3D</span>
    </button>
  </div>


  <footer ng-class="{'leftBarExpanded': active.tool}">
    <div sxt-mouse-position></div>
  </footer>

</div>
