<div>
  <p>Layer menu for layer {{layer.get('title')}}</p>

  <p>
    &copy;
    <span ng-if="!layer.get('attributionUrl')">{{layer.get('attribution')}}</span>
    <span ng-if="layer.get('attributionUrl')">
      <a href="{{layer.get('attributionUrl')}}" target="_blank">{{layer.get('attribution')}}</a>
    </span>
  </p>

  <p><a href="" ng-click="handleClose()">Close menu</a></p>

  <p ng-if="layer.get('md') || layer.get('metadataUrl')">
    <a href="" ng-click="ctrl.showMetadata()">
      <span translate>showMetadata</span>
    </a>
  </p>

  <p ng-if="layer.get('cextent')">
    <a href="" ng-click="ctrl.zoomToExtent()">
      <span translate>layerExtentZoom</span>
    </a>
  </p>

  <p ng-if="download">
    <a href="" ng-click="ctrl.addToPanier()">
      <span translate>download</span>
    </a>
  </p>

  <tabset>
    <tab>
      <tab-heading translate>mapLegend</tab-heading>
      <div>
        <img ng-src="{{layer.get('legend')}}"
             alt="{{layer.get('label')}} {{'mapLegend' | translate}}"
             aria-label="{{layer.get('label')}} {{'mapLegend' | translate}}"/>
      </div>
    </tab>

    <tab ng-if="wfs || (wfsLink && user.canEditRecord(layer.get('md')))">
      <tab-heading translate>filter</tab-heading>
      <div>
        <div gn-wfs-filter-facets
             layer="layer" wfs-url="wfsLink.url"
             feature-type-name="wfsLink.featureTypeName"
             mode="group">
        </div>
      </div>
    </tab>

    <tab ng-if="process">
      <tab-heading translate>process</tab-heading>
      <div>
        <gn-wps-process-form map="map"
                             wps-link="process"
                             wfs-link="wfsLink" />
      </div>
    </tab>

    <tab>
      <tab-heading translate>settings</tab-heading>
      <div>
        <p>
          <input type="range" min="0" max="1" step="0.05" ng-model="layer.opacity" />
          <span translate>opacity</span>
        </p>
        <div ng-if="layer.get('advanced')"
             gn-ncwms-transect
             map="map"
             layer="layer"
        ></div>
      </div>
    </tab>

    <tab ng-if="layer.get('annotationsUuid')">
      <tab-heading translate>annotations</tab-heading>
      <div>
        <sxt-annotations-editor map="map" layer="layer" />
      </div>
    </tab>
  </tabset>

  <p><a href="" ng-click="handleClose(); ctrl.deleteLayer()" translate>remove</a></p>
</div>
