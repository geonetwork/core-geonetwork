<gn-search-results gn-search-name="mainsearch">
  <ul class="list-group gn-resultview gn-resultview-sumup">
    <li class="list-group-item gn-grid"
        data-ng-repeat="md in results"
        data-gn-fix-mdlinks=""
        data-gn-displayextent-onhover=""
        data-gn-zoomto-onclick="">

      <!--start top row-->
      <div class="row">
        <input data-gn-selection-md type="checkbox"
               data-ng-model="md.selected"
               aria-label="{{'clickToSelect' | translate}}"
               data-ng-change="change()"/>

        <!--Source catalog Logo-->
        <a data-ng-if="md.groupWebsite"
           href="{{md.groupWebsite}}"
           target="_blank">
          <img data-ng-src="{{gnUrl}}..{{md.logo}}"
               alt="{{'siteLogo' | translate}}"
               class="gn-source-logo"/>
        </a>
        <img data-ng-if="!md.groupWebsite && md.logo"
             data-ng-src="{{gnUrl}}..{{md.logo}}"
             alt="{{'siteLogo' | translate}}"
             class="gn-source-logo"/>

        <div class="gn-md-category"
             data-ng-class="md.category.length > 0 ||
                              md.topicCat.length > 0 ||
                              md.inspirethemewithac.length > 0 ? '' : 'invisible'">
          <span data-translate="">listOfCategories</span>
          <a data-ng-repeat="cat in ::md.category"
             title="{{('cat-' + cat) | translate}}"
             aria-label="{{('cat-' + cat) | translate}}"
             data-ng-href="#/search?_cat={{cat}}">
            <i class="fa">
              <span class="fa gn-icon-{{cat}}"></span>
            </i>
          </a>
          <a data-ng-repeat="t in md.inspirethemewithac"
             data-ng-href="#/search?inspiretheme={{t.split('|')[1]}}">
            <i class="fa" title="{{t.split('|')[1]}}">
              <span class="fa iti-{{t.split('|')[0]}}"></span>
            </i>
          </a>
          <a data-ng-repeat="t in md.topicCat"
             data-ng-href="#/search?topicCat={{t}}"
             title="{{t | translate}}"
             aria-label="{{t | translate}}">
            <i class="fa">
              <span class="fa gn-icon-{{t}}"></span>
            </i>
          </a>
        </div>
        <div data-gn-metadata-rate="md"
             data-readonly="true"
             class="pull-right"/>
      </div>
      <!--end top row-->
      <div class="row gn-md-title"
           data-ng-click="openRecord($index, md, searchResults.records)">
        <h3>
          <a data-ng-href="#/{{(md.draft == 'y')?'metadraf':'metadata'}}/{{md.uuid}}"
             title="{{md.resourceTitle}}">
            <i class="fa gn-icon-{{md.resourceType[0]}}" title="{{md.resourceType[0] | translate}}"/>
            {{(md.resourceTitle) | characters:80}}</a>
        </h3>
      </div>

      <!--start middle row-->
      <div title="{{md.resourceAbstract | striptags}}"
           data-ng-click="openRecord($index, md, searchResults.records)">
        <div class="gn-md-thumbnail">
          <div class="gn-md-thumbnail"
               data-ng-class="{'gn-md-no-thumbnail': !md.overview[0]}"></div>
          <img class="gn-img-thumbnail"
               alt="{{md.resourceTitle}}"
               data-ng-src="{{md.overview[0].url}}"
               data-ng-if="md.overview[0]"/>
        </div>


        <div style="float:left; display:block; width: calc(100% - 162px)">

          <div class="text-justify gn-md-abstract ellipsis">
            <div>
              <p>{{md.resourceAbstract  | striptags}}</p>
            </div>
          </div>

          <div class="row gn-md-details">
            <p ng-if="::!md.getAllContacts().resource">&nbsp;</p>
            <p data-ng-repeat="c in ::md.getAllContacts().resource track by $index">
              <img data-ng-if="::c.logo"
                   data-ng-src="{{::c.logo}}"
                   class="gn-source-logo"
                   title="{{::c.name}} ({{::c.role}})"/>
              {{::c.name}}
            </p>
          </div>
        </div>


        <!--<div>
          <span data-ng-repeat="h in md.inner_hits.others.hits.hits">
            <i class="fa fa-fw {{h._source.docType === 'feature' ? 'fa-map-pin' : 'gn-icon-' + h._source.resourceType}}"></i> {{h._source.resourceTitle}},
          </span>
        </div>-->

      </div>
      <!--end middle row-->

      <!--start bottom row-->
      <div>
        <!-- Display the first metadata status (apply to ISO19139 record) -->
        <div data-ng-if="md.status_text.length > 0"
             title="{{md.status_text[0]}}"
             class="gn-status gn-status-{{md.status[0]}}">{{md.status_text[0]}}
        </div>
        <div class="gn-toolbar">
          <gn-links-btn class="pull-right"></gn-links-btn>
          <div gn-grid-related gn-grid-related-uuid="::md.uuid"
               class="pull-right"
               template="../../catalog/views/default/templates/gridRelated.html"></div>
          <div data-ng-if="md.draft == 'e'"
               title="{{'workingCopy' | translate}}"
               class="gn-workingcopy-status pull-right">
            <i class="fa fa-pencil"></i>
            <span>{{'workingCopy' | translate}}</span>
          </div>
        </div>
      </div>

    </li>
    <!--end bottom row-->
    <div style="clear: both;"></div>
  </ul>
</gn-search-results>
