<li
  data-ng-class="{'dropdown': isSubmenu, 'btn-group': renderAsButton}"
  role="menuitem"
  data-ng-hide="isSubmenu && page.pages.length < 1"
>
  <!-- Submenu dropdown toggle -->
  <a
    data-ng-if="isSubmenu"
    data-ng-class="{'btn btn-default': renderAsButton}"
    class="dropdown-toggle gn-menuheader-xs"
    role="button"
    data-toggle="dropdown"
    aria-haspopup="true"
    aria-expanded="true"
  >
    <span
      data-ng-show="page.icon && page.icon.length > 0"
      class="fa fa-fw {{page.icon}}"
    ></span>
    <span>{{page.label}}</span>
    <span class="caret hidden-xs"></span>
  </a>

  <!-- Submenu dropdown items -->
  <ul data-ng-if="isSubmenu" class="dropdown-menu gn-menu-xs clearfix">
    <li
      data-ng-repeat="page in page.pages"
      class="gn-menuitem-xs"
      role="menuitem"
      data-ng-init="submenuExternalLink = (page.format == 'LINK' || page.format == 'EMAILLINK' || page.format == 'HTMLPAGE');"
    >
      <a
        data-ng-show="submenuExternalLink"
        title="{{page.label}}"
        href="{{page.link | replaceLinkPlaceholders:context}}"
        target="{{page.link.indexOf('http') === 0 ? '_blank' : '_self'}}"
      >
        <span
          data-ng-show="page.icon && page.icon.length > 0"
          class="fa fa-fw {{page.icon}}"
        ></span>
        <span>{{page.label}}</span>
      </a>
      <a
        data-ng-show="!submenuExternalLink"
        data-gn-active-tb-item="{{gnCfg.mods.page.appUrl + '/' + page.pageId}}?page={{page.pageId}}"
        title="{{page.pageId}}"
        data-ng-click="changePage($event)"
      >
        <span
          data-ng-show="page.icon && page.icon.length > 0"
          class="fa fa-fw {{page.icon}}"
        ></span>
        <span>{{page.label}}</span>
      </a>
    </li>
  </ul>

  <!--   Single page external link -->
  <a
    data-ng-if="!isSubmenu && page && isExternalLink"
    data-ng-class="{'btn btn-default': renderAsButton}"
    title="{{page.label}}"
    href="{{page.link | replaceLinkPlaceholders:context}}"
    target="_blank"
  >
    <span
      data-ng-show="page.icon && page.icon.length > 0"
      class="fa fa-fw {{page.icon}}"
    ></span>
    <span>{{page.label}}</span>
  </a>

  <!-- Single page internal link -->
  <a
    data-ng-if="!isSubmenu && page && !isExternalLink"
    data-ng-class="{'btn btn-default': renderAsButton}"
    data-gn-active-tb-item="{{gnCfg.mods.page.appUrl + '/' + page.pageId}}?page={{page.pageId}}"
    title="{{page.pageId}}"
    data-ng-click="changePage($event)"
  >
    <span
      data-ng-show="page.icon && page.icon.length > 0"
      class="fa fa-fw {{page.icon}}"
    ></span>
    <span>{{page.label}}</span>
  </a>
</li>
