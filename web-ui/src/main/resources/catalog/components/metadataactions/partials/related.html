<!--
  ~ Copyright (C) 2001-2016 Food and Agriculture Organization of the
  ~ United Nations (FAO-UN), United Nations World Food Programme (WFP)
  ~ and United Nations Environment Programme (UNEP)
  ~
  ~ This program is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation; either version 2 of the License, or (at
  ~ your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but
  ~ WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program; if not, write to the Free Software
  ~ Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
  ~
  ~ Contact: Jeroen Ticheler - FAO - Viale delle Terme di Caracalla 2,
  ~ Rome - Italy. email: geonetwork@osgeo.org
  -->

<div class="gn-related-resources"
		 data-ng-show="relations.length > 0">
	<h2>{{title}}</h2>
	<div class="row list-group-item gn-related-item"
				data-ng-repeat="r in relations track by $index"
				data-ng-init="mainType = config.getType(r);type = r['@type'];"
				data-ng-if="r['@type'] !== 'thumbnail'">

		<div class="col-xs-1">
			<strong>
				<i class="fa fa-2x"
					 data-ng-class="config.getClassIcon(mainType)"/>&nbsp;
			</strong>
		</div>
		<div class="col-xs-7">
      <!-- WMS & WFS contains layer name in title -->
			<h4 data-ng-if="mainType !== 'WMS' &&
											mainType !== 'WCS' &&
											mainType !== 'LINKDOWNLOAD' &&
											mainType !== 'LINK' &&
											r.protocol !== 'OGC:WFS' ">
				{{getTitle(r)}}
			</h4>
			<!-- Display description if available -->
			<h4 data-ng-if="(mainType === 'WMS' ||
			                 mainType === 'WCS' ||
											 mainType.indexOf('LINK') === 0 ||
											 r.protocol === 'OGC:WFS') &&
											 r['abstract'] && r['abstract'].length > 0">
        {{(r['abstract'] || r.defaultAbstract) | striptags | characters:150}}
			</h4>

			<p class="text-muted"
				 data-ng-if="mainType.indexOf('MD') == 0">
        {{(r['abstract'] || r.defaultAbstract) | striptags | characters:150}}
			</p>
			<p class="text-muted"
				 data-ng-if="mainType === 'WMS'">
				<span data-translate=""
							data-translate-values="{url:'{{r.url}}', layer:'{{r.name}}'}">
					wmsLinkDetails</span>
			</p>
			<p class="text-muted"
				 data-ng-if="r.protocol === 'OGC:WFS'">
				<span data-translate=""
							data-translate-values="{url:'{{r.url}}', layer:'{{r.name}}'}">
					wfsLinkDetails</span>
			</p>
      <p class="text-muted"
         data-ng-if="mainType === 'WCS'">
				<span data-translate=""
              data-translate-values="{url:'{{r.url}}', layer:'{{r.name}}'}">
					wcsLinkDetails</span>
      </p>

      <p class="text-muted"
         data-ng-if="mainType === 'DB'">
				<span data-translate=""
              data-translate-values="{url:'{{r.url}}', layer:'{{r.name}}'}">
					databaseLayerDetails</span>
      </p>
      <p class="text-muted"
         data-ng-if="mainType === 'FILE'">
				<span data-translate=""
              data-translate-values="{url:'{{r.url}}', name:'{{r.name}}'}">
					fileLayerDetails</span>
        <input class="form-control"
                 type="text"
                 onClick="this.setSelectionRange(0, this.value.length)"
                 value="{{r.url}}"/>
      </p>
      <p class="text-muted"
         data-ng-if="mainType === 'LINKDOWNLOAD'">
        {{r.name}}
      </p>
      <p class="text-muted"
         data-ng-if="mainType === 'LINK'">
        {{r.name}}
      </p>
		</div>
		<div class="col-xs-4">
      <button type="button"
							class="btn btn-default btn-lg btn-block"
              data-ng-show="hasAction(mainType)"
							data-ng-click="config.doAction(mainType, r, md)">

				<span class="visible-lg-*">
					{{(config.getLabel(mainType) + type) | translate}}
				</span>
			</button>
		</div>
	</div>
</div>