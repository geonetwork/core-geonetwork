
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="GeoNetwork catalogue for listing, searching and reviewing records.">
      
      
      
        <link rel="canonical" href="https://docs.geonetwork-opensource.org/2.10/developer/schemaPlugins/">
      
      
        <link rel="prev" href="../harvesting/">
      
      
        <link rel="next" href="../mef/">
      
      
      <link rel="icon" href="../../assets/images/geonetwork-logo.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.24">
    
    
      
        <title>Schema Plugins - GeoNetwork Opensource</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#schemaPlugins" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  GeoNetwork 2.10 is deprecated and not maintained anymore.
  <a href="../../.."><strong>Click here to go to stable.</strong></a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://geonetwork-opensource.org/" title="GeoNetwork Opensource" class="md-header__button md-logo" aria-label="GeoNetwork Opensource" data-md-component="logo">
      
  <img src="../../assets/images/geonetwork-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GeoNetwork Opensource
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Schema Plugins
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/geocat/core-geonetwork" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    geonetwork/core-geonetwork
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  GeoNetwork

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../users/" class="md-tabs__link">
          
  
    
  
  User

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  Developer

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://geonetwork-opensource.org/" title="GeoNetwork Opensource" class="md-nav__button md-logo" aria-label="GeoNetwork Opensource" data-md-component="logo">
      
  <img src="../../assets/images/geonetwork-logo.svg" alt="logo">

    </a>
    GeoNetwork Opensource
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/geocat/core-geonetwork" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    geonetwork/core-geonetwork
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GeoNetwork
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../users/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    User
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Developer
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Developer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../development/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Software development
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../release/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Create a release
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../harvesting/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Harvesting
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  <span class="md-ellipsis">
    Schema Plugins
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Schema Plugins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../mef/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Metadata Exchange Format
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../settings/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Settings hierarchy
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../xml_services/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    XML Services
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../userinterface/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    User Interface
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/geocat/core-geonetwork/edit/mkdocs/docs/manual/docs/developer/schemaPlugins/index.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/geocat/core-geonetwork/raw/mkdocs/docs/manual/docs/developer/schemaPlugins/index.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="schemaPlugins">Schema Plugins</h1>
<h1 id="metadata-schemas-and-profiles">Metadata schemas and profiles</h1>
<p>A metadata schema describes:</p>
<ol>
<li>the names, descriptions and any value codelists of the elements in the metadata schema</li>
<li>how the elements of the metadata schema are laid out in a metadata document (structure)</li>
<li>constraints on elements and content in a metadata document</li>
<li>documentation on how the elements of the metadata schema should be used</li>
<li>sample metadata documents</li>
<li>scripts to convert metadata documents to and from other metadata schemas</li>
</ol>
<p>A metadata schema is usually an implementation of a metadata standard.</p>
<p>A metadata profile is an adaptation of a metadata schema to suit the needs of a particular community. A metadata profile contains all the components of a metadata schema but may extend, restrict or redefine these components.</p>
<h1 id="implementing-a-metadata-schema-or-profile">Implementing a metadata schema or profile</h1>
<p>There are many ways in which a metadata schema or profile can be implemented. This section will describe the way in which metadata schemas are implemented on <a href="https://github.com/metadata-schemas">https://github.com/metadata-schemas</a>.</p>
<p>Each metadata schema is implemented as a filesystem tree. The root of the tree is the name of the metadata schema in abbreviated form. The essential components of a metadata schema in this tree are laid out as follows:</p>
<ol>
<li><strong>loc</strong> directory with subdirectories for each three letter language code that this information is localized into, with the content in XML files (labels.xml, codelists.xml). For example: <code>loc/eng/codelists.xml</code> describes the english codelists for metadata elements</li>
<li><strong>schema</strong> directory and file named <strong>schema.xsd</strong> providing a single entry point to the XSD hierarchy. For example: <code>schema/gmd/gmd.xsd</code></li>
<li><strong>schematron</strong> directory has constraints on elements and content in a metadata document implemented using the ISO schematron language</li>
<li><strong>docs</strong> directory has documentation on how the elements of the metadata schema should be used.</li>
<li><strong>sample-data</strong> directory has sample metadata documents</li>
<li><strong>convert</strong> directory has XSLTs that convert metadata documents to and from other schemas</li>
</ol>
<p>More information on the content of these directories and files will be given in the next section. Note: some schemas on <a href="https://github.com/metadata-schemas">https://github.com/metadata-schemas</a> have more information than described above because they have been implemented as GeoNetwork schema plugins.</p>
<h1 id="schema-plugins">Schema Plugins</h1>
<p>A schema plugin that can be used in GeoNetwork is a directory of stylesheets, XML schema descriptions (XSDs) and other information necessary for GeoNetwork to index, view and possibly edit content from XML metadata records.</p>
<p>To be used in GeoNetwork, a schema directory can be manually placed in the <code>config/schema_plugins</code> sub directory of the GeoNetwork data directory. The default GeoNetwork data directory location is <code>INSTALL_DIR/web/geonetwork/WEB-INF/data</code>. The contents of these schemas are parsed during GeoNetwork initialization. If valid, they will be available for use when GeoNetwork starts up.</p>
<p>Schemas can also added to GeoNetwork dynamically if a zip archive of the schema directory is created and then uploaded to GeoNetwork in one of following ways using functions in the Administration menu:</p>
<ol>
<li>Server file path (specified using file chooser)</li>
<li>HTTP URL (eg. <a href="http://somehost/somedirectory/iso19139.mcp.zip">http://somehost/somedirectory/iso19139.mcp.zip</a>)</li>
<li>As an online resource attached to an ISO19115/19139 metadata record</li>
</ol>
<p>Uploaded schemas are also stored in the <code>config/schema_plugins</code> sub directory of the GeoNetwork data directory.</p>
<h2 id="contents-of-a-geonetwork-schema">Contents of a GeoNetwork schema</h2>
<p>When installed, a GeoNetwork schema is a directory.</p>
<p>The following subdirectories can be present:</p>
<ul>
<li><strong>convert</strong>: (<em>Mandatory</em>) Directory of XSLTs to convert metadata from or to this schema. This could be to convert metadata to other schemas or to convert metadata from other schemas and formats to this schema. Eg. <code>convert/oai_dc.xsl</code></li>
<li><strong>docs</strong>: (<em>Mandatory</em>) Directory of XSLTs to convert metadata from or to this schema. This could be to convert metadata to other schemas or to convert metadata from other schemas and formats to this schema. Eg. <code>convert/oai_dc.xsl</code></li>
<li><strong>loc</strong>: (<em>Mandatory</em>) Directory of localized information: labels, codelists or schema specific strings. Eg. <code>loc/eng/codelists.xml</code></li>
<li><strong>present</strong>: (<em>Mandatory</em>) contains XSLTs for presenting metadata in the viewer/editor and in response to CSW requests for brief, summary and full records.</li>
<li><strong>process</strong>: (<em>Optional</em>) contains XSLTs for processing metadata elements by metadata suggestions mechanism (see <strong>suggest.xsl</strong> below).</li>
<li><strong>sample-data</strong>: (<em>Mandatory</em>) Sample metadata for this schema. The metadata samples are in MEF format so that samples can have thumbnails or browse graphics as well as online resources.</li>
<li><strong>schema</strong>: (<em>Optional</em>) Directory containing the official XSDs of the metadata schema. If the schema is described by a DTD then this directory is optional. Note that schemas described by a DTD cannot be edited by GeoNetwork.</li>
<li><strong>schematron</strong>: (<em>Mandatory</em>) Directory containing the schematrons used to check conditions on content.</li>
<li><strong>templates</strong>: (<em>Optional</em>) Directory containing template and subtemplate metadata records for this schema. Template metadata records are usually metadata records with the set of elements (and content) that will be used for a specific purpose. Eg. iso19139.mcp schema has a 'Minimum Element' template that has the mandatory elements for the schema and a example of the content that is expected.</li>
</ul>
<p>The following stylesheets can be present:</p>
<ul>
<li><strong>extract-date-modified.xsl</strong>: (<em>Mandatory</em>) Extract the date of modification from the metadata record.</li>
<li><strong>extract-gml.xsl</strong>: (<em>Mandatory</em>) Extract the spatial extent from the metadata record as a GML GeometryCollection element.</li>
<li><strong>extract-thumbnails.xsl</strong>: (<em>Optional</em>) Extract the browse graphic/thumbnail from the metadata record.</li>
<li><strong>extract-uuid.xsl</strong>: (<em>Mandatory</em>) Extract the UUID of the metadata record.</li>
<li><strong>index-fields.xsl</strong>: (<em>Mandatory</em>) Index the metadata record content in Lucene. Creates the Lucene document used by GeoNetwork to index the metadata record content.</li>
<li><strong>set-thumbnail.xsl</strong>: (<em>Optional</em>) Set the browse graphic/thumbnail in the metadata record.</li>
<li><strong>set-uuid.xsl</strong>: (<em>Optional</em>) Set the UUID of the metadata record.</li>
<li><strong>suggest.xsl</strong>: (<em>Optional</em>) XSLT run by metadata suggestions service. The XSLT contains processes that can be registered and run on different elements of a metadata record. eg. expand keyword field with comma separated content into multiple keyword fields. See <a href="http://trac.osgeo.org/geonetwork/wiki/proposals/MetadataEditorSuggestion">http://trac.osgeo.org/geonetwork/wiki/proposals/MetadataEditorSuggestion</a> for more info.</li>
<li><strong>unset-thumbnail.xsl</strong>: (<em>Optional</em>) Remove the browse graphic/thumbnail from the metadata record.</li>
<li><strong>update-child-from-parent-info.xsl</strong>: (<em>Optional</em>) XSLT to specify which elements in a child record are updated from a parent record. Used to manage hierarchical relationships between metadata records.</li>
<li><strong>update-fixed-info.xsl</strong>: (<em>Optional</em>) XSLT to update 'fixed' content in metadata records.</li>
</ul>
<p>The following configuration files can be present:</p>
<ul>
<li><strong>oasis-catalog.xml</strong>: (<em>Optional</em>) An oasis catalog describing any mappings that should be used for this schema eg. mapping URLs to local copies such as schemaLocations eg. <a href="http://www.isotc211.org/2005/gmd/gmd.xsd">http://www.isotc211.org/2005/gmd/gmd.xsd</a> is mapped to <code>schema/gmd/gmd.xsd</code>. Path names used in the oasis catalog are relative to the location of this file which is the schema directory.</li>
<li><strong>schema.xsd</strong>: (<em>Optional</em>) XML schema directory file that includes the XSDs used by this metadata schema. If the schema uses a DTD then this file should not be present. Metadata records from schemas that use DTDs cannot be edited in GeoNetwork.</li>
<li><strong>schema-conversions.xml</strong>: (<em>Optional</em>) XML file that describes the converters that can be applied to records belonging to this schema. This information is used to show these conversions as options for the user to choose when a metadata record belonging to this schema is shown in the search results.</li>
<li><strong>schema-ident.xml</strong>: (<em>Mandatory</em>) XML file that contains the schema name, identifier, version number and details on how to recognise metadata records that belong to this schema. This file has an XML schema definition in <code>INSTALL_DIR/web/geonetwork/xml/validation/schemaPlugins/schema-ident.xsd</code> which is used to validate it when the schema is loaded.</li>
<li><strong>schema-substitutes.xml</strong>: (<em>Optional</em>) XML file that redefines the set of elements that can be used as substitutes for a specific element.</li>
<li><strong>schema-suggestions.xml</strong>: (<em>Optional</em>) XML file that tells the editor which child elements of a complex element to automatically expand in the editor.</li>
</ul>
<p>To help in understanding what each of these components is and what is required, we will now give a step-by-step example of how to build a schemaPlugin for GeoNetwork.</p>
<h2 id="preparation">Preparation</h2>
<p>In order to create a schema plugin for GeoNetwork, you should check out the schemaPlugins directory from the GeoNetwork sourceforge subversion repository. You can do this by installing subversion on your workstation and then executing the following command:</p>
<div class="language-text highlight"><pre><span></span><code>svn co https://github.com/geonetwork/schema-plugins/branches/master schemaPlugins
</code></pre></div>
<p>This will create a directory called schemaPlugins with some GeoNetwork schema plugins in it. To work with the example shown here, you should create your new schema plugin in a subdirectory of this directory.</p>
<h2 id="example-iso1911519139-marine-community-profile-mcp">Example - ISO19115/19139 Marine Community Profile (MCP)</h2>
<p>The Marine Community Profile (MCP) is a profile of ISO19115/19139 developed for and with the Marine Community. The profile extends the ISO19115 metadata standard and is implemented using an extension of the XML implementation of ISO19115 described in ISO19139. Both the ISO19115 metadata standard and its XML implementation, ISO19139, are available through ISO distribution channels.</p>
<p>The documentation for the Marine Community Profile can be found at <a href="http://www.aodc.gov.au/files/MarineCommunityProfilev1.4.pdf">http://www.aodc.gov.au/files/MarineCommunityProfilev1.4.pdf</a>. The implementation of the Marine Community Profile as XML schema definitions is based on the approach described at <a href="https://www.seegrid.csiro.au/wiki/AppSchemas/MetadataProfiles">https://www.seegrid.csiro.au/wiki/AppSchemas/MetadataProfiles</a>. The XML schema definitions (XSDs) are available at the URL <a href="http://bluenet3.antcrc.utas.edu.au/mcp-1.4">http://bluenet3.antcrc.utas.edu.au/mcp-1.4</a>.</p>
<p>Looking at the XML schema definitions, the profile adds a few new elements to the base ISO19139 standard. So the basic idea in defining a plugin Marine Community Profile schema for GeoNetwork is to use as much of the basic ISO19139 schema definition supplied with GeoNetwork as possible.</p>
<p>We'll now describe in basic steps how to create each of the components of a plugin schema for GeoNetwork that implements the MCP.</p>
<h3 id="creating-the-schema-identxml-file">Creating the schema-ident.xml file</h3>
<p>Now we need to provide the information necessary to identify the schema and metadata records that belong to the schema. The schema-ident.xml file for the MCP is as follows:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;schema xmlns=&quot;http://geonetwork-opensource.org/schemas/schema-ident&quot; 
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; 
        .....&gt;
  &lt;name&gt;iso19139.mcp&lt;/name&gt;
  &lt;id&gt;19c9a2b2-dddb-11df-9df4-001c2346de4c&lt;/id&gt;
  &lt;version&gt;1.5&lt;/version&gt;
  &lt;schemaLocation&gt;
    http://bluenet3.antcrc.utas.edu.au/mcp 
    http://bluenet3.antcrc.utas.edu.au/mcp-1.5-experimental/schema.xsd 
    http://www.isotc211.org/2005/gmd 
    http://www.isotc211.org/2005/gmd/gmd.xsd 
    http://www.isotc211.org/2005/srv 
    http://schemas.opengis.net/iso/19139/20060504/srv/srv.xsd
  &lt;/schemaLocation&gt;
  &lt;autodetect xmlns:mcp=&quot;http://bluenet3.antcrc.utas.edu.au/mcp&quot; 
              xmlns:gmd=&quot;http://www.isotc211.org/2005/gmd&quot; 
              xmlns:gco=&quot;http://www.isotc211.org/2005/gco&quot;&gt;
    &lt;elements&gt;
      &lt;gmd:metadataStandardName&gt;
        &lt;gco:CharacterString&gt;
          Australian Marine Community Profile of ISO 19115:2005/19139|
          Marine Community Profile of ISO 19115:2005/19139
        &lt;/gco:CharacterString&gt;
      &lt;/gmd:metadataStandardName&gt;
      &lt;gmd:metadataStandardVersion&gt;
        &lt;gco:CharacterString&gt;
          1.5-experimental|
          MCP:BlueNet V1.5-experimental|
          MCP:BlueNet V1.5
        &lt;/gco:CharacterString&gt;
      &lt;/gmd:metadataStandardVersion&gt;
    &lt;/elements&gt;
  &lt;/autodetect&gt;
&lt;/schema&gt;
</code></pre></div>
<p>Each of the elements is as follows:</p>
<ul>
<li><strong>name</strong> - the name by which the schema will be known in GeoNetwork. If the schema is a profile of a base schema already added to GeoNetwork then the convention is to call the schema <base_schema_name>.<namespace_of_profile>.</li>
<li><strong>id</strong> - a unique identifier for the schema.</li>
<li><strong>version</strong> - the version number of the schema. Multiple versions of the schema can be present in GeoNetwork.</li>
<li><strong>schemaLocation</strong> - a set of pairs, where the first member of the pair is a namespace URI and the second member is the official URL of the XSD. The contents of this element will be added to the root element of any metadata record displayed by GeoNetwork as a schemaLocation/noNamespaceSchemaLocation attribute, if such as attribute does not already exist. It will also be used whenever an official schemaLocation/noNamespaceSchemaLocation is required (eg. in response to a ListMetadataFormats OAI request).</li>
<li><strong>autodetect</strong> - contains elements or attributes (with content) that must be present in any metadata record that belongs to this schema. This is used during schema detection whenever GeoNetwork receives a metadata record of unknown schema.</li>
</ul>
<p>After creating this file you can validate it manually using the XML schema definition (XSD) in <code>INSTALL_DIR/web/geonetwork/xml/validation/schemaPlugins/schema-ident.xsd</code>. This XSD is also used to validate this file when the schema is loaded. If schema-ident.xml failes validation, the schema will not be loaded.</p>
<h4 id="more-on-autodetect">More on autodetect</h4>
<p>The autodetect section of schema-ident.xml is used when GeoNetwork needs to identify which metadata schema a record belongs to.</p>
<p>The five rules that can be used in this section in order of evaluation are:</p>
<p><strong>1. Attributes</strong> - Find one or more attributes and/or namespaces in the document. An example use case is a profile of ISO19115/19139 that adds optional elements under a new namespace to gmd:identificationInfo/gmd:MD_DataIdentification. To detect records that belong to this profile the autodetect section in the schema-ident.xml file could look something like the following:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;autodetect xmlns:cmar=&quot;http://www.marine.csiro.au/schemas/cmar.xsd&quot;&gt;
    &lt;!-- catch all cmar records that have the cmar vocab element --&gt;
    &lt;attributes cmar:vocab=&quot;http://www.marine.csiro.au/vocabs/projectCodes.xml&quot;/&gt;
&lt;/autodetect&gt;
</code></pre></div>
<p>Some other points about attributes autodetect:</p>
<ul>
<li>multiple attributes can be specified - all must be match for the record to be recognized as belonging to this schema.</li>
<li>if the attributes have a namespace then the namespace should be specified on the autodetect element or somewhere in the schema-ident.xml document.</li>
</ul>
<p><strong>2. Elements</strong> - Find one or more elements in the document. An example use case is the one shown in the example schema-ident.xml file earlier:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;autodetect xmlns:mcp=&quot;http://bluenet3.antcrc.utas.edu.au/mcp&quot; 
            xmlns:gmd=&quot;http://www.isotc211.org/2005/gmd&quot; 
            xmlns:gco=&quot;http://www.isotc211.org/2005/gco&quot;&gt;
  &lt;elements&gt;
    &lt;gmd:metadataStandardName&gt;
      &lt;gco:CharacterString&gt;
        Australian Marine Community Profile of ISO 19115:2005/19139|
        Marine Community Profile of ISO 19115:2005/19139
      &lt;/gco:CharacterString&gt;
    &lt;/gmd:metadataStandardName&gt;
    &lt;gmd:metadataStandardVersion&gt;
      &lt;gco:CharacterString&gt;
        1.5-experimental|
        MCP:BlueNet V1.5-experimental|
        MCP:BlueNet V1.5
      &lt;/gco:CharacterString&gt;
    &lt;/gmd:metadataStandardVersion&gt;
  &lt;/elements&gt;
&lt;/autodetect&gt;
</code></pre></div>
<p>Some other points about elements autodetect:</p>
<ul>
<li>multiple elements can be specified - eg. as in the above, both metadataStandardName and metadataStandardVersion have been specified - all must be match for the record to be recognized as belonging to this schema.</li>
<li>multiple values for the elements can be specified. eg. as in the above, a match for gmd:metadataStandardVersion will be found for <code>1.5-experimental</code> OR <code>MCP:BlueNet V1.5-experimental</code> OR <code>MCP:BlueNet V1.5</code> - the vertical line or pipe character '|' is used to separate the options here.</li>
<li>if the elements have a namespace then the namespace(s) should be specified on the autodetect element or somewhere in the schema-ident.xml document before the element in which they are used - eg. in the above there are there namespace declarations on the autodetect element so as not to clutter the content.</li>
</ul>
<p><strong>3. Root element</strong> - root element of the document must match. An example use case is the one used for the eml-gbif schema. Documents belonging to this schema always have root element of eml:eml so the autodetect section for this schema is:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;autodetect xmlns:eml=&quot;eml://ecoinformatics.org/eml-2.1.1&quot;&gt;
    &lt;elements type=&quot;root&quot;&gt;
        &lt;eml:eml/&gt;
    &lt;/elements&gt;
&lt;/autodetect&gt;
</code></pre></div>
<p>Some other points about root element autodetect:</p>
<ul>
<li>multiple elements can be specified - any element in the set that matches the root element of the record will trigger a match.</li>
<li>if the elements have a namespace then the namespace(s) should be specified on the autodetect element or somewhere in the schema-ident.xml document before the element that uses them - eg. as in the above there is a namespace declaration on the autodetect element for clarity.</li>
</ul>
<p><strong>4. Namespaces</strong> - Find one or more namespaces in the document. An example use case is the one used for the csw:Record schema. Records belonging to the csw:Record schema can have three possible root elements: csw:Record, csw:SummaryRecord and csw:BriefRecord, but instead of using a multiple element root autodetect, we could use the common csw namespace for autodetect as follows:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;autodetect&gt;
  &lt;namespaces xmlns:csw=&quot;http://www.opengis.net/cat/csw/2.0.2&quot;/&gt;
&lt;/autodetect&gt;
</code></pre></div>
<p>Some other points about namespaces autodetect:</p>
<ul>
<li>multiple namespaces can be specified - all must be present for the record to be recognized as belonging to this schema.</li>
<li>the prefix is ignored. A namespace match occurs if the namespace URI found in the record matches the namespace URI specified in the namespaces autodetect element.</li>
</ul>
<p><strong>5. Default schema</strong> - This is the fail-safe provision for records that don't match any of the installed schemas. The value for the default schema is specified in the appHandler configuration of the <code>INSTALL_DIR/web/geonetwork/WEB-INF/config.xml</code> config file or it could be a default specified by the operation calling autodetect (eg. a value parsed from a user bulk loading some metadata records). For flexibility and accuracy reasons it is preferable that records be detected using the autodetect information of an installed schema. The default schema is just a 'catch all' method of assigning records to a specific schema. The config element in <code>INSTALL_DIR/web/geonetwork/WEB-INF/config.xml</code> looks like the following:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;appHandler class=&quot;org.fao.geonet.Geonetwork&quot;&gt;
    .....
    &lt;param name=&quot;preferredSchema&quot; value=&quot;iso19139&quot; /&gt;
    .....
&lt;/appHandler&gt;
</code></pre></div>
<h4 id="more-on-autodetect-evaluation">More on autodetect evaluation</h4>
<p>The rules for autodetect are evaluated as follows:</p>
<div class="language-text highlight"><pre><span></span><code>for-each autodetect rule type in ( &#39;attributes/namespaces&#39;, &#39;elements&#39;, 
                                   &#39;namespaces&#39;, &#39;root element&#39; )
    for-each schema 
        if schema has autodetect rule type then 
            check rule for a match
            if match add to list of previous matches
        end if
    end for-each

    if more than one match throw &#39;SCHEMA RULE CONFLICT EXCEPTION&#39;
    if one match then set matched = first match and break loop
end for-each

if no match then 
  if namespaces of record and default schema overlap then 
        set match = default schema
    else throw &#39;NO SCHEMA MATCHES EXCEPTION&#39;
end if

return matched schema
</code></pre></div>
<p>As an example, suppose we have three schemas iso19139.mcp, iso19139.mcp-1.4 and iso19139.mcp-cmar with the following autodetect elements:</p>
<p><strong>iso19139.mcp-1.4:</strong></p>
<div class="language-text highlight"><pre><span></span><code>&lt;autodetect xmlns:mcp=&quot;http://bluenet3.antcrc.utas.edu.au/mcp&quot; 
            xmlns:gmd=&quot;http://www.isotc211.org/2005/gmd&quot; 
            xmlns:gco=&quot;http://www.isotc211.org/2005/gco&quot;&gt;
  &lt;elements&gt;
    &lt;gmd:metadataStandardName&gt;
      &lt;gco:CharacterString&gt;
        Australian Marine Community Profile of ISO 19115:2005/19139
      &lt;/gco:CharacterString&gt;
    &lt;/gmd:metadataStandardName&gt;
    &lt;gmd:metadataStandardVersion&gt;
      &lt;gco:CharacterString&gt;MCP:BlueNet V1.4&lt;/gco:CharacterString&gt;
    &lt;/gmd:metadataStandardVersion&gt;
  &lt;/elements&gt;
&lt;/autodetect&gt;
</code></pre></div>
<p><strong>iso19139.mcp-cmar:</strong></p>
<div class="language-text highlight"><pre><span></span><code>&lt;autodetect&gt;
    &lt;attributes xmlns:mcp-cmar=&quot;http://www.marine.csiro.au/schemas/mcp-cmar&quot;&gt;
&lt;/autodetect&gt;
</code></pre></div>
<p><strong>iso19139.mcp:</strong></p>
<div class="language-text highlight"><pre><span></span><code>&lt;autodetect xmlns:mcp=&quot;http://bluenet3.antcrc.utas.edu.au/mcp&quot;&gt;
    &lt;elements type=&quot;root&quot;&gt;
        &lt;mcp:MD_Metadata/&gt;
    &lt;/elements&gt;
&lt;/autodetect&gt;
</code></pre></div>
<p>A record going through autodetect processing (eg. on import) would be checked against:</p>
<ul>
<li>iso19139.mcp-cmar first as it has an 'attributes' rule</li>
<li>then iso19139.mcp-1.4 as it has an 'elements' rules</li>
<li>then finally against iso19139.mcp, as it has a 'root element' rule.</li>
</ul>
<p>The idea behind this processing algorithm is that base schemas will use a 'root element' rule (or the more difficult to control 'namespaces' rule) and profiles will use a finer or more specific rule such as 'attributes' or 'elements'.</p>
<p>After setting up schema-ident.xml, our new GeoNetwork plugin schema for MCP contains:</p>
<div class="language-text highlight"><pre><span></span><code>schema-ident.xml
</code></pre></div>
<h3 id="schema_conversions">Creating the schema-conversions.xml file</h3>
<p>This file describes the converters that can be applied to metadata records that belong to the schema. Each converter must be manually defined as a GeoNetwork (Jeeves) service that can be called to transform a particular metadata record to a different schema. The schema-conversions.xml file for the MCP is as follows:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;conversions&gt;
   &lt;converter name=&quot;xml_iso19139.mcp&quot; 
              nsUri=&quot;http://bluenet3.antcrc.utas.edu.au/mcp&quot;
              schemaLocation=&quot;http://bluenet3.antcrc.utas.edu.au/mcp-1.5-experimental/schema.xsd&quot;
              xslt=&quot;xml_iso19139.mcp.xsl&quot;/&gt;
   &lt;converter name=&quot;xml_iso19139.mcp-1.4&quot;
              nsUri=&quot;http://bluenet3.antcrc.utas.edu.au/mcp&quot;
              schemaLocation=&quot;http://bluenet3.antcrc.utas.edu.au/mcp/schema.xsd&quot; 
              xslt=&quot;xml_iso19139.mcp-1.4.xsl&quot;/&gt;
   &lt;converter name=&quot;xml_iso19139.mcpTooai_dc&quot;
              nsUri=&quot;http://www.openarchives.org/OAI/2.0/&quot;
              schemaLocation=&quot;http://www.openarchives.org/OAI/2.0/oai_dc.xsd&quot;
              xslt=&quot;oai_dc.xsl&quot;/&gt;
   &lt;converter name=&quot;xml_iso19139.mcpTorifcs&quot;
              nsUri=&quot;http://ands.org.au/standards/rif-cs/registryObjects&quot;
              schemaLocation=&quot;http://services.ands.org.au/home/orca/schemata/registryObjects.xsd&quot;
              xslt=&quot;rif.xsl&quot;/&gt;
&lt;/conversions&gt;
</code></pre></div>
<p>Each converter has the following attributes:</p>
<ul>
<li><strong>name</strong> - the name of the converter. This is the service name of the GeoNetwork (Jeeves) service and should be unique (prefixing the service name with <a href="">xml</a><schema_name> is a good way to make this name unique).</li>
<li><strong>nsUri</strong> - the primary namespace of the schema produced by the converter. eg. xml_iso19139.mcpTorifcs transforms metadata records from iso19139.mcp to the RIFCS schema. Metadata records in the RIFCS metadata schema have primary namespace URI of <a href="http://ands.org.au/standards/rif-cs/registryObjects">http://ands.org.au/standards/rif-cs/registryObjects</a>.</li>
<li><strong>schemaLocation</strong> - the location (URL) of the XML schema definition (XSD) corresponding to the nsURI.</li>
<li><strong>xslt</strong> - the name of the XSLT that actually carries out the transformation. This XSLT should be located in the convert subdirectory of the schema plugin.</li>
</ul>
<p>After setting up schema-conversions.xml, our new GeoNetwork plugin schema for MCP contains:</p>
<div class="language-text highlight"><pre><span></span><code>schema-conversions.xml  schema-ident.xml
</code></pre></div>
<h3 id="schema_and_schema_xsd">Creating the schema directory and schema.xsd file</h3>
<p>The schema and schema.xsd components are used by the GeoNetwork editor and validation functions.</p>
<p>GeoNetwork's editor uses the XSDs to build a form that will not only order the elements in a metadata document correctly but also offer options to create any elements that are not in the metadata document. The idea behind this approach is twofold. Firstly, the editor can use the XML schema definition rules to help the user avoid creating a document that is structurally incorrect eg. missing mandatory elements or elements not ordered correctly. Secondly, the same editor code can be used on any XML metadata document with a defined XSD.</p>
<p>If you are defining your own metadata schema then you can create an XML schema document using the XSD language. The elements of the language can be found online at <a href="http://www.w3schools.com/schema/">http://www.w3schools.com/schema/</a> or you can refer to a textbook such as Priscilla Walmsley's Definitive XML Schema (Prentice Hall, 2002). GeoNetwork's XML schema parsing code understands almost all of the XSD language with the exception of redefine, any and anyAttribute (although the last two can be handled under special circumstances).</p>
<p>In the case of the Marine Commuity Profile, we are basically defining a number of extensions to the base standard ISO19115/19139. These extensions are defined using the XSD extension mechanism on the types defined in ISO19139. The following snippet shows how the Marine Community Profile extends the gmd:MD_Metadata element to add a new element called revisionDate:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;xs:schema targetNamespace=&quot;http://bluenet3.antcrc.utas.edu.au/mcp&quot; 
           xmlns:mcp=&quot;http://bluenet3.antcrc.utas.edu.au/mcp&quot; .....&gt;

....

&lt;xs:element name=&quot;MD_Metadata&quot; substitutionGroup=&quot;gmd:MD_Metadata&quot; 
                               type=&quot;mcp:MD_Metadata_Type&quot;/&gt;

&lt;xs:complexType name=&quot;MD_Metadata_Type&quot;&gt;
  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;
     Extends the metadata element to include revisionDate
    &lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;
  &lt;xs:complexContent&gt;
    &lt;xs:extension base=&quot;gmd:MD_Metadata_Type&quot;&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name=&quot;revisionDate&quot; type=&quot;gco:Date_PropertyType&quot; 
                    minOccurs=&quot;0&quot;/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute ref=&quot;gco:isoType&quot; use=&quot;required&quot; 
                    fixed=&quot;gmd:MD_Metadata&quot;/&gt;
    &lt;/xs:extension&gt;
  &lt;/xs:complexContent&gt;
&lt;/xs:complexType&gt;

&lt;/xs:schema&gt;
</code></pre></div>
<p>In short, we have defined a new element mcp:MD_Metadata with type mcp:MD_Metadata_Type, which is an extension of gmd:MD_Metadata_Type. By extension, we mean that the new type includes all of the elements of the old type plus one new element, mcp:revisionDate. A mandatory attribute (gco:isoType) is also attached to mcp:MD_Metadata with a fixed value set to the name of the element that we extended (gmd:MD_Metadata).</p>
<p>By defining the profile in this way, it is not necessary to modify the underlying ISO19139 schemas. So the schema directory for the MCP essentially consists of the extensions plus the base ISO19139 schemas. One possible directory structure is as follows:</p>
<div class="language-text highlight"><pre><span></span><code>extensions  gco  gmd  gml  gmx  gsr  gss  gts  resources  srv  xlink
</code></pre></div>
<p>The extensions directory contains a single file mcpExtensions.xsd, which imports the gmd namespace. The remaining directories are the ISO19139 base schemas.</p>
<p>The schema.xsd file, which is the file GeoNetwork looks for, will import the mcpExtensions.xsd file and any other namespaces not imported as part of the base ISO19139 schema. It is shown as follows:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;xs:schema targetNamespace=&quot;http://bluenet3.antcrc.utas.edu.au/mcp&quot; 
           elementFormDefault=&quot;qualified&quot;
        xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; 
        xmlns:mcp=&quot;http://bluenet3.antcrc.utas.edu.au/mcp&quot;
        xmlns:gmd=&quot;http://www.isotc211.org/2005/gmd&quot;
        xmlns:gmx=&quot;http://www.isotc211.org/2005/gmx&quot;
        xmlns:srv=&quot;http://www.isotc211.org/2005/srv&quot;&gt;
  &lt;xs:include schemaLocation=&quot;schema/extensions/mcpExtensions.xsd&quot;/&gt;
  &lt;!-- this is a logical place to include any additional schemas that are 
       related to ISO19139 including ISO19119 --&gt;
  &lt;xs:import namespace=&quot;http://www.isotc211.org/2005/srv&quot; 
             schemaLocation=&quot;schema/srv/srv.xsd&quot;/&gt;
  &lt;xs:import namespace=&quot;http://www.isotc211.org/2005/gmx&quot; 
             schemaLocation=&quot;schema/gmx/gmx.xsd&quot;/&gt;
&lt;/xs:schema&gt;
</code></pre></div>
<p>At this stage, our new GeoNetwork plugin schema for MCP contains:</p>
<div class="language-text highlight"><pre><span></span><code>schema-conversions.xml  schema-ident.xml  schema.xsd  schema
</code></pre></div>
<h3 id="creating-the-extract-xslts">Creating the extract-... XSLTs</h3>
<p>GeoNetwork needs to extract certain information from a metadata record and translate it into a common, simplified XML structure that is independent of the metadata schema. Rather than do this with Java coded XPaths, XSLTs are used to process the XML and return the common, simplified XML structure.</p>
<p>The three xslts we'll create are:</p>
<ul>
<li><strong>extract-date-modified.xsl</strong> - this XSLT processes the metadata record and extracts the date the metadata record was last modified. For the MCP, this information is held in the mcp:revisionDate element which is a child of mcp:MD_Metadata. The easiest way to create this for MCP is to copy extract-date-modified.xsl from the iso19139 schema and modify it to suit the MCP namespace and to use mcp:revisionDate in place of gmd:dateStamp.</li>
<li><strong>extract-gml.xsl</strong> - this XSLT processes the metadata record and extracts the spatial extent as a gml GeometryCollection element. The gml is passed to geotools for insertion into the spatial index (either a shapefile or a spatial database). For ISO19115/19139 and profiles, this task is quite easy because spatial extents (apart from the bounding box) are encoded as gml in the metadata record. Again, the easiest way to create this for the MCP is to copy extract-gml.xsd from the iso19139 schema ad modify it to suit the MCP namespace.</li>
</ul>
<p>An example bounding box fragment from an MCP metadata record is:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;gmd:extent&gt;
  &lt;gmd:EX_Extent&gt;
    &lt;gmd:geographicElement&gt;
      &lt;gmd:EX_GeographicBoundingBox&gt;
        &lt;gmd:westBoundLongitude&gt;
          &lt;gco:Decimal&gt;112.9&lt;/gco:Decimal&gt;
        &lt;/gmd:westBoundLongitude&gt;
        &lt;gmd:eastBoundLongitude&gt;
          &lt;gco:Decimal&gt;153.64&lt;/gco:Decimal&gt;
        &lt;/gmd:eastBoundLongitude&gt;
        &lt;gmd:southBoundLatitude&gt;
          &lt;gco:Decimal&gt;-43.8&lt;/gco:Decimal&gt;
        &lt;/gmd:southBoundLatitude&gt;
        &lt;gmd:northBoundLatitude&gt;
          &lt;gco:Decimal&gt;-9.0&lt;/gco:Decimal&gt;
        &lt;/gmd:northBoundLatitude&gt;
      &lt;/gmd:EX_GeographicBoundingBox&gt;
    &lt;/gmd:geographicElement&gt;
  &lt;/gmd:EX_Extent&gt;
&lt;/gmd:extent&gt;
</code></pre></div>
<p>Running extract-gml.xsl on the metadata record that contains this XML will produce:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;gml:GeometryCollection xmlns:gml=&quot;http://www.opengis.net/gml&quot;&gt;
  &lt;gml:Polygon&gt;
    &lt;gml:exterior&gt;
      &lt;gml:LinearRing&gt;
        &lt;gml:coordinates&gt;
          112.9,-9.0, 153.64,-9.0, 153.64,-43.8, 112.9,-43.8, 112.9,-9.0
        &lt;/gml:coordinates&gt;
      &lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:Polygon&gt;
&lt;/gml:GeometryCollection&gt;
</code></pre></div>
<p>If there is more than one extent in the metadata record, then they should also appear in this gml:GeometryCollection element.</p>
<p>To find out more about gml, see Lake, Burggraf, Trninic and Rae, "GML Geography Mark-Up Language, Foundation for the Geo-Web", Wiley, 2004.</p>
<p>Finally, a note on projections. It is possible to have bounding polygons in an MCP record in a projection other than EPSG:4326. GeoNetwork transforms all projections known to GeoTools (and encoded in a form that GeoTools understands) to EPSG:4326 when writing the spatial extents to the shapefile or spatial database.</p>
<ul>
<li><strong>extract-uuid.xsl</strong> - this XSLT processes the metadata record and extracts the identifier for the record. For the MCP and base ISO standard, this information is held in the gmd:fileIdentifier element which is a child of mcp:MD_Metadata.</li>
</ul>
<p>These xslts can be tested by running them on a metadata record from the schema. You should use the saxon xslt processor. For example:</p>
<div class="language-text highlight"><pre><span></span><code>java -jar INSTALL_DIR/web/geonetwork/WEB-INF/lib/saxon-9.1.0.8b-patch.jar 
     -s testmcp.xml -o output.xml extract-gml.xsl
</code></pre></div>
<p>At this stage, our new GeoNetwork plugin schema for MCP contains:</p>
<div class="language-text highlight"><pre><span></span><code>extract-date-modified.xsl  extract-gml.xsd   extract-uuid.xsl
schema-conversions.xml  schema-ident.xml  schema.xsd  schema
</code></pre></div>
<h3 id="creating-the-localized-strings-in-the-loc-directory">Creating the localized strings in the loc directory</h3>
<p>The loc directory contains localized strings specific to this schema, arranged by language abbreviation in sub-directories.</p>
<p>You should provide localized strings in whatever languages you expect your schema to be used in.</p>
<p>Localized strings for this schema can be used in the presentation xslts and schematron error messages. For the presentation xslts:</p>
<ul>
<li>codelists for controlled vocabulary fields should be in loc/<language_abbreviation>/codelists.xml eg. <code>loc/eng/codelists.xml</code></li>
<li>label strings that replace XML element names with more intelligible/alternative phrases and rollover help strings should be in loc/<language_abbreviation>/labels.xml eg. <code>loc/eng/labels.xml</code>.</li>
<li>all other localized strings should be in loc/<language_abbreviation>/strings.xml eg. <code>loc/eng/strings.xml</code></li>
</ul>
<p>Note that because the MCP is a profile of ISO19115/19139 and we have followed the GeoNetwork naming convention for profiles, we need only include the labels and codelists that are specific to the MCP or that we want to override. Other labels and codelists will be retrieved from the base schema iso19139.</p>
<h4 id="more-on-codelistsxml">More on codelists.xml</h4>
<p>Typically codelists are generated from enumerated lists in the metadata schema XSDs such as the following from <a href="http://www.isotc211.org/2005/gmd/identification.xsd">http://www.isotc211.org/2005/gmd/identification.xsd</a> for gmd:MD_TopicCategoryCode in the iso19139 schema:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;xs:element name=&quot;MD_TopicCategoryCode&quot; type=&quot;gmd:MD_TopicCategoryCode_Type&quot;/&gt;

&lt;xs:simpleType name=&quot;MD_TopicCategoryCode_Type&quot;&gt;
   &lt;xs:restriction base=&quot;xs:string&quot;&gt;
     &lt;xs:enumeration value=&quot;farming&quot;/&gt;
     &lt;xs:enumeration value=&quot;biota&quot;/&gt;
     &lt;xs:enumeration value=&quot;boundaries&quot;/&gt;
     &lt;xs:enumeration value=&quot;climatologyMeteorologyAtmosphere&quot;/&gt;
     &lt;xs:enumeration value=&quot;economy&quot;/&gt;
     &lt;xs:enumeration value=&quot;elevation&quot;/&gt;
     &lt;xs:enumeration value=&quot;environment&quot;/&gt;
     &lt;xs:enumeration value=&quot;geoscientificInformation&quot;/&gt;
     &lt;xs:enumeration value=&quot;health&quot;/&gt;
     &lt;xs:enumeration value=&quot;imageryBaseMapsEarthCover&quot;/&gt;
     &lt;xs:enumeration value=&quot;intelligenceMilitary&quot;/&gt;
     &lt;xs:enumeration value=&quot;inlandWaters&quot;/&gt;
     &lt;xs:enumeration value=&quot;location&quot;/&gt;
     &lt;xs:enumeration value=&quot;oceans&quot;/&gt;
     &lt;xs:enumeration value=&quot;planningCadastre&quot;/&gt;
     &lt;xs:enumeration value=&quot;society&quot;/&gt;
     &lt;xs:enumeration value=&quot;structure&quot;/&gt;
     &lt;xs:enumeration value=&quot;transportation&quot;/&gt;
     &lt;xs:enumeration value=&quot;utilitiesCommunication&quot;/&gt;
   &lt;/xs:restriction&gt;
 &lt;/xs:simpleType&gt;
</code></pre></div>
<p>The following is part of the codelists.xml entry manually created for this element:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;codelist name=&quot;gmd:MD_TopicCategoryCode&quot;&gt;
  &lt;entry&gt;
    &lt;code&gt;farming&lt;/code&gt;
    &lt;label&gt;Farming&lt;/label&gt;
    &lt;description&gt;Rearing of animals and/or cultivation of plants. Examples: agriculture,
      irrigation, aquaculture, plantations, herding, pests and diseases affecting crops and
      livestock&lt;/description&gt;
  &lt;/entry&gt;
  &lt;!-- - - - - - - - - - - - - - - - - - - - - - - - - --&gt;
  &lt;entry&gt;
    &lt;code&gt;biota&lt;/code&gt;
    &lt;label&gt;Biota&lt;/label&gt;
    &lt;description&gt;Flora and/or fauna in natural environment. Examples: wildlife, vegetation,
      biological sciences, ecology, wilderness, sealife, wetlands, habitat&lt;/description&gt;
  &lt;/entry&gt;
  &lt;!-- - - - - - - - - - - - - - - - - - - - - - - - - --&gt;
  &lt;entry&gt;
    &lt;code&gt;boundaries&lt;/code&gt;
    &lt;label&gt;Boundaries&lt;/label&gt;
    &lt;description&gt;Legal land descriptions. Examples: political and administrative
    boundaries&lt;/description&gt;
  &lt;/entry&gt;

  .....

&lt;/codelist&gt;
</code></pre></div>
<p>The codelists.xml file maps the enumerated values from the XSD to a localized label and a description via the code element.</p>
<p>A localized copy of codelists.xml is made available on an XPath to the presentation XSLTs eg. /root/gui/schemas/iso19139/codelist for the iso19139 schema.</p>
<p>The XSLT metadata.xsl which contains templates used by all metadata schema presentation XSLTs, handles the creation of a select list/drop down menu in the editor and display of the code and description in the metadata viewer.</p>
<p>The iso19139 schema has additional codelists that are managed external to the XSDs in catalog/vocabulary files such as <a href="http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml">http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml</a> These have also been added to the codelists.xml file so that they can be localized, overridden in profiles and include an extended description to provide more useful information when viewing the metadata record.</p>
<p>The iso19139 schema has additional templates in its presentation xslts to handlese codelists because they are specific to that schema. These are discussed in the section on presentation XSLTs later in this manual.</p>
<h4 id="more-on-labelsxml">More on labels.xml</h4>
<p>A localized copy of labels.xml is made available on an XPath to the presentation XSLTs eg. /root/gui/schemas/iso19139/labels for the iso19139 schema.</p>
<p>The <code>labels.xml</code> file can also be used to provide helper values in the form of a drop down/select list for free text fields. As an example:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;element name=&quot;gmd:credit&quot; id=&quot;27.0&quot;&gt;
  &lt;label&gt;Credit&lt;/label&gt;
  &lt;description&gt;Recognition of those who contributed to the resource(s)&lt;/description&gt;
  &lt;helper&gt;
    &lt;option value=&quot;University of Tasmania&quot;&gt;UTAS&lt;/option&gt;
    &lt;option value=&quot;University of Queensland&quot;&gt;UQ&lt;/option&gt;
  &lt;/helper&gt;
&lt;/element&gt;
</code></pre></div>
<p>This would result in the Editor (through the XSLT metadata.xsl) displaying the credit field with these helper options listed beside it in a drop down/select menu something like the following:</p>
<p><img alt="" src="Editor-Helpers.png" /></p>
<h4 id="more-on-stringsxml">More on strings.xml</h4>
<p>A localized copy of <code>strings.xml</code> is made available on an XPath to the presentation XSLTs eg. /root/gui/schemas/iso19139/strings for the iso19139 schema.</p>
<p>After adding the localized strings, our new GeoNetwork plugin schema for MCP contains:</p>
<div class="language-text highlight"><pre><span></span><code>extract-date-modified.xsl  extract-gml.xsd  extract-uuid.xsl 
loc  present  schema-conversions.xml  schema-ident.xml  schema.xsd  
schema
</code></pre></div>
<h3 id="creating-the-presentations-xslts-in-the-present-directory">Creating the presentations XSLTs in the present directory</h3>
<p>Each metadata schema should contain XSLTs that display and possibly edit metadata records that belong to the schema. These XSLTs are held in the <code>present</code> directory.</p>
<p>To be be used in the XSLT include/import hierarchy these XSLTs must follow a naming convention: metadata-<schema-name>.xsl. So for example, the presentation xslt for the iso19139 schema is <code>metadata-iso19139.xsl</code>. For the MCP, since our schema name is iso19139.mcp, the presentation XSLT would be called <code>metadata-iso19193.mcp.xsl</code>.</p>
<p>Any XSLTs included by the presentation XSLT should also be in the present directory (this is a convention for clarity - it is not mandatory as include/import URLs can be mapped in the oasis-catalog.xml for the schema to other locations).</p>
<p>There are certain XSLT templates that the presentation XSLT must have:</p>
<ul>
<li>
<p>the <strong>main</strong> template, which must be called: metadata-<schema-name>. For the MCP profile of iso19139 the main template would look like the following (taken from metadata-iso19139.mcp.xsl):</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">&lt;xsl:template</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;metadata-iso19139.mcp&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;false()&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;embedded&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">  </span><span class="nt">&lt;xsl:apply-templates</span><span class="w"> </span><span class="na">mode=</span><span class="s">&quot;iso19139&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;.&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;$schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="w">   </span><span class="na">select=</span><span class="s">&quot;$edit&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;embedded&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;$embedded&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">  </span><span class="nt">&lt;/xsl:apply-templates&gt;</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="nt">&lt;/xsl:template&gt;</span>
</span></code></pre></div>
</li>
</ul>
<p>Analyzing this template:</p>
<ol>
<li>The name="metadata-iso19139.mcp" is used by the main element processing template in metadata.xsl: elementEP. The main metadata services, show and edit, end up calling metadata-show.xsl and metadata-edit.xsl respectively with the metadata record passed from the Java service. Both these XSLTs, process the metadata record by applying the elementEP template from metadata.xsl to the root element. The elementEP template calls this main schema template using the schema name iso19139.mcp.</li>
<li>
<p>The job of this main template is set to process all the elements of the metadata record using templates declared with a mode name that matches the schema name or the name of the base schema (in this case iso19139). This modal processing is to ensure that only templates intended to process metadata elements from this schema or the base schema are applied. The reason for this is that almost all profiles change or add a small number of elements to those in the base schema. So most of the metadata elements in a profile can be processed in the mode of the base schema. We'll see later in this section how to override processing of an element in the base schema.</p>
</li>
<li>
<p>a <strong>completeTab</strong> template, which must be called: <schema-name>CompleteTab. This template will display all tabs, apart from the 'default' (or simple mode) and the 'XML View' tabs, in the left hand frame of the editor/viewer screen. Here is an example for the MCP:</p>
<p>``` xml
<xsl:template name="iso19139.mcpCompleteTab">
  <xsl:param name="tabLink"/></p>
<p><xsl:call-template name="displayTab"> <!-- non existent tab - by profile -->
    <xsl:with-param name="tab"     select="''"/>
    <xsl:with-param name="text"    select="/root/gui/strings/byGroup"/>
    <xsl:with-param name="tabLink" select="''"/>
  </xsl:call-template></p>
<p><xsl:call-template name="displayTab">
    <xsl:with-param name="tab"     select="'mcpMinimum'"/>
    <xsl:with-param name="text"    select="/root/gui/strings/iso19139.mcp/mcpMinimum"/>
    <xsl:with-param name="indent"  select="'&#xA0;&#xA0;&#xA0;'"/>
    <xsl:with-param name="tabLink" select="$tabLink"/>
  </xsl:call-template></p>
<p><xsl:call-template name="displayTab">
    <xsl:with-param name="tab"     select="'mcpCore'"/>
    <xsl:with-param name="text"    select="/root/gui/strings/iso19139.mcp/mcpCore"/>
    <xsl:with-param name="indent"  select="'&#xA0;&#xA0;&#xA0;'"/>
    <xsl:with-param name="tabLink" select="$tabLink"/>
  </xsl:call-template></p>
<p><xsl:call-template name="displayTab">
    <xsl:with-param name="tab"     select="'complete'"/>
    <xsl:with-param name="text"    select="/root/gui/strings/iso19139.mcp/mcpAll"/>
    <xsl:with-param name="indent"  select="'&#xA0;&#xA0;&#xA0;'"/>
    <xsl:with-param name="tabLink" select="$tabLink"/>
  </xsl:call-template></p>
<p>...... (same as for iso19139CompleteTab in 
 GEONETWORK_DATA_DIR/schema_plugins/iso19139/present/
 metadata-iso19139.xsl) ......</p>
<p></xsl:template>
````</p>
</li>
</ol>
<p>This template is called by the template named "tab" (which also adds the "default" and "XML View" tabs) in <code>INSTALL_DIR/web/geonetwork/xsl/metadata-tab-utils.xsl</code> using the schema name. That XSLT also has the code for the "displayTab" template.</p>
<p>'mcpMinimum', 'mcpCore', 'complete' etc are the names of the tabs. The name of the current or active tab is stored in the global variable "currTab" available to all presentation XSLTs. Logic to decide what to display when a particular tab is active should be contained in the root element processing tab.</p>
<ul>
<li>
<p>a <strong>root element</strong> processing tab. This tab should match on the root element of the metadata record. For example, for the iso19139 schema:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">&lt;xsl:template</span><span class="w"> </span><span class="na">mode=</span><span class="s">&quot;iso19139&quot;</span><span class="w"> </span><span class="na">match=</span><span class="s">&quot;gmd:MD_Metadata&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;embedded&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="nt">&lt;xsl:choose&gt;</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">  </span><span class="cm">&lt;!-- metadata tab --&gt;</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">  </span><span class="nt">&lt;xsl:when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;$currTab=&#39;metadata&#39;&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="nt">&lt;xsl:call-template</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;iso19139Metadata&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">      </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;$schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">      </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="w">   </span><span class="na">select=</span><span class="s">&quot;$edit&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="nt">&lt;/xsl:call-template&gt;</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">  </span><span class="nt">&lt;/xsl:when&gt;</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">  </span><span class="cm">&lt;!-- identification tab --&gt;</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">  </span><span class="nt">&lt;xsl:when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;$currTab=&#39;identification&#39;&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="nt">&lt;xsl:apply-templates</span><span class="w"> </span><span class="na">mode=</span><span class="s">&quot;elementEP&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;gmd:identificationInfo|geonet:child[string(@name)=&#39;identificationInfo&#39;]&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">      </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;$schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">      </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="w">   </span><span class="na">select=</span><span class="s">&quot;$edit&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">    </span><span class="nt">&lt;/xsl:apply-templates&gt;</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">  </span><span class="nt">&lt;/xsl:when&gt;</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">  </span>.........
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="nt">&lt;/xsl:template&gt;</span>
</span></code></pre></div>
</li>
</ul>
<p>This template is basically a very long "choose" statement with "when" clauses that test the value of the currently defined tab (in global variable currTab). Each "when" clause will display the set of metadata elements that correspond to the tab definition using "elementEP" directly (as in the "when" clause for the 'identification' tab above) or via a named template (as in the 'metadata' tab above). For the MCP our template is similar to the one above for iso19139, except that the match would be on "mcp:MD_Metadata" (and the processing mode may differ - see the section 'An alternative XSLT design for profiles' below for more details).</p>
<ul>
<li>
<p>a <strong>brief</strong> template, which must be called: <schema-name>Brief. This template processes the metadata record and extracts from it a format neutral summary of the metadata for purposes such as displaying the search results. Here is an example for the eml-gbif schema (because it is fairly short!):</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">&lt;xsl:template</span><span class="w"> </span><span class="na">match=</span><span class="s">&quot;eml-gbifBrief&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w"> </span><span class="nt">&lt;xsl:for-each</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;/metadata/*[1]&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="nt">&lt;metadata&gt;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="nt">&lt;title&gt;&lt;xsl:value-of</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;normalize-space(dataset/title[1])&quot;</span><span class="nt">/&gt;&lt;/title&gt;</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="nt">&lt;abstract&gt;&lt;xsl:value-of</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;dataset/abstract&quot;</span><span class="nt">/&gt;&lt;/abstract&gt;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="nt">&lt;xsl:for-each</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;dataset/keywordSet/keyword&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">      </span><span class="nt">&lt;xsl:copy-of</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;.&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="nt">&lt;/xsl:for-each&gt;</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="nt">&lt;geoBox&gt;</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">        </span><span class="nt">&lt;westBL&gt;&lt;xsl:value-of</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;dataset/coverage/geographicCoverage/boundingCoordinates/westBoundingCoordinate&quot;</span><span class="nt">/&gt;&lt;/westBL&gt;</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">        </span><span class="nt">&lt;eastBL&gt;&lt;xsl:value-of</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;dataset/coverage/geographicCoverage/boundingCoordinates/eastBoundingCoordinate&quot;</span><span class="nt">/&gt;&lt;/eastBL&gt;</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">        </span><span class="nt">&lt;southBL&gt;&lt;xsl:value-of</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;dataset/coverage/geographicCoverage/boundingCoordinates/southBoundingCoordinate&quot;</span><span class="nt">/&gt;&lt;/southBL&gt;</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">        </span><span class="nt">&lt;northBL&gt;&lt;xsl:value-of</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;dataset/coverage/geographicCoverage/boundingCoordinates/northBoundingCoordinate&quot;</span><span class="nt">/&gt;&lt;/northBL&gt;</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">    </span><span class="nt">&lt;/geoBox&gt;</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">    </span><span class="nt">&lt;xsl:copy-of</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;geonet:info&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">  </span><span class="nt">&lt;/metadata&gt;</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w"> </span><span class="nt">&lt;/xsl:for-each&gt;</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="nt">&lt;/xsl:template&gt;</span>
</span></code></pre></div>
</li>
</ul>
<p>Analyzing this template:</p>
<ol>
<li>The template matches on an element eml-gbifBrief, created by the mode="brief" template in metadata-utils.xsl. The metadata record will be the first child in the /metadata XPath.</li>
<li>Then process metadata elements to produce a flat XML structure that is used by search-results-xhtml.xsl to display a summary of the metadata record found by a search.</li>
</ol>
<p>Once again, for profiles of an existing schema, it makes sense to use a slighlty different approach so that the profile need not duplicate templates. Here is an example from metadata-iso19139.mcp.xsl:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;xsl:template match=&quot;iso19139.mcpBrief&quot;&gt;
  &lt;metadata&gt;
    &lt;xsl:for-each select=&quot;/metadata/*[1]&quot;&gt;
      &lt;!-- call iso19139 brief --&gt;
      &lt;xsl:call-template name=&quot;iso19139-brief&quot;/&gt;
      &lt;!-- now brief elements for mcp specific elements --&gt;
      &lt;xsl:call-template name=&quot;iso19139.mcp-brief&quot;/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/metadata&gt;
&lt;/xsl:template&gt;
</code></pre></div>
<p>This template splits the processing between the base iso19139 schema and a brief template that handles elements specific to the profile. This assumes that:</p>
<ol>
<li>The base schema has separated the <metadata> element from the remainder of its brief processing so that it can be called by profiles</li>
<li>
<p>The profile includes links to equivalent elements that can be used by the base schema to process common elements eg. for ISO19139, elements in the profile have gco:isoType attributes that give the name of the base element and can be used in XPath matches such as "gmd:MD_DataIdentification|*[@gco:isoType='gmd:MD_DataIdentification']".</p>
</li>
<li>
<p>templates that match on elements specific to the schema. Here is an example from the eml-gbif schema:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="cm">&lt;!-- keywords are processed to add thesaurus name in brackets afterwards </span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="cm">     in view mode --&gt;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="nt">&lt;xsl:template</span><span class="w"> </span><span class="na">mode=</span><span class="s">&quot;eml-gbif&quot;</span><span class="w"> </span><span class="na">match=</span><span class="s">&quot;keywordSet&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">  </span><span class="nt">&lt;xsl:choose&gt;</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="nt">&lt;xsl:when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;$edit=false()&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">      </span><span class="nt">&lt;xsl:variable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;keyword&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">        </span><span class="nt">&lt;xsl:for-each</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;keyword&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">          </span><span class="nt">&lt;xsl:if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;position() &amp;gt; 1&quot;</span><span class="nt">&gt;</span>,<span class="w">  </span><span class="nt">&lt;/xsl:if&gt;</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">          </span><span class="nt">&lt;xsl:value-of</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;.&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">        </span><span class="nt">&lt;/xsl:for-each&gt;</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">        </span><span class="nt">&lt;xsl:if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;keywordThesaurus&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">          </span><span class="nt">&lt;xsl:text&gt;</span><span class="w"> </span>(<span class="nt">&lt;/xsl:text&gt;</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">          </span><span class="nt">&lt;xsl:value-of</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;keywordThesaurus&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">          </span><span class="nt">&lt;xsl:text&gt;</span>)<span class="nt">&lt;/xsl:text&gt;</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">        </span><span class="nt">&lt;/xsl:if&gt;</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="w">      </span><span class="nt">&lt;/xsl:variable&gt;</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="w">      </span><span class="nt">&lt;xsl:apply-templates</span><span class="w"> </span><span class="na">mode=</span><span class="s">&quot;simpleElement&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;.&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">        </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;$schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">        </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="w">   </span><span class="na">select=</span><span class="s">&quot;$edit&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="w">        </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;text&quot;</span><span class="w">    </span><span class="na">select=</span><span class="s">&quot;$keyword&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="w">      </span><span class="nt">&lt;/xsl:apply-templates&gt;</span>
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="w">    </span><span class="nt">&lt;/xsl:when&gt;</span>
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a><span class="w">    </span><span class="nt">&lt;xsl:otherwise&gt;</span>
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="w">      </span><span class="nt">&lt;xsl:apply-templates</span><span class="w"> </span><span class="na">mode=</span><span class="s">&quot;complexElement&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;.&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="w">        </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;$schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="w">        </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="w">   </span><span class="na">select=</span><span class="s">&quot;$edit&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a><span class="w">      </span><span class="nt">&lt;/xsl:apply-templates&gt;</span>
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a><span class="w">    </span><span class="nt">&lt;/xsl:otherwise&gt;</span>
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="w">  </span><span class="nt">&lt;/xsl:choose&gt;</span>
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="nt">&lt;/xsl:template&gt;</span>
</span></code></pre></div>
</li>
</ol>
<p>Analyzing this template:</p>
<ol>
<li>In view mode the individual keywords from the set are concatenated into a comma separated string with the name of the thesaurus in brackets at the end.</li>
<li>In edit mode, the keywordSet is handled as a complex element ie. the user can add individual keyword elements with content and a single thesaurus name.</li>
<li>This is an example of the type of processing that can be done on an element in a metadata record.</li>
</ol>
<p>For profiles, templates for elements can be defined in the same way except that the template will process in the mode of the base schema. Here is an example showing the first few lines of a template for processing the mcp:revisionDate element:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;xsl:template mode=&quot;iso19139&quot; match=&quot;mcp:revisionDate&quot;&gt;
   &lt;xsl:param name=&quot;schema&quot;/&gt;
   &lt;xsl:param name=&quot;edit&quot;/&gt;

   &lt;xsl:choose&gt;
     &lt;xsl:when test=&quot;$edit=true()&quot;&gt;
       &lt;xsl:apply-templates mode=&quot;simpleElement&quot; select=&quot;.&quot;&gt;
         &lt;xsl:with-param name=&quot;schema&quot;  select=&quot;$schema&quot;/&gt;
         &lt;xsl:with-param name=&quot;edit&quot;   select=&quot;$edit&quot;/&gt;

   ......
</code></pre></div>
<p>If a template for a profile is intended to override a template in the base schema, then the template can be defined in the presentation XSLT for the profile with a priority attribute set to a high number and an XPath condition that ensures the template is processed for the profile only. For example in the MCP, we can override the handling of gmd:EX_GeographicBoundingBox in metadata-iso19139.xsl by defining a template in metadata-iso19139.mcp.xsl as follows:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;xsl:template mode=&quot;iso19139&quot; match=&quot;gmd:EX_GeographicBoundingBox[starts-with(//geonet:info/schema,&#39;iso19139.mcp&#39;)]&quot; priority=&quot;3&quot;&gt;

......
</code></pre></div>
<p>Finally, a profile may also extend some of the existing codelists in the base schema. These extended codelists should be held in a localized codelists.xml. As an example, in iso19139 these codelists are often attached to elements like the following:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;gmd:role&gt;
  &lt;gmd:CI_RoleCode codeList=&quot;http://www.isotc211.org/2005/resources/Codelist/gmxCodelists.xml#CI_RoleCode&quot; codeListValue=&quot;custodian&quot;&gt;custodian&lt;/gmd:CI_RoleCode&gt;
&lt;/gmd:role&gt;
</code></pre></div>
<p>Templates for handling these elements are in the iso19139 presentation XSLT <code>GEONETWORK_DATA_DIR/schema_plugins/iso19139/present/metadata-iso19139.xsl</code>. These templates use the name of the element (eg. gmd:CI_RoleCode) and the codelist XPath (eg. /root/gui/schemas/iso19139/codelists) to build select list/drop down menus when editing and to display a full description when viewing. See templates near the template named 'iso19139Codelist'. These templates can handle the extended codelists for any profile because they:</p>
<ul>
<li>match on any element that has a child element with attribute codeList</li>
<li>use the schema name in the codelists XPath</li>
<li>fall back to the base iso19139 schema if the profile codelist doesn't have the required codelist</li>
</ul>
<p>However, if you don't need localized codelists, it is often easier and more direct to extract codelists directly from the <code>gmxCodelists.xml</code> file. This is in fact the solution that has been adopted for the MCP. The <code>gmxCodelists.xml</code> file is included in the presentation xslt for the MCP using a statement like:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;xsl:variable name=&quot;codelistsmcp&quot; 
              select=&quot;document(&#39;../schema/resources/Codelist/gmxCodelists.xml&#39;)&quot;/&gt;
</code></pre></div>
<p>Check the codelist handling templates in <code>metadata-iso19139.mcp.xsl</code> to see how this works.</p>
<h4 id="an-alternative-xslt-design-for-profiles">An alternative XSLT design for profiles</h4>
<p>In all powerful languages there will be more than one way to achieve a particular goal. This alternative XSLT design is for processing profiles. The idea behind the alternative is based on the following observations about the GeoNetwork XSLTs:</p>
<ol>
<li>All elements are initially processed by apply-templates in mode "elementEP".</li>
<li>The template "elementEP" (see <code>INSTALL_DIR/web/geonetwork/xsl/metadata.xsl</code>) eventually calls the <strong>main</strong> template of the schema/profile.</li>
<li>The main template can initially process the element in a mode particular to the profile and if this is not successful (ie. no template matches and thus no HTML elements are returned), process the element in the mode of the base schema.</li>
</ol>
<p>The advantage of this design is that overriding a template for an element in the base schema does not need the priority attribute or an XPath condition check on the schema name.</p>
<p>Here is an example for the MCP (iso19139.mcp) with base schema iso19139:</p>
<ul>
<li>
<p>the <strong>main</strong> template, which must be called: metadata-iso19139.mcp.xsl:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="cm">&lt;!-- main template - the way into processing iso19139.mcp --&gt;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nt">&lt;xsl:template</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;metadata-iso19139.mcp&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;false()&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;embedded&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="cm">&lt;!-- process in profile mode first --&gt;</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="nt">&lt;xsl:variable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;mcpElements&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">      </span><span class="nt">&lt;xsl:apply-templates</span><span class="w"> </span><span class="na">mode=</span><span class="s">&quot;iso19139.mcp&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;.&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">        </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;$schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">        </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="w">   </span><span class="na">select=</span><span class="s">&quot;$edit&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">        </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;embedded&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;$embedded&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">      </span><span class="nt">&lt;/xsl:apply-templates&gt;</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">    </span><span class="nt">&lt;/xsl:variable&gt;</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">    </span><span class="nt">&lt;xsl:choose&gt;</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">      </span><span class="cm">&lt;!-- if we got a match in profile mode then show it --&gt;</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">      </span><span class="nt">&lt;xsl:when</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;count($mcpElements/*)&gt;0&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">        </span><span class="nt">&lt;xsl:copy-of</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;$mcpElements&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">      </span><span class="nt">&lt;/xsl:when&gt;</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">      </span><span class="cm">&lt;!-- otherwise process in base iso19139 mode --&gt;</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">      </span><span class="nt">&lt;xsl:otherwise&gt;</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">        </span><span class="nt">&lt;xsl:apply-templates</span><span class="w"> </span><span class="na">mode=</span><span class="s">&quot;iso19139&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;.&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">          </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;$schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="w">          </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="w">   </span><span class="na">select=</span><span class="s">&quot;$edit&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">          </span><span class="nt">&lt;xsl:with-param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;embedded&quot;</span><span class="w"> </span><span class="na">select=</span><span class="s">&quot;$embedded&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="w">        </span><span class="nt">&lt;/xsl:apply-templates&gt;</span>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="w">      </span><span class="nt">&lt;/xsl:otherwise&gt;</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="w">    </span><span class="nt">&lt;/xsl:choose&gt;</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="nt">&lt;/xsl:template&gt;</span>
</span></code></pre></div>
</li>
</ul>
<p>Analyzing this template:</p>
<ol>
<li>The name="metadata-iso19139.mcp" is used by the main element processing template in metadata.xsl: elementEP. The main metadata services, show and edit, end up calling metadata-show.xsl and metadata-edit.xsl respectively with the metadata record passed from the Java service. Both these XSLTs, process the metadata record by applying the elementEP template from metadata.xsl to the root element. elementEP calls the appropriate main schema template using the schema name.</li>
<li>
<p>The job of this main template is set to process all the elements of the metadata profile. The processing takes place in one of two modes. Firstly, the element is processed in the profile mode (iso19139.mcp). If a match is found then HTML elements will be returned and copied to the output document. If no HTML elements are returned then the element is processed in the base schema mode, iso19139.</p>
</li>
<li>
<p>templates that match on elements specific to the profile have mode iso19139.mcp:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">&lt;xsl:template</span><span class="w"> </span><span class="na">mode=</span><span class="s">&quot;iso19139.mcp&quot;</span><span class="w"> </span><span class="na">match=</span><span class="s">&quot;mcp:taxonomicElement&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">  </span>.....
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="nt">&lt;/xsl:template&gt;</span><span class="w"> </span>
</span></code></pre></div>
</li>
<li>
<p>templates that override elements in the base schema are processed in the profile mode iso19139.mcp</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">&lt;xsl:template</span><span class="w"> </span><span class="na">mode=</span><span class="s">&quot;iso19139.mcp&quot;</span><span class="w"> </span><span class="na">match=</span><span class="s">&quot;gmd:keyword&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;schema&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span><span class="nt">&lt;xsl:param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;edit&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">  </span>.....
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="nt">&lt;/xsl:template&gt;</span><span class="w"> </span>
</span></code></pre></div>
</li>
</ol>
<p>Notice that the template header of the profile has a simpler design than that used for the original design? Neither the priority attribute or the schema XPath condition is required because we are using a different mode to the base schema.</p>
<ul>
<li>
<p>To support processing in two modes we need to add a null template to the profile mode iso19139.mcp as follows:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">&lt;xsl:template</span><span class="w"> </span><span class="na">mode=</span><span class="s">&quot;iso19139.mcp&quot;</span><span class="w"> </span><span class="na">match=</span><span class="s">&quot;*|@*&quot;</span><span class="nt">/&gt;</span><span class="w"> </span>
</span></code></pre></div>
</li>
</ul>
<p>This template will match all elements that we don't have a specific template for in the profile mode iso19139.mcp. These elements will be processed in the base schema mode iso19139 instead because the null template returns nothing (see the main template discussion above).</p>
<p>The remainder of the discussion in the original design relating to tabs etc applies to the alternative design and is not repeated here.</p>
<h4 id="csw-presentation-xslts">CSW Presentation XSLTs</h4>
<p>The CSW server can be asked to provide records in a number of output schemas. The two supported by GeoNetwork are:</p>
<ul>
<li><strong>ogc</strong> - <a href="http://www.opengis.net/cat/csw/2.0.2">http://www.opengis.net/cat/csw/2.0.2</a> - a dublin core derivative</li>
<li><strong>iso</strong> - <a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a> - ISO19115/19139</li>
</ul>
<p>From each of these output schemas, a <strong>brief</strong>, <strong>summary</strong> or <strong>full</strong> element set can be requested.</p>
<p>These output schemas and element sets are implemented in GeoNetwork as XSLTs and they are stored in the 'csw' subdirectory of the 'present' directory. The ogc output schema XSLTs are implemented as ogc-brief.xsl, ogc-summary and ogc-full.xsl. The iso output schema XSLTs are implemented as iso-brief.xsl, iso-summary.xsl and iso-full.xsl.</p>
<p>To create these XSLTs for the MCP, the best option is to copy and modify the csw presentation XSLTs from the base schema iso19139.</p>
<p>After creating the presentation XSLTs, our new GeoNetwork plugin schema for MCP contains:</p>
<div class="language-text highlight"><pre><span></span><code>extract-date-modified.xsl  extract-gml.xsd  extract-uuid.xsl  
loc  present  schema-conversions.xml  schema-ident.xml  schema.xsd  
schema
</code></pre></div>
<h3 id="creating-the-index-fieldsxsl-to-index-content-from-the-metadata-record">Creating the index-fields.xsl to index content from the metadata record</h3>
<p>This XSLT indexes the content of elements in the metadata record. The essence of this XSLT is to select elements from the metadata record and map them to lucene index field names. The lucene index field names used in GeoNetwork are as follows:</p>
<table>
<thead>
<tr>
<th>Lucene Index Field Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>abstract</td>
<td>Metadata abstract</td>
</tr>
<tr>
<td>any</td>
<td>Content from all metadata elements (for free text)</td>
</tr>
<tr>
<td>changeDate</td>
<td>Date that the metadata record was modified</td>
</tr>
<tr>
<td>createDate</td>
<td>Date that the metadata record was created</td>
</tr>
<tr>
<td>denominator</td>
<td>Scale denominator in data resolution</td>
</tr>
<tr>
<td>download</td>
<td>Does the metadata record have a downloadable resource attached? (0 or 1)</td>
</tr>
<tr>
<td>digital</td>
<td>Is the metadata record distributed/available in a digital format? (0 or 1)</td>
</tr>
<tr>
<td>eastBL</td>
<td>East bounding box longitude</td>
</tr>
<tr>
<td>keyword</td>
<td>Metadata keywords</td>
</tr>
<tr>
<td>metadataStandardName</td>
<td>Metadata standard name</td>
</tr>
<tr>
<td>northBL</td>
<td>North bounding box latitude</td>
</tr>
<tr>
<td>operatesOn</td>
<td>Uuid of metadata record describing dataset that is operated on by a service</td>
</tr>
<tr>
<td>orgName</td>
<td>Name of organisation listed in point-of-contact information</td>
</tr>
<tr>
<td>parentUuid</td>
<td>Uuid of parent metadata record</td>
</tr>
<tr>
<td>paper</td>
<td>Is the metadata record distributed/available in a paper format? (0 or 1)</td>
</tr>
<tr>
<td>protocol</td>
<td>On line resource access protocol</td>
</tr>
<tr>
<td>publicationDate</td>
<td>Date resource was published</td>
</tr>
<tr>
<td>southBL</td>
<td>South bounding box latitude</td>
</tr>
<tr>
<td>spatialRepresentationType</td>
<td>vector, raster, etc</td>
</tr>
<tr>
<td>tempExtentBegin</td>
<td>Beginning of temporal extent range</td>
</tr>
<tr>
<td>tempExtentEnd</td>
<td>End of temporal extent range</td>
</tr>
<tr>
<td>title</td>
<td>Metadata title</td>
</tr>
<tr>
<td>topicCat</td>
<td>Metadata topic category</td>
</tr>
<tr>
<td>type</td>
<td>Metadata hierarchy level (should be dataset if unknown)</td>
</tr>
<tr>
<td>westBL</td>
<td>West bounding box longitude</td>
</tr>
</tbody>
</table>
<p>For example, here is the mapping created between the metadata element mcp:revisionDate and the lucene index field changeDate:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;xsl:for-each select=&quot;mcp:revisionDate/*&quot;&gt;
  &lt;Field name=&quot;changeDate&quot; string=&quot;{string(.)}&quot; store=&quot;true&quot; index=&quot;true&quot;/&gt;
&lt;/xsl:for-each&gt;
</code></pre></div>
<p>Notice that we are creating a new XML document. The Field elements in this document are read by GeoNetwork to create a Lucene document object for indexing (see the SearchManager class in the GeoNetwork source).</p>
<p>Once again, because the MCP is a profile of ISO19115/19139, it is probably best to modify <code>index-fields.xsl</code> from the schema iso19139 to handle the namespaces and additional elements of the MCP.</p>
<p>At this stage, our new GeoNetwork plugin schema for MCP contains:</p>
<div class="language-text highlight"><pre><span></span><code>extract-date-modified.xsl  extract-gml.xsd  extract-uuid.xsl  
index-fields.xsl  loc  present  schema-conversions.xml  schema-ident.xml  
schema.xsd  schema
</code></pre></div>
<h3 id="creating-the-sample-data-directory">Creating the sample-data directory</h3>
<p>This is a simple directory. Put MEF files with sample metadata in this directory. Make sure they have a <code>.mef</code> suffix.</p>
<p>A MEF file is a zip archive with the metadata, thumbnails, file based online resources and an info file describing the contents. The contents of a MEF file are discussed in more detail in the next section of this manual.</p>
<p>Sample data in this directory can be added to the catalog using the Administration menu.</p>
<p>At this stage, our new GeoNetwork plugin schema for MCP contains:</p>
<div class="language-text highlight"><pre><span></span><code>extract-date-modified.xsl  extract-gml.xsd  extract-uuid.xsl  
index-fields.xsl  loc  present  sample-data schema-ident.xml  schema.xsd  
schema
</code></pre></div>
<h3 id="creating-schematrons-to-describe-mcp-conditions">Creating schematrons to describe MCP conditions</h3>
<p>Schematrons are rules that are used to check conditions and content in the metadata record as part of the two stage validation process used by GeoNetwork.</p>
<p>Schematron rules are created in the schematrons directory that you checked out earlier - see <a href="./#preparation">Preparation</a> above.</p>
<p>An example rule is:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;!-- anzlic/trunk/gml/3.2.0/gmd/spatialRepresentation.xsd--&gt;
&lt;!-- TEST 12 --&gt;
&lt;sch:pattern&gt;
  &lt;sch:title&gt;$loc/strings/M30&lt;/sch:title&gt;
  &lt;sch:rule context=&quot;//gmd:MD_Georectified&quot;&gt;
    &lt;sch:let name=&quot;cpd&quot; value=&quot;(gmd:checkPointAvailability/gco:Boolean=&#39;1&#39; or gmd:checkPointAvailability/gco:Boolean=&#39;true&#39;) and 
      (not(gmd:checkPointDescription) or count(gmd:checkPointDescription[@gco:nilReason=&#39;missing&#39;])&gt;0)&quot;/&gt;
    &lt;sch:assert
      test=&quot;$cpd = false()&quot;
      &gt;$loc/strings/alert.M30&lt;/sch:assert&gt;
    &lt;sch:report
      test=&quot;$cpd = false()&quot;
      &gt;$loc/strings/report.M30&lt;/sch:report&gt;
  &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;
</code></pre></div>
<p>As for most of GeoNetwork, the output of this rule can be localized to different languages. The corresponding localized strings are:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;strings&gt;

  .....

  &lt;M30&gt;[ISOFTDS19139:2005-TableA1-Row15] - Check point description required if available&lt;/M30&gt;

  .....

  &lt;alert.M30&gt;&lt;div&gt;&#39;checkPointDescription&#39; is mandatory if &#39;checkPointAvailability&#39; = 1 or true.&lt;/div&gt;&lt;/alert.M30&gt;

  .....

  &lt;report.M30&gt;Check point description documented.&lt;/report.M30&gt;

  .....

&lt;/strings&gt;
</code></pre></div>
<p>Procedure for adding schematron rules, working within the schematrons directory:</p>
<ol>
<li>Place your schematron rules in 'rules'. Naming convetion is 'schematron-rules-<suffix>.sch' eg. <code>schematron-rules-iso-mcp.sch</code>. Place localized strings for the rule assertions into 'rules/loc/<language_prefix>'.</li>
<li>Edit <code>build.xml</code>.</li>
<li>Add a "clean-schema-dir" target for your plugin schema directory. This target will remove the schematron rules from plugin schema directory (basically removes all files with pattern schematron-rules-*.xsl).</li>
<li>Add a "compile-schematron" target for your rules - value attribute is the suffix used in the rules name. eg. for <code>schematron-rules-iso-mcp.sch</code> the value attribute should be "iso-mcp". This target will turn the .sch schematron rules into an XSLT using the saxon XSLT engine and 'resources/iso_svrl_for_xslt2.xsl'.</li>
<li>Add a "publish-schematron" target. This target copies the compiled rules (in XSLT form) into the plugin schema directory.</li>
<li>Run 'ant' to create the schematron XSLTs.</li>
</ol>
<p>At this stage, our new GeoNetwork plugin schema for MCP contains:</p>
<div class="language-text highlight"><pre><span></span><code>extract-date-modified.xsl  extract-gml.xsd  extract-uuid.xsl  
index-fields.xsl  loc  present  sample-data  schema-conversions.xml  
schema-ident.xml  schema.xsd  schema  schematron-rules-iso-mcp.xsl
</code></pre></div>
<h3 id="adding-the-components-necessary-to-create-and-edit-mcp-metadata">Adding the components necessary to create and edit MCP metadata</h3>
<p>So far we have added all the components necessary for GeoNetwork to identify, view and validate MCP metadata records. Now we will add the remaining components necessary to create and edit MCP metadata records.</p>
<p>We'll start with the XSLTs that set the content of various elements in the MCP metadata records.</p>
<h4 id="creating-set-uuidxsl">Creating set-uuid.xsl</h4>
<ul>
<li><strong>set-uuid.xsl</strong> - this XSLT takes as a parameter the UUID of the metadata record and writes it into the appropriate element of the metadata record. For the MCP this element is the same as the base ISO schema (called iso19139 in GeoNetwork), namely gmd:fileIdentifier. However, because the MCP uses a different namespace on the root element, this XSLT needs to be modified.</li>
</ul>
<h4 id="creating-the-extract-set-and-unset-thumbnail-xslts">Creating the extract, set and unset thumbnail XSLTs</h4>
<p>If your metadata record can have a thumbnail or browse graphic link, then you will want to add XSLTs that extract, set and unset this information so that you can use the GeoNetwork thumbnail editing interface.</p>
<p>The three XSLTs that support this interface are:</p>
<ul>
<li>
<p><strong>extract-thumbnails.xsl</strong> - this XSLT extracts the thumbnails/browse graphics from the metadata record, turning it into generic XML that is the same for all metadata schemas. The elements need to have content that GeoNetwork understands. The following is an example of what the thumbnail interface for iso19139 expects (we'll duplicate this requirement for MCP):</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">&lt;gmd:graphicOverview&gt;</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span><span class="nt">&lt;gmd:MD_BrowseGraphic&gt;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="nt">&lt;gmd:fileName&gt;</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">      </span><span class="nt">&lt;gco:CharacterString&gt;</span>bluenet_s.png<span class="nt">&lt;/gco:CharacterString&gt;</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="nt">&lt;/gmd:fileName&gt;</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="nt">&lt;gmd:fileDescription&gt;</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">      </span><span class="nt">&lt;gco:CharacterString&gt;</span>thumbnail<span class="nt">&lt;/gco:CharacterString&gt;</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span><span class="nt">&lt;/gmd:fileDescription&gt;</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span><span class="nt">&lt;gmd:fileType&gt;</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">      </span><span class="nt">&lt;gco:CharacterString&gt;</span>png<span class="nt">&lt;/gco:CharacterString&gt;</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">    </span><span class="nt">&lt;/gmd:fileType&gt;</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">  </span><span class="nt">&lt;/gmd:MD_BrowseGraphic&gt;</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="nt">&lt;/gmd:graphicOverview&gt;</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="nt">&lt;gmd:graphicOverview&gt;</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">  </span><span class="nt">&lt;gmd:MD_BrowseGraphic&gt;</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">    </span><span class="nt">&lt;gmd:fileName&gt;</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="w">      </span><span class="nt">&lt;gco:CharacterString&gt;</span>bluenet.png<span class="nt">&lt;/gco:CharacterString&gt;</span>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">    </span><span class="nt">&lt;/gmd:fileName&gt;</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">    </span><span class="nt">&lt;gmd:fileDescription&gt;</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">      </span><span class="nt">&lt;gco:CharacterString&gt;</span>large_thumbnail<span class="nt">&lt;/gco:CharacterString&gt;</span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="w">    </span><span class="nt">&lt;/gmd:fileDescription&gt;</span>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="w">    </span><span class="nt">&lt;gmd:fileType&gt;</span>
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">      </span><span class="nt">&lt;gco:CharacterString&gt;</span>png<span class="nt">&lt;/gco:CharacterString&gt;</span>
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="w">    </span><span class="nt">&lt;/gmd:fileType&gt;</span>
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">  </span><span class="nt">&lt;/gmd:MD_BrowseGraphic&gt;</span>
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="nt">&lt;/gmd:graphicOverview&gt;</span><span class="w"> </span>
</span></code></pre></div>
</li>
</ul>
<p>When <code>extract-thumbnails.xsl</code> is run, it creates a small XML hierarchy from this information which looks something like the following:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;thumbnail&gt;
  &lt;large&gt;
    bluenet.png
  &lt;/large&gt;
  &lt;small&gt;
    bluenet_s.png
  &lt;/small&gt;
&lt;/thumbnail&gt;
</code></pre></div>
<ul>
<li><strong>set-thumbnail.xsl</strong> - this XSLT does the opposite of extract-thumbnails.xsl. It takes the simplified, common XML structure used by GeoNetwork to describe the large and small thumbnails and creates the elements of the metadata record that are needed to represent them. This is a slightly more complex XSLT than extract-thumbnails.xsl because the existing elements in the metadata record need to be retained and the new elements need to be created in their correct places.</li>
<li><strong>unset-thumbnail.xsl</strong> - this XSLT targets and removes elements of the metadata record that describe a particular thumbnail. The remaining elements of the metadata record are retained.</li>
</ul>
<p>Because the MCP is a profile of ISO19115/19139, the easiest path to creating these XSLTs is to copy them from the iso19139 schema and modify them for the changes in namespace required by the MCP.</p>
<h4 id="creating-the-update-xslts">Creating the update-... XSLTs</h4>
<ul>
<li><strong>update-child-from-parent-info.xsl</strong> - this XSLT is run when a child record needs to have content copied into it from a parent record. It is an XSLT that changes the content of a few elements and leaves the remaining elements untouched. The behaviour of this XSLT would depend on which elements of the parent record will be used to update elements of the child record.</li>
<li>
<p><strong>update-fixed-info.xsl</strong> - this XSLT is run after editing to fix certain elements and content in the metadata record. For the MCP there are a number of actions we would like to take to 'hard-wire' certain elements and content. To do this the XSLT the following processing logic:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>if<span class="w"> </span>the<span class="w"> </span>element<span class="w"> </span>is<span class="w"> </span>one<span class="w"> </span>that<span class="w"> </span>we<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>process<span class="w"> </span>then<span class="w"> </span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span>add<span class="w"> </span>a<span class="w"> </span>template<span class="w"> </span>with<span class="w"> </span>a<span class="w"> </span>match<span class="w"> </span>condition<span class="w"> </span>for<span class="w"> </span>that<span class="w"> </span>element<span class="w"> </span>and<span class="w"> </span>process<span class="w"> </span>it
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>else<span class="w"> </span>copy<span class="w"> </span>the<span class="w"> </span>element<span class="w"> </span>to<span class="w"> </span>output
</span></code></pre></div>
</li>
</ul>
<p>Because the MCP is a profile of ISO19115/19139, the easiest path to creating this XSLT is to copy update-fixed-info.xsl from the iso19139 schema and modify it for the changes in namespace required by the MCP and then to include the processing we want.</p>
<p>A simple example of MCP processing is to make sure that the gmd:metadataStandardName and gmd:metadataStandardVersion elements have the content needed to ensure that the record is recognized as MCP. To do this we can add two templates as follows:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;xsl:template match=&quot;gmd:metadataStandardName&quot; priority=&quot;10&quot;&gt;
  &lt;xsl:copy&gt;
    &lt;gco:CharacterString&gt;Australian Marine Community Profile of ISO 19115:2005/19139&lt;/gco:CharacterString&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match=&quot;gmd:metadataStandardVersion&quot; priority=&quot;10&quot;&gt;
  &lt;xsl:copy&gt;
    &lt;gco:CharacterString&gt;MCP:BlueNet V1.5&lt;/gco:CharacterString&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;
</code></pre></div>
<p>Processing by <code>update-fixed-info.xsl</code> can be enabled/disabled using the <em>Automatic Fixes</em> check box in the System Configuration menu. By default, it is enabled.</p>
<p>Some important tasks handled in <code>upgrade-fixed-info.xsl</code>:</p>
<ul>
<li>creating URLs for metadata with attached files (eg. onlineResources with 'File for download' in iso19139)</li>
<li>setting date stamp/revision date</li>
<li>setting codelist URLs to point to online ISO codelist catalogs</li>
<li>adding default spatial reference system attributes to spatial extents</li>
</ul>
<p>A specific task required for the MCP <code>update-fixed-info.xsl</code> was to automatically create an online resource with a URL pointing to the metadata.show service with parameter set to the metadata uuid. This required some changes to the update-fixed-info.xsl supplied with iso19139. In particular:</p>
<ul>
<li>the parent elements may not be present in the metadata record</li>
<li>processing of the online resource elements for the metadata point of truth URL should not interfere with other processing of online resource elements</li>
</ul>
<p>Rather than describe the individual steps required to implement this and the decisions required in the XSLT language, take a look at the <code>update-fixed-info.xsl</code> already present for the MCP schema in the iso19139.mcp directory and refer to the dot points above.</p>
<h4 id="creating-the-templates-directory">Creating the templates directory</h4>
<p>This is a simple directory. Put XML metadata files to be used as templates in this directory. Make sure they have a <code>.xml</code> suffix. Templates in this directory can be added to the catalog using the Administration menu.</p>
<h4 id="editor-behaviour-adding-schema-suggestionsxml-and-schema-substitutesxml">Editor behaviour: Adding schema-suggestions.xml and schema-substitutes.xml</h4>
<ul>
<li>
<p><strong>schema-suggestions.xml</strong> - The default behaviour of the GeoNetwork advanced editor when building the editor forms is to show elements that are not in the metadata record as unexpanded elements. To add these elements to the record, the user will have to click on the '+' icon next to the element name. This can be tedious especially as some metadata standards have elements nested in others (ie. complex elements). The schema-suggestions.xml file allows you to specify elements that should be automatically expanded by the editor. An example of this is the online resource information in the ISO19115/19139 standard. If the following XML was added to the <code>schema-suggestions.xml</code> file:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">&lt;field</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gmd:CI_OnlineResource&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="nt">&lt;suggest</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gmd:protocol&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="nt">&lt;suggest</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gmd:name&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">  </span><span class="nt">&lt;suggest</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gmd:description&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="nt">&lt;/field&gt;</span>
</span></code></pre></div>
</li>
</ul>
<p>The effect of this would be that when an online resource element was expanded, then input fields for the protocol (a drop down/select list), name and description would automatically appear in the editor.</p>
<p>Once again, a good place to start when building a <code>schema-suggestions.xml</code> file for the MCP is the <code>schema-suggestions.xml</code> file for the iso19139 schema.</p>
<ul>
<li>
<p><strong>schema-substitutes.xml</strong> - Recall from the earlier <a href="./#schema_and_schema_xsd">Creating the schema directory and schema.xsd file</a> section, that the method we used to extend the base ISO19115/19139 schemas is to extend the base type, define a new element with the extended base type and allow the new element to substitute for the base element. So for example, in the MCP, we want to add a new resource constraint element that holds Creative Commons and other commons type licensing information. This requires that the MD_Constraints type be extended and a new mcp:MD_Commons element be defined which can substitute for gmd:MD_Constraints. This is shown in the following snippet of XSD:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">&lt;xs:complexType</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;MD_CommonsConstraints_Type&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="nt">&lt;xs:annotation&gt;</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="nt">&lt;xs:documentation&gt;</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">      </span>Add<span class="w"> </span>MD_Commons<span class="w"> </span>as<span class="w"> </span>an<span class="w"> </span>extension<span class="w"> </span>of<span class="w"> </span>gmd:MD_Constraints_Type
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">    </span><span class="nt">&lt;/xs:documentation&gt;</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">  </span><span class="nt">&lt;/xs:annotation&gt;</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">  </span><span class="nt">&lt;xs:complexContent&gt;</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">    </span><span class="nt">&lt;xs:extension</span><span class="w"> </span><span class="na">base=</span><span class="s">&quot;gmd:MD_Constraints_Type&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">      </span><span class="nt">&lt;xs:sequence</span><span class="w"> </span><span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">        </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;jurisdictionLink&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;gmd:URL_PropertyType&quot;</span><span class="w"> </span><span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">        </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;licenseLink&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;gmd:URL_PropertyType&quot;</span><span class="w"> </span><span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">        </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;imageLink&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;gmd:URL_PropertyType&quot;</span><span class="w"> </span><span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">        </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;licenseName&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;gco:CharacterString_PropertyType&quot;</span><span class="w"> </span><span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="w">        </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;attributionConstraints&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;gco:CharacterString_PropertyType&quot;</span><span class="w"> </span><span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="w">        </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;derivativeConstraints&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;gco:CharacterString_PropertyType&quot;</span><span class="w"> </span><span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="w">        </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;commercialUseConstraints&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;gco:CharacterString_PropertyType&quot;</span><span class="w"> </span><span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="w">        </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;collectiveWorksConstraints&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;gco:CharacterString_PropertyType&quot;</span><span class="w"> </span><span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="w">        </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;otherConstraints&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;gco:CharacterString_PropertyType&quot;</span><span class="w"> </span><span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="w">      </span><span class="nt">&lt;/xs:sequence&gt;</span>
</span><span id="__span-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="w">      </span><span class="nt">&lt;xs:attribute</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;mcp:commonsType&quot;</span><span class="w"> </span><span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a><span class="w">      </span><span class="nt">&lt;xs:attribute</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;gco:isoType&quot;</span><span class="w"> </span><span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="w"> </span><span class="na">fixed=</span><span class="s">&quot;gmd:MD_Constraints&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-11-22"><a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="w">    </span><span class="nt">&lt;/xs:extension&gt;</span>
</span><span id="__span-11-23"><a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a><span class="w">  </span><span class="nt">&lt;/xs:complexContent&gt;</span>
</span><span id="__span-11-24"><a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="nt">&lt;/xs:complexType&gt;</span>
</span><span id="__span-11-25"><a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a>
</span><span id="__span-11-26"><a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;MD_Commons&quot;</span><span class="w"> </span><span class="na">substitutionGroup=</span><span class="s">&quot;gmd:MD_Constraints&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;mcp:MD_CommonsConstraints_Type&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></div>
</li>
</ul>
<p>For MCP records, the GeoNetwork editor will show a choice of elements from the substitution group for gmd:MD_Constraints when adding 'Resource Constraints' to the metadata document. This will now include mcp:MD_Commons.</p>
<p><img alt="" src="Editor-Constraints-Choices.png" /></p>
<p>Note that by similar process, two other elements, now deprecated in favour of MD_Commons, were also added as substitutes for MD_Constraints. If it was necessary to constrain the choices shown in this menu, say to remove the deprecated elements and limit the choices to just legal, security and commons, then this can be done by the following piece of XML in the schema-substitutes.xml file:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;field name=&quot;gmd:MD_Constraints&quot;&gt;
  &lt;substitute name=&quot;gmd:MD_LegalConstraints&quot;/&gt;
  &lt;substitute name=&quot;gmd:MD_SecurityConstraints&quot;/&gt;
  &lt;substitute name=&quot;mcp:MD_Commons&quot;/&gt;
&lt;/field&gt;
</code></pre></div>
<p>The result of this change is shown below.</p>
<p><img alt="" src="Editor-Constraints-Choices-Modified.png" /></p>
<p>Once again, a good place to start when building a schema-substitutes.xml file for the MCP is the schema-substitutes.xml file for the iso19139 schema.</p>
<h3 id="adding-components-to-support-conversion-of-metadata-records-to-other-schemas">Adding components to support conversion of metadata records to other schemas</h3>
<h4 id="creating-the-convert-directory">Creating the convert directory</h4>
<p>If the new GeoNetwork plugin schema is to support on the fly translation of metadata records to other schemas, then the convert directory should be created and populated with appropriate XSLTs.</p>
<h4 id="supporting-oaipmh-conversions">Supporting OAIPMH conversions</h4>
<p>The OAIPMH server in GeoNetwork can deliver metadata records from any of the schemas known to GeoNetwork. It can also be configured to deliver schemas not known to GeoNetwork if an XSLT exists to convert a metadata record to that schema. The file <code>INSTALL_DIR/web/geonetwork/WEB-INF/config-oai-prefixes.xml</code> describes the schemas (known as prefixes in OAI speak) that can be produced by an XSLT. A simple example of the content of this file is shown below:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;schemas&gt;
  &lt;schema prefix=&quot;oai_dc&quot; nsUrl=&quot;http://www.openarchives.org/OAI/2.0/&quot; 
          schemaLocation=&quot;http://www.openarchives.org/OAI/2.0/oai_dc.xsd&quot;/&gt;
&lt;/schemas&gt;
</code></pre></div>
<p>In the case of the prefix oai_dc shown above, if a schema converter with prefix <em>oai_dc</em> exists in the <code>schema-conversions.xml</code> file of a GeoNetwork schema, then records that belong to this schema will be transformed and included in OAIPMH requests for the <em>oai_dc</em> prefix. See <a href="./#schema_conversions">Creating the schema-conversions.xml file</a> for more info.</p>
<p>To add oai_dc support for the MCP, the easiest method is to copy oai_dc.xsl from the convert directory of the iso19139 schema, modify it to cope with the different namespaces and additional elements of the MCP and add it to the <code>schema-conversions.xml</code> file for the MCP.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../harvesting/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Harvesting">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Harvesting
              </div>
            </div>
          </a>
        
        
          
          <a href="../mef/" class="md-footer__link md-footer__link--next" aria-label="Next: Metadata Exchange Format">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Metadata Exchange Format
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
  Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Copyright and theme information -->
<div class="md-copyright">
  
  <span class="md-copyright__highlight">
    Copyright &copy; 2001 - 2023 FAO-UN and others
  </span>
  
  
  &mdash; Made by the
  <a
          href="https://geonetwork-opensource.org/"
          target="_blank" rel="noopener"
  >GeoNetwork Community</a>,
  built with
  <a
          href="https://squidfunk.github.io/mkdocs-material/"
          target="_blank" rel="noopener"
  >
    Material for MkDocs
  </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/geonetwork" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/_/geonetwork" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://geonetwork-opensource.org/" target="_blank" rel="noopener" title="GeoNetwork Website" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H320zM80 32C35.8 32 0 67.8 0 112v320c0 44.2 35.8 80 80 80h320c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v112c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16h112c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["toc.follow", "navigation.tracking", "navigation.top", "navigation.tabs", "navigation.prune", "navigation.indexes", "navigation.footer", "header.autohide", "content.tabs.link", "content.code.copy", "content.action.view", "content.action.edit", "announce.dismiss"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.081f42fc.min.js"></script>
      
    
  </body>
</html>