
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="GeoNetwork catalogue for listing, searching and reviewing records.">
      
      
      
        <link rel="canonical" href="https://docs.geonetwork-opensource.org/4.2/administrator-guide/managing-users-and-groups/authentication-mode/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../creating-group/">
      
      
      <link rel="icon" href="../../../assets/images/geonetwork-logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Authentication mode - GeoNetwork opensource (EN)</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#authentication-mode" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  GeoNetwork 4.2 is outdated.
  <a href="../../../.."><strong>Click here to go to stable.</strong></a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://geonetwork-opensource.org/" title="GeoNetwork opensource (EN)" class="md-header__button md-logo" aria-label="GeoNetwork opensource (EN)" data-md-component="logo">
      
  <img src="../../../assets/images/geonetwork-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GeoNetwork opensource (EN)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Authentication mode
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../fr/administrator-guide/managing-users-and-groups/authentication-mode/" hreflang="fr" class="md-select__link">
              Fran√ßais
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/geonetwork/core-geonetwork" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    core-geonetwork
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  GeoNetwork

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../overview/" class="md-tabs__link">
          
  
  
    
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../help/" class="md-tabs__link">
          
  
  
    
  
  Help

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../user-guide/" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../maintainer-guide/" class="md-tabs__link">
          
  
  
    
  
  Maintainer Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../api/" class="md-tabs__link">
          
  
  
    
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../devel/" class="md-tabs__link">
          
  
  
    
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tutorials/" class="md-tabs__link">
          
  
  
    
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../annexes/" class="md-tabs__link">
          
  
  
    
  
  Annexes

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://geonetwork-opensource.org/" title="GeoNetwork opensource (EN)" class="md-nav__button md-logo" aria-label="GeoNetwork opensource (EN)" data-md-component="logo">
      
  <img src="../../../assets/images/geonetwork-logo.svg" alt="logo">

    </a>
    GeoNetwork opensource (EN)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/geonetwork/core-geonetwork" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    core-geonetwork
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GeoNetwork
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../overview/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../help/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Help
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../user-guide/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick start
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maps and dataset visualisation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../user-guide/describing-information/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Describing Information
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../user-guide/associating-resources/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Associating Resources
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../user-guide/tag-information/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Tag information
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../user-guide/publishing/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Publishing
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../user-guide/analyzing/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Analyzing
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../user-guide/workflow/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Workflow
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../user-guide/harvesting/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Harvesting
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/export/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exporting records
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_12" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Administration
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_12" id="__nav_4_12_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_12_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_12">
            <span class="md-nav__icon md-icon"></span>
            Administration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../configuring-the-catalog/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Catalog
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_12_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Users and Groups
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_12_3" id="__nav_4_12_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_12_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_12_3">
            <span class="md-nav__icon md-icon"></span>
            Users and Groups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Authentication mode
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Authentication mode
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authentication-ldap" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring LDAP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring LDAP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authorization-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Authorization Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authorization Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-information" class="md-nav__link">
    <span class="md-ellipsis">
      User information
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#privileges-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Privileges configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-ldap-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring LDAP - Hierarchy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring LDAP - Hierarchy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-ldap-beans-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring LDAP Beans (Hierarchy)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-cas" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring CAS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-openid" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring OAUTH2 OpenID Connect
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring OAUTH2 OpenID Connect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-variable-and-meaning" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variable and Meaning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-for-a-keycloak-server" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration for a Keycloak Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-ad-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Azure AD Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Azure AD Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#with-users-and-groups" class="md-nav__link">
    <span class="md-ellipsis">
      With Users and Groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-application-roles" class="md-nav__link">
    <span class="md-ellipsis">
      With Application Roles
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oidc_bearer_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      OIDC Bearer Tokens
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OIDC Bearer Tokens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validation" class="md-nav__link">
    <span class="md-ellipsis">
      Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bearer_token_configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-providers" class="md-nav__link">
    <span class="md-ellipsis">
      Other Providers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Keycloak
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring Keycloak">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geonetwork-client-url-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Geonetwork client URL configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-userrolegroup-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Sample user/role/group setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sample user/role/group setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-role-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Role setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-group-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Group configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-user-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Sample User configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-ecas" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring EU Login
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-shibboleth" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Shibboleth
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating-group/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating group
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating-user/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating user
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-self-registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Self-Registration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-reset-password/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User 'Forgot your password?' function
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../managing-classification-systems/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Classification Systems
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../managing-metadata-standards/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Metadata Standards
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../maintainer-guide/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Maintainer Guide
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../api/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../devel/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../tutorials/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../annexes/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Annexes
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authentication-ldap" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring LDAP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring LDAP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authorization-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Authorization Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authorization Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-information" class="md-nav__link">
    <span class="md-ellipsis">
      User information
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#privileges-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Privileges configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-ldap-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring LDAP - Hierarchy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring LDAP - Hierarchy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-ldap-beans-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring LDAP Beans (Hierarchy)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-cas" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring CAS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-openid" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring OAUTH2 OpenID Connect
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring OAUTH2 OpenID Connect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-variable-and-meaning" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variable and Meaning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-for-a-keycloak-server" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration for a Keycloak Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-ad-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Azure AD Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Azure AD Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#with-users-and-groups" class="md-nav__link">
    <span class="md-ellipsis">
      With Users and Groups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-application-roles" class="md-nav__link">
    <span class="md-ellipsis">
      With Application Roles
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oidc_bearer_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      OIDC Bearer Tokens
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OIDC Bearer Tokens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validation" class="md-nav__link">
    <span class="md-ellipsis">
      Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bearer_token_configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-providers" class="md-nav__link">
    <span class="md-ellipsis">
      Other Providers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Keycloak
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring Keycloak">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geonetwork-client-url-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Geonetwork client URL configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-userrolegroup-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Sample user/role/group setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sample user/role/group setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-role-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Role setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-group-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Group configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-user-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Sample User configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-ecas" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring EU Login
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-shibboleth" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Shibboleth
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/geonetwork/core-geonetwork/edit/main/docs/manual/docs/administrator-guide/managing-users-and-groups/authentication-mode.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/geonetwork/core-geonetwork/raw/main/docs/manual/docs/administrator-guide/managing-users-and-groups/authentication-mode.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="authentication-mode">Authentication mode</h1>
<p>By default the catalog uses the internal database for user management and authentication. However there are some other authentication mechanisms available:</p>
<ul>
<li><a href="./#authentication-ldap">Configuring LDAP</a></li>
<li><a href="./#authentication-ldap-hierarchy">Configuring LDAP - Hierarchy</a></li>
<li><a href="./#authentication-cas">Configuring CAS</a></li>
<li><a href="./#authentication-openid">Configuring OAUTH2 OpenID Connect</a></li>
<li><a href="./#authentication-keycloak">Configuring Keycloak</a></li>
<li><a href="./#authentication-shibboleth">Configuring Shibboleth</a></li>
</ul>
<p>Which mode to use is configured in <strong><code>WEB-INF/config-security/config-security.xml</code></strong> or via an environment variable <code>geonetwork.security.type</code>.</p>
<p>Uncomment the relevant line in <strong><code>WEB-INF/config-security/config-security.xml</code></strong>:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-{mode}.xml&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></div>
<h2 id="authentication-ldap">Configuring LDAP</h2>
<p><a href="https://en.wikipedia.org/wiki/Ldap">Lightweight Directory Access Protocol (LDAP)</a> enables GeoNetwork to verify usernames and passwords to a remote identity store. LDAP implementation uses the default GeoNetwork Login User Interface elements.</p>
<p>GeoNetwork currently has 2 approaches to configure LDAP. Verify also the alternative approach in <a href="./#authentication-ldap-hierarchy">Configuring LDAP - Hierarchy</a>.</p>
<p>The LDAP configuration is defined in <code>WEB-INF/config-security/config-security.properties</code>, you can then configure your environment updating the previous file or overriding the properties in the file <code>WEB-INF/config-security/config-security-overrides.properties</code>.</p>
<ol>
<li>
<p>Define the LDAP connection:</p>
<ul>
<li><code>ldap.base.provider.url</code>: This tells the portal where the LDAP server is located. Make sure that the computer with the catalog can hit the computer with the LDAP server. Check to make sure that the appropriate ports are opened, etc.</li>
<li><code>ldap.base.dn</code>: this will usually look something like: "dc=[organizationnamehere],dc=org"</li>
<li><code>ldap.security.principal</code> / <code>ldap.security.credentials</code>: Define LDAP administrator user to use to bind to LDAP. If not define, an anonymous bind is made. Principal is the username and credentials property the password.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a># LDAP security properties
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>ldap.base.provider.url=ldap://localhost:389
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>ldap.base.dn=dc=fao,dc=org
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>ldap.security.principal=cn=admin,dc=fao,dc=org
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>ldap.security.credentials=ldap
</span></code></pre></div>
<p>To verify that you have the correct settings, try to connect to the LDAP server using an LDAP browser application.</p>
</li>
<li>
<p>Define where to find users in LDAP structure for authentication:</p>
<ul>
<li><code>ldap.base.search.base</code>: this is where the catalog will look for users for authentication.</li>
<li><code>ldap.base.dn.pattern</code>: this is the distinguished name for the user to bind with. <code>{0}</code> is replaced by the user name typed in the sign in screen.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ldap.base.search.base=ou=people
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>ldap.base.dn.pattern=uid={0},${ldap.base.search.base}
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>#ldap.base.dn.pattern=mail={0},${ldap.base.search.base}
</span></code></pre></div>
</li>
</ol>
<h3 id="authorization-settings">Authorization Settings</h3>
<p>When using LDAP, the user information and privileges for GeoNetwork could be defined from the LDAP attributes.</p>
<h4 id="user-information">User information</h4>
<p>The user information could be retrieved from the LDAP configuring for each user attribute in the catalog database which LDAP attributes match. If the attribute is empty or not defined, a default value could be defined. The property value is composed by two parts separated by <code>,</code> character. The first part is the attribute name and the second part is the default value in case the attribute name is not define or the attribute value in LDAP is empty.</p>
<p>The configuration is the following:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a># Map user information to LDAP attributes and default values
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a># ldapUserContextMapper.mapping[name]=ldap_attribute,default_value
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>ldapUserContextMapper.mapping[name]=cn,
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>ldapUserContextMapper.mapping[surname]=givenName,
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>ldapUserContextMapper.mapping[mail]=mail,data@myorganization.org
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>ldapUserContextMapper.mapping[organisation]=,myorganization
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>ldapUserContextMapper.mapping[kind]=,
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>ldapUserContextMapper.mapping[address]=,
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>ldapUserContextMapper.mapping[zip]=,
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>ldapUserContextMapper.mapping[state]=,
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>ldapUserContextMapper.mapping[city]=,
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>ldapUserContextMapper.mapping[country]=,
</span></code></pre></div>
<h4 id="privileges-configuration">Privileges configuration</h4>
<p>User groups and user profiles could be set optionally from LDAP information or not. By default user privileges are managed from the local database. If LDAP information should be used to define user privileges, set the <code>ldap.privilege.import</code> property <code>true</code>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>ldap.privilege.import=true
</span></code></pre></div>
<p>When importing privileges from LDAP, the catalog administrator could decide to create groups defined in the LDAP and not defined in local database. For this set the following property to true:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ldap.privilege.create.nonexisting.groups=false
</span></code></pre></div>
<p>In order to define which groups the user is member of and which profile is the user:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>ldapUserContextMapper.mapping[privilege]=groups,sample
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a># If not set, the default profile is RegisteredUser
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a># Valid profiles are ADMINISTRATOR, USER_ADMIN, REVIEWER, EDITOR, REGISTERED_USER, GUEST
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>ldapUserContextMapper.mapping[profile]=privileges,RegisteredUser
</span></code></pre></div>
<p>Attributes configuration:</p>
<ul>
<li>privilege attribute contains the group this user is member of. More than one group is allowed.</li>
<li>profile attribute contains the profile of the user.</li>
</ul>
<p>User valid profiles are:</p>
<ul>
<li>Administrator</li>
<li>UserAdmin</li>
<li>Reviewer</li>
<li>Editor</li>
<li>RegisteredUser</li>
<li>Guest</li>
</ul>
<p>If LDAP attribute containing profiles does not match the catalog profile list, a mapping could be defined:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a># Map LDAP custom profiles to catalog profiles. Not used if ldap.privilege.pattern is defined.
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>ldapUserContextMapper.profileMapping[Admin]=Administrator
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>ldapUserContextMapper.profileMapping[Editor]=Reviewer
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>ldapUserContextMapper.profileMapping[Public]=RegisteredUser
</span></code></pre></div>
<p>For example, in the previous configuration, the attribute value <code>Admin</code> will be mapped to <code>Administrator</code> (which is a valid profile for the catalog).</p>
<p>An attribute could define both the profile and the group for a user. To extract this information, a custom pattern could be defined to populate user privileges according to that attribute:</p>
<ol>
<li>
<p>Define one attribute for the profile and one for groups in <code>WEB-INF/config-security/config-security-overrides.properties</code></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a># In config-security-overrides.properties
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>ldapUserContextMapper.mapping[privilege]=cat_privileges,sample
</span></code></pre></div>
</li>
<li>
<p>Define one attribute for the privilege and define a custom pattern:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a># In config-security.properties
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>ldap.privilege.pattern=CAT_(.*)_(.*)
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>ldap.privilege.pattern.idx.group=1
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>ldap.privilege.pattern.idx.profil=2
</span></code></pre></div>
<p>Enable the bean <code>ldapUserContextMapper</code> for <code>LDAPUserDetailsContextMapperWithPattern</code> ( in <code>WEB-INF/config-security/config-security-ldap.xml</code>).</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="cm">&lt;!--&lt;bean id=&quot;ldapUserContextMapper&quot;</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="cm">    class=&quot;org.fao.geonet.kernel.security.ldap.LDAPUserDetailsContextMapper&quot;&gt;</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="cm">    &lt;property name=&quot;mapping&quot;&gt;</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="cm">      &lt;map/&gt;</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="cm">    &lt;/property&gt;</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="cm">    &lt;property name=&quot;profileMapping&quot;&gt;</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="cm">      &lt;map/&gt;</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="cm">    &lt;/property&gt;</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="cm">    &lt;property name=&quot;ldapBaseDn&quot; value=&quot;${ldap.base.dn}&quot;/&gt;</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="cm">    &lt;property name=&quot;importPrivilegesFromLdap&quot; value=&quot;${ldap.privilege.import}&quot;/&gt;</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="cm">    &lt;property name=&quot;createNonExistingLdapGroup&quot;</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="cm">              value=&quot;${ldap.privilege.create.nonexisting.groups}&quot;/&gt;</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="cm">    &lt;property name=&quot;createNonExistingLdapUser&quot; value=&quot;${ldap.privilege.create.nonexisting.users}&quot;/&gt;</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="cm">    &lt;property name=&quot;ldapManager&quot; ref=&quot;ldapUserDetailsService&quot;/&gt;</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="cm">    &lt;property name=&quot;contextSource&quot; ref=&quot;contextSource&quot;/&gt;</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="cm">    &lt;property name=&quot;ldapUsernameCaseInsensitive&quot; value=&quot;${ldap.usernameCaseInsensitive:#{true}}&quot;/&gt;</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="cm">&lt;/bean&gt;--&gt;</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapUserContextMapper&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.fao.geonet.kernel.security.ldap.LDAPUserDetailsContextMapperWithPattern&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;mapping&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">      </span><span class="nt">&lt;map/&gt;</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">  </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profileMapping&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">      </span><span class="nt">&lt;map/&gt;</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="w">  </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;importPrivilegesFromLdap&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.import}&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;createNonExistingLdapGroup&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.create.nonexisting.groups}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;createNonExistingLdapUser&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.create.nonexisting.users}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-10-29"><a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a>
</span><span id="__span-10-30"><a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ldapManager&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;ldapUserDetailsService&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-10-31"><a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a>
</span><span id="__span-10-32"><a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;privilegePattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.pattern}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-10-33"><a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;groupIndexInPattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.pattern.idx.group}&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-10-34"><a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profilIndexInPattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.pattern.idx.profil}&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-10-35"><a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a>
</span><span id="__span-10-36"><a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;contextSource&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;contextSource&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-10-37"><a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>Define custom location for extracting group and role (no support for group/role combination) (use LDAPUserDetailsContextMapperWithProfileSearch in <strong><code>config-security.xml</code></strong>).</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ldap.privilege.search.group.attribute=cn
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>ldap.privilege.search.group.object=ou=groups
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>#ldap.privilege.search.group.query=(&amp;(objectClass=*)(memberUid=uid={0},${ldap.base.search.base},${ldap.base.dn})(cn=EL_*))
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>ldap.privilege.search.group.queryprop=memberuid
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>ldap.privilege.search.group.query=(&amp;(objectClass=*)(memberUid=uid={0},${ldap.base.search.base},${ldap.base.dn})(|(cn=SP_*)(cn=EL_*)))
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>ldap.privilege.search.group.pattern=EL_(.*)
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>ldap.privilege.search.privilege.attribute=cn
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>ldap.privilege.search.privilege.object=ou=groups
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>ldap.privilege.search.privilege.query=(&amp;(objectClass=*)(memberUid=uid={0},${ldap.base.search.base},${ldap.base.dn})(cn=SV_*))
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>ldap.privilege.search.privilege.pattern=SV_(.*)
</span></code></pre></div>
<p>The LDAP attribute can contains the following configuration to define the different type of users, for example:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>cat_privileges=CAT_ALL_Administrator
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>-- Define a reviewer for the group GRANULAT
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>cat_privileges=CAT_GRANULAT_Reviewer
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>-- Define a reviewer for the group GRANULAT and editor for MIMEL
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>cat_privileges=CAT_GRANULAT_Reviewer
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>cat_privileges=CAT_MIMEL_Editor
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>-- Define a reviewer for the group GRANULAT and editor for MIMEL and RegisteredUser for NATURA2000
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>cat_privileges=CAT_GRANULAT_Reviewer
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>cat_privileges=CAT_MIMEL_Reviewer
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>cat_privileges=CAT_NATURA2000_RegisteredUser
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>-- Only a registered user for GRANULAT
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>cat_privileges=CAT_GRANULAT_RegisteredUser
</span></code></pre></div>
</li>
</ol>
<h4 id="synchronization">Synchronization</h4>
<p>A synchronization task is taking care of removing LDAP users that may be deleted. For example:</p>
<ul>
<li>T0: User A signs in to the catalog. A local user A is created in the user database.</li>
<li>T1: User A is deleted from the LDAP (User A cannot sign in to the catalog anymore).</li>
<li>T2: The synchronization task will check that all local LDAP users exist in LDAP:<ul>
<li>If the user does not own any records, it will be deleted.</li>
<li>If the user owns metadata records, a warning message will be written to the catalog logging system. The owner of the record should be changed to another user before the task can remove the current owner.</li>
</ul>
</li>
</ul>
<p>By default the task runs once every day. This can be changed in the following property:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a># Run LDAP sync every day at 23:30
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>ldap.sync.cron=0 30 23 * * ?
</span></code></pre></div>
<p>The following properties allow advanced configuration of the synchronisation process:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>ldap.sync.user.search.base=${ldap.base.search.base}
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>ldap.sync.user.search.filter=(&amp;(objectClass=*)(mail=*@*)(givenName=*))
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>ldap.sync.user.search.attribute=uid
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>ldap.sync.group.search.base=ou=groups
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>ldap.sync.group.search.filter=(&amp;(objectClass=posixGroup)(cn=EL_*))
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>ldap.sync.group.search.attribute=cn
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>ldap.sync.group.search.pattern=EL_(.*)
</span></code></pre></div>
<h4 id="debugging">Debugging</h4>
<p>If the connection fails, try to increase the logging level for LDAP in <code>WEB-INF/classes/log4j.xml</code>:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nt">&lt;logger</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;geonetwork.ldap&quot;</span><span class="w"> </span><span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="nt">&lt;level</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;DEBUG&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="nt">&lt;/logger&gt;</span>
</span></code></pre></div>
<p>Or from the Configuration Settings set the <code>Log level</code> to <code>DEV</code> temporarily:</p>
<p><img alt="" src="../img/setting-log-level.png" /></p>
<h2 id="authentication-ldap-hierarchy">Configuring LDAP - Hierarchy</h2>
<p>A slightly different method for LDAP configuration was introduced in mid-2020.</p>
<p>This extends the original configuration infrastructure (original configurations still work without any changes).</p>
<p>Before you start configuring, you will need to know;</p>
<ol>
<li>URL to your LDAP Server</li>
<li>Username/password to login to the LDAP Server (to execute queries)</li>
<li>LDAP query to find a user (given what they type in on the login screen)</li>
<li>Details of how to convert the LDAP user's attributes to GeoNetwork user attributes</li>
<li>LDAP query to find groups a user is a member of</li>
<li>How to convert a LDAP group to a GeoNetwork Group/Profile</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is a <a href="https://www.youtube.com/watch?v=f8rvbEdnE-g">video developer chat</a> that goes into details for how to configure LDAP including setting up a pre-configured LDAP server (using Apache Directory Studio) for testing/debugging/learning.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Should I use the Hierarchy or Original configuration?</p>
<p>If you already have an existing (Original) configuration, there's no need to move to the new one. Most of the code between the two is the same.</p>
<p>If you are starting a new configuration, I would recommend the Hierarchy configuration. It's a little simpler and supported by test cases and test infrastructure. It also supports LDAPs where users/groups are in multiple directories.</p>
</div>
<h3 id="configuring-ldap-beans-hierarchy">Configuring LDAP Beans (Hierarchy)</h3>
<p>GeoNetwork comes with a sample LDAP configuration that you can use in Apache Directory Studio to create the same LDAP server used in the test cases. There is also a sample GeoNetwork configuration that connects to this LDAP server. Please see <code class="interpreted-text" role="repo">core-geonetwork/blob/master/core/src/test/resources/org/fao/geonet/kernel/security/ldap/README.md</code> or the <a href="https://www.youtube.com/watch?v=f8rvbEdnE-g">video developer chat</a> for instructions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To use this configuration, uncomment the "<import resource="config-security-ldap-recursive.xml"/>" line in <code>web/src/main/webapp/WEB-INF/config-security/config-security.xml</code></p>
</div>
<ol>
<li>
<p>Configure the <code>contextSource</code> bean with a reference to your LDAP server and a user that can execute LDAP queries.</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;contextSource&quot;</span><span class="w">   </span><span class="na">class=</span><span class="s">&quot;org.springframework.security.ldap.DefaultSpringSecurityContextSource&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">    </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">value=</span><span class="s">‚Äúldap://localhost:3333/dc=example,dc=com&quot;/</span><span class="nt">&gt;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;userDn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;cn=admin,ou=GIS Department,ou=Corporate Users,dc=example,dc=com&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;admin1&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>Configure the <code>ldapUserSearch</code> bean with the query used to find the user (given what was typed in the login page).</p>
<p>NOTE: Set <code>searchSubtree</code> to <code>true</code> to do a recursive search of the LDAP. Use <code>searchBase</code> to control which directory the search starts in ("" means start from the root).</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapUserSearch&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;‚Ä¶&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">   </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;searchBase&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">   </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;searchFilter&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;(sAMAccountName={0})&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">   </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;contextSource&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;contextSource&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">   </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;searchSubtree&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>Configure the <code>ldapUserContextMapper</code> bean with how to convert the LDAP user's attributes to GeoNetwork user attributes (see the original configuration documentation, above).</p>
<p>NOTE: The <code>value</code> portion has two parts. The first part is the name of LDAP attribute (can be blank). The second part is the default value if the LDAP attribute is missing or empty (see the original configuration documentation, above).</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapUserContextMapper&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">‚ÄúLDAPUserDetailsContextMapperWithProfileSearchEnhanced&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;mapping&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">      </span><span class="nt">&lt;map&gt;</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;cn,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;surname&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;sn,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;mail&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;mail,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;organisation&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;address&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;zip&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;state&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;city&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;country&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;profile&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,RegisteredUser&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;privilege&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,none&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="w">      </span><span class="nt">&lt;/map&gt;</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="w">    </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>Continue configuring the <code>ldapUserContextMapper</code> bean so the LDAP can also provide group/profile roles for the user.</p>
<p>NOTE: The <code>ldapMembershipQuery</code> is the LDAP directory where the membership query will be start ("" means start at the root of the LDAP).</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapUserContextMapper&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;LDAPUserDetailsContextMapperWithProfileSearchEnhanced&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;importPrivilegesFromLdap&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">‚Äútrue&quot;/</span><span class="nt">&gt;</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">    </span><span class="cm">&lt;!-- typically, don&#39;t want GN to modify the LDAP server! --&gt;</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;createNonExistingLdapGroup&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;createNonExistingLdapUser&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ldapManager&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;ldapUserDetailsService&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;membershipSearchStartObject&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ldapMembershipQuery&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;(&amp;amp;(objectClass=*)(member=cn={2})(cn=GCAT_*))&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>Continue configuring the <code>ldapUserContextMapper</code> bean so the LDAP roles can be converted to GeoNetwork Groups/Profiles.</p>
<p>NOTE: You can use multiple <code>ldapRoleConverters</code>.</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapUserContextMapper&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;LDAPUserDetailsContextMapperWithProfileSearchEnhanced&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">   </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ldapRoleConverters&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">     </span><span class="nt">&lt;util:list&gt;</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">       </span><span class="nt">&lt;ref</span><span class="w"> </span><span class="na">bean=</span><span class="s">&quot;ldapRoleConverterGroupNameParser&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">     </span><span class="nt">&lt;/util:list&gt;</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">   </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
</ol>
<p>There are currently two ways to convert an LDAP group to GeoNetwork Groups/Profiles.</p>
<ul>
<li>
<p>The <code>LDAPRoleConverterGroupNameParser</code>, which works the same as the original LDAP configuration. It uses a regular expression to parse the LDAP group name into a GeoNetwork Group/Profile. This will convert the LDAP role <code>GCAT_GENERAL_EDITOR</code> into the GeoNetwork group <code>GENERAL</code> with Profile <code>Editor</code>.</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapRoleConverterGroupNameParser&quot;</span><span class="w">  </span><span class="na">class=</span><span class="s">&quot;LDAPRoleConverterGroupNameParser&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ldapMembershipQueryParser&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;GCAT_(.*)_(.*)&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;groupIndexInPattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profileIndexInPattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">‚Äú2&quot;/</span><span class="nt">&gt;</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profileMapping&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">      </span><span class="nt">&lt;map&gt;</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ADMIN&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Administrator&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;EDITOR&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Editor&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="w">      </span><span class="nt">&lt;/map&gt;</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="w">    </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>There is also a more direct way using <code>LDAPRoleConverterGroupNameConverter</code>. This directly converts the LDAP group name into a list of GeoNetwork Groups/Profiles.</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">‚ÄúldapRoleConverterGroupNameParser&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;LDAPRoleConverterGroupNameConverter&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;convertMap&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">      </span><span class="nt">&lt;map&gt;</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">        </span><span class="nt">&lt;entry&gt;</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">            </span><span class="nt">&lt;key&gt;</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>HGIS_GeoNetwork_Admin<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">            </span><span class="nt">&lt;/key&gt;</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">            </span><span class="nt">&lt;list&gt;</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">                </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.fao.geonet.kernel.security.ldap.LDAPRole&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">                  </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;groupName&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;java.lang.String&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;myGroup&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">                  </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profileName&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;java.lang.String&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Administrator&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">                </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="w">            </span><span class="nt">&lt;/list&gt;</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="w">        </span><span class="nt">&lt;/entry&gt;</span>
</span><span id="__span-22-19"><a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="w">        </span><span class="nt">&lt;entry&gt;</span>
</span><span id="__span-22-20"><a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="w">          </span><span class="nt">&lt;key&gt;</span>
</span><span id="__span-22-21"><a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>HGIS_GeoNetwork_Editor<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-22-22"><a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a><span class="w">          </span><span class="nt">&lt;/key&gt;</span>
</span><span id="__span-22-23"><a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a><span class="w">          </span><span class="nt">&lt;list&gt;</span>
</span><span id="__span-22-24"><a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a>
</span><span id="__span-22-25"><a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a><span class="w">            </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.fao.geonet.kernel.security.ldap.LDAPRole&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-22-26"><a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a><span class="w">              </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;groupName&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;java.lang.String&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">‚ÄúmyGroup&quot;/</span><span class="nt">&gt;</span>
</span><span id="__span-22-27"><a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a><span class="w">              </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profileName&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;java.lang.String&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Editor&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-22-28"><a id="__codelineno-22-28" name="__codelineno-22-28" href="#__codelineno-22-28"></a><span class="w">            </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-22-29"><a id="__codelineno-22-29" name="__codelineno-22-29" href="#__codelineno-22-29"></a>
</span><span id="__span-22-30"><a id="__codelineno-22-30" name="__codelineno-22-30" href="#__codelineno-22-30"></a><span class="w">          </span><span class="nt">&lt;/list&gt;</span>
</span><span id="__span-22-31"><a id="__codelineno-22-31" name="__codelineno-22-31" href="#__codelineno-22-31"></a><span class="w">        </span><span class="nt">&lt;/entry&gt;</span>
</span><span id="__span-22-32"><a id="__codelineno-22-32" name="__codelineno-22-32" href="#__codelineno-22-32"></a><span class="w">      </span><span class="nt">&lt;/map&gt;</span>
</span><span id="__span-22-33"><a id="__codelineno-22-33" name="__codelineno-22-33" href="#__codelineno-22-33"></a><span class="w">    </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-22-34"><a id="__codelineno-22-34" name="__codelineno-22-34" href="#__codelineno-22-34"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
</ul>
<h2 id="authentication-cas">Configuring CAS</h2>
<p>To enable CAS, set up authentication by including <code>WEB-INF/config-security/config-security-cas.xml</code> in <code>WEB-INF/config-security/config-security.xml</code>, uncommenting the following lines:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-cas.xml&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-cas-ldap.xml&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></div>
<p>CAS can use either LDAP or a database for user management. To use a database uncomment the following lines instead:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-cas.xml&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-cas-database.xml&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></div>
<p>The CAS configuration is defined in <code>WEB-INF/config-security/config-security.properties</code>. You can configure your environment by updating the previous file or by defining property overrides in the file <code>WEB-INF/config-security/config-security-overrides.properties</code>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>cas.baseURL=https://localhost:8443/cas
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>cas.ticket.validator.url=${cas.baseURL}
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>cas.login.url=${cas.baseURL}/login
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>cas.logout.url=${cas.baseURL}/logout?url=${geonetwork.https.url}/
</span></code></pre></div>
<h2 id="authentication-openid">Configuring OAUTH2 OpenID Connect</h2>
<p><a href="https://openid.net/connect/">OAUTH2 OpenID Connect</a> is an authentication and authorization system based on OAUTH2. Geonetwork's OpenID Connect plugin has been tested with <a href="https://keycloak.org">Keycloak</a> and <a href="https://azure.microsoft.com/en-ca/services/active-directory/">Azure AD</a>, but should work with any provider.</p>
<p>Basic Setup Steps:</p>
<ol>
<li>Configure your IDP Server (i.e. Keycloak or Azure AD)<ol>
<li>Ensure that the ID Token provides role/group information</li>
<li>Authorize your Geonetwork URLs for redirects (i.e. <code>http://localhost:8080/geonetwork/login/oauth2/code/geonetwork-oidc</code>)</li>
<li>Record the Client ID</li>
<li>Record the Client Secret</li>
<li>Get the Server's JSON metadata document</li>
</ol>
</li>
<li>Configure Geonetwork via environment variables<ol>
<li><code>GEONETWORK_SECURITY_TYPE=openidconnect</code></li>
<li><code>OPENIDCONNECT_CLIENTSECRET=\...</code> (from your IDP server)</li>
<li><code>OPENIDCONNECT_CLIENTID=\...</code> (from your IDP server)</li>
<li><code>OPENIDCONNECT_SERVERMETADATA_JSON_TEXT='\...'</code> (the text of your Server's JSON metadata document)</li>
<li><code>OPENIDCONNECT_IDTOKENROLELOCATION=\...</code> (location of the user's roles in the ID Token)</li>
</ol>
</li>
</ol>
<p>Geonetwork's Open ID Connect plugin has a lot of configuration options - please see the <code>WEB-INF/config-security/config-security-openidconnect.xml</code> and <code>WEB-INF/config-security/config-security-openidconnect-overrides.properties</code> files.</p>
<h3 id="environment-variable-and-meaning">Environment Variable and Meaning</h3>
<p><strong>GEONETWORK_SECURITY_TYPE</strong></p>
<p>Should be <code>openidconnect</code>.</p>
<p><strong>OPENIDCONNECT_CLIENTID</strong></p>
<p>The name of the client/application you configured on your OpenID server.</p>
<p><strong>OPENIDCONNECT_CLIENTSECRET</strong></p>
<p>The <code>client secret</code> you configured on your OpenID server.</p>
<p><strong>OPENIDCONNECT_SERVERMETADATA_CONFIG_URL</strong></p>
<p>URL to the external OIDC server's JSON metadata document. This is typically at <code>/.well-known/openid-configuration</code> on the IDP server.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will download the server's configuration everytime GeoNetwork starts up, which could be a security concern. For security, use a <code>https</code> URL.</p>
</div>
<p><strong>OPENIDCONNECT_SERVERMETADATA_JSON_TEXT</strong></p>
<p>Should be the text of your OpenID server's metadata configuration (JSON).</p>
<p><strong>OPENIDCONNECT_SERVERMETADATA_FNAME</strong></p>
<p>Instead of putting the OpenID server's metadata configuration as text in a variable (<code>OPENIDCONNECT_SERVERMETADATA_JSON_TEXT</code>), you can put the JSON contents in a file and reference it with this variable (ie. <code>/WEB-INF/config-security/openid-configuration.json</code>)</p>
<p><strong>OPENIDCONNECT_IDTOKENROLELOCATION</strong></p>
<p>Where, in the ID Token, are the users roles/groups stored (i.e. "groups", "roles", or "resource_access.gn-key.roles")</p>
<p><strong>OPENIDCONNECT_ROLECONVERTER</strong></p>
<p>This provides simple role conversion from the OpenID server to Geonetwork roles.</p>
<p>ie. <code>"GeonetworkAdmin=Administrator,GeonetworkEditor=Editor"</code></p>
<p>This will convert "GeonetworkAdmin" (from the OpenID Server) to the Geonetwork "Administrator" role.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Like the keycloak plugin, you can use role/group names of the form "group:role" to assign a user to Geonetwork group and permission level.</p>
</div>
<p><strong>OPENIDCONNECT_MINIMUMPROFILE</strong></p>
<p>Every user who authenticates against the OpenID server will be given this role.</p>
<p>Default is <code>"RegisteredUser"</code>.</p>
<p><strong>OPENIDCONNECT_USERPROFILEUPDATEENABLED</strong></p>
<p>When a user logs on, update their Geotwork profile from the OpenID server's ID Token.</p>
<p>Default is <code>"true"</code>.</p>
<p><strong>OPENIDCONNECT_USERGROUPUPDATEENABLED</strong></p>
<p>When a user logs on, update their Geotwork group/role permissions.</p>
<p>Default is <code>"true"</code>.</p>
<p><strong>OPENIDCONNECT_SCOPES</strong></p>
<p>Limit the requested scope access to the OpenID server.</p>
<p>Default "openid email profile", and "openid email profile offline_access" (for bearer tokens).</p>
<p><strong>OPENIDCONNECT_LOGINTYPE</strong></p>
<p>How Geonetwork deals with users who are not logged on.</p>
<p>Default is "LINK" - users can click on the "login" link on the main page.</p>
<p>"AUTOLOGIN" - No login form provided which will automatically login the user when possible.</p>
<p><strong>OPENIDCONNECT_LOGSENSITIVE_INFO</strong></p>
<p>"true" or "false" (default)</p>
<p>Logs: CODE, ACCESS TOKEN, ID TOKEN, userinfo endpoint result, and calculated GeoNetwork authorities.</p>
<p>LOGGING THIS INFORMATION IS PROBABLY A SECURITY AND PERSONAL INFORMATION RISK. DO NOT TURN THIS ON IN A SYSTEM THAT IS ACTUALLY BEING USED.</p>
<p>We try not to log very sensitive information - we don't log the full access or id token (just the claims part). We log the single-use CODE, but it should have already been deactivated by the server before we log it.</p>
<p>The access token, userinfo, and id token contain sensitive information (i.e. real names, email address, etc...)</p>
<h3 id="configuration-for-a-keycloak-server">Configuration for a Keycloak Server</h3>
<p>It's outside the scope of this document to fully describe the steps to configure keycloak, but this should serve as a guide.</p>
<p>This will configure keycloak backed by <strong>another OpenID IDP</strong> (for example, by an Azure AD). In keycloak:</p>
<ol>
<li>Create a realm (i.e. <code>myrealm</code>)</li>
<li>Create an openid client (i.e. <code>myclient</code>). This is your ClientID.<ol>
<li>Root URL: <code>http://localhost:7777/geonetwork</code> (this is the GN root URL)</li>
<li>Valid Redirect URIs: <code>http://localhost:7777/geonetwork/*</code></li>
<li>Access Type: Confidential</li>
<li>On the <code>Credentials</code> tab, get the secret (this is your Client Secret)</li>
<li>On the <code>Roles</code> tab, create some roles: Administrator, Editor, Reviewer, RegisteredGuest</li>
</ol>
</li>
<li>Create your backing Identity Provider (i.e. to another OpenID server). Or you can configure users directly in keycloak.<ol>
<li>At the bottom of the page, choose "import from URL" and import the backing server's configuration location.</li>
<li>Add the Client Secret (from the backing service)</li>
<li>Add the Client ID (from the backing service)</li>
<li>set "Client Authentication" to "Client secret sent as post"</li>
</ol>
</li>
<li>Configure role translation<ol>
<li>Edit the "Identity Provider" you just created, and go to the "Mappers" tab.</li>
<li>Press "Create" and and add a "Claim to Role".</li>
<li>Set Sync Mode Override to "Force"</li>
<li>Claim: <code>roles</code></li>
<li>Claim Value: <code>name of the administrator role in the backing IDP</code></li>
<li>Role: choose the "Administrator" role from the <code>myclient</code> client.</li>
<li>Repeat the above for Administrator, Editor, Reviewer, and RegisteredGuest</li>
</ol>
</li>
<li>Configure details for your backing IDP<ol>
<li>Edit the "Identity Provider" you just configured</li>
<li>On the Mappers tab, "Add Builtin" and tick "client roles (User Client Role)" then "Add selected"</li>
<li>Edit the "client roles" mapper and make sure "Add to ID token" and "Add to userinfo" are on</li>
</ol>
</li>
</ol>
<p>You should have Keycloak's Client id ("myclient") and the client secret. The configuration JSON is available at <code>https://YOUR_KEYCLOAK_HOST/realms/{YOUR REALM NAME}/.well-known/openid-configuration</code></p>
<p>Your environment variables will looks like this:</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="na">GEONETWORK_SECURITY_TYPE</span><span class="o">=</span><span class="s">openidconnect</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="na">OPENIDCONNECT_CLIENTSECRET</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="na">OPENIDCONNECT_CLIENTID</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="na">OPENIDCONNECT_SERVERMETADATA_JSON_TEXT</span><span class="o">=</span><span class="s">&#39;...big json text...&#39;</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="na">OPENIDCONNECT_IDTOKENROLELOCATION</span><span class="o">=</span><span class="s">&#39;resource_access.{your client id}.roles&#39;</span>
</span></code></pre></div>
<h3 id="azure-ad-configuration">Azure AD Configuration</h3>
<p>There are two ways to setup Azure AD. The first is with user and groups (a more traditional LDAP method) or with Application Roles.</p>
<h4 id="with-users-and-groups">With Users and Groups</h4>
<p>Setup the Azure Application:</p>
<ol>
<li>Create a new <code>App Registration</code></li>
<li>use <code>http://localhost:8080/geonetwork/login/oauth2/code/geonetwork-oidc</code> as a redirect URIs</li>
<li>On the "Certificates &amp; Secrets" add a new secret and record it (make sure you get the secret value and NOT the object id)</li>
<li>Make sure the groups are in the ID token - on the "Manifest" tab, edit the JSON so that "groupMembershipClaims": "SecurityGroup" is set</li>
<li>On the summary page, get the Application (client) ID</li>
<li>On the summary page, choose "Endpoints" (at the top) and get the JSON text from the "OpenID Connect metadata document" Endpoints</li>
</ol>
<p>Setup users and groups:</p>
<ol>
<li>In Azure AD, go to groups</li>
<li>Add new Groups - "geonetworkAdmin", "geonetworkReviewer", etc... Record the name and the group's <strong>Object ID</strong></li>
<li>Edit a User, and choose Groups, and add them to appropriate group.</li>
</ol>
<p>Your environment variables will looks like this:</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="na">GEONETWORK_SECURITY_TYPE</span><span class="o">=</span><span class="s">openidconnect</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="na">OPENIDCONNECT_CLIENTSECRET</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="na">OPENIDCONNECT_CLIENTID</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="na">OPENIDCONNECT_SERVERMETADATA_JSON_TEXT</span><span class="o">=</span><span class="s">&#39;...big json text...&#39;</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="na">OPENIDCONNECT_IDTOKENROLELOCATION</span><span class="o">=</span><span class="s">&#39;groups&#39;</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="na">OPENIDCONNECT_ROLECONVERTER</span><span class="o">=</span><span class="s">&#39;3a94275f-7d53-4205-8d78-11f39e9ffa5a=Administrator,d93c6444-feee-4b67-8c0f-15d6796370cb=Reviewer&#39;</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The roles are in the "roles" part of the ID Token.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The OPENIDCONNECT_ROLECONVERTER converts the Azure AD Group's Object ID to a Geonetwork Role.</p>
</div>
<h4 id="with-application-roles">With Application Roles</h4>
<p>Setup the Azure Application:</p>
<ol>
<li>Create a new Enterprise application</li>
<li>use <code>http://localhost:8080/geonetwork/login/oauth2/code/geonetwork-oidc</code> as a redirect URIs</li>
<li>On the "Certificates &amp; Secrets" add a new secret and record it (make sure you get the secret value and NOT the object id)</li>
<li>Make sure the groups are in the ID token - on the "Manifest" tab, edit the JSON so that "groupMembershipClaims": "ApplicationGroup" is set</li>
<li>On the summary page, get the Application (client) ID</li>
<li>On the summary page, choose "Endpoints" (at the top) and get the JSON text from the "OpenID Connect metadata document" Endpoints</li>
</ol>
<p>Setup Application Roles:</p>
<ol>
<li>In Application you created, go to "App Roles".</li>
<li>Add new Groups - "Editor", "Reviewer", etc...</li>
</ol>
<p>Assign Users:</p>
<ol>
<li>Go to Azure AD, Enterprise Application, then the application you created</li>
<li>Choose "Assign users and groups"</li>
<li>Press the "Add user/group" (top)</li>
<li>Press "None Selected" (under Users) and choose some users</li>
<li>Press "None Selected" (Under Select a Role) and choose some roles</li>
<li>Configure all your users with roles</li>
</ol>
<p>Your environment variables will looks like this:</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="na">GEONETWORK_SECURITY_TYPE</span><span class="o">=</span><span class="s">openidconnect</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="na">OPENIDCONNECT_CLIENTSECRET</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="na">OPENIDCONNECT_CLIENTID</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="na">OPENIDCONNECT_SERVERMETADATA_JSON_TEXT</span><span class="o">=</span><span class="s">&#39;...big json text...&#39;</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="na">OPENIDCONNECT_IDTOKENROLELOCATION</span><span class="o">=</span><span class="s">&#39;roles&#39;</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The roles are in the "roles" part of the ID Token.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You don't typically have to do any role conversion since the role name will be used in the ID Token.</p>
</div>
<h3 id="oidc_bearer_tokens">OIDC Bearer Tokens</h3>
<p>Bearer Tokens are also supported - you can attach the JWT Bearer token to any request by setting the HTTP header like this:</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="na">Authorization</span><span class="o">:</span><span class="w"> </span><span class="s">Bearer:  &lt;JWT token&gt;</span>
</span></code></pre></div>
<p>Bearer Tokens are mostly used for automated (desktop or application) API calls - real users should just login normally using OIDC.</p>
<ol>
<li>Setup your OIDC configuration (see <a href="./#authentication-openid">Configuring OAUTH2 OpenID Connect</a>)</li>
<li>Setup the OIDC Bearer token configuration (see <a href="./#bearer_token_configuration">Configuration</a>)</li>
<li>Obtain a Bearer token from the OIDC server. This is the hard part and there are several ways to do this. One way that is used is via the OAuth 2.0 Device Authorization Grant ("Device Flow") workflow.</li>
<li>Attach it to your request headers (see <a href="./#oidc_bearer_tokens">OIDC Bearer Tokens</a>)</li>
<li>Make protected requests to the Geonetwork API</li>
</ol>
<p>This has been tested with Keycloak and with Azure AD. It should work with other JWT-based OIDC services.</p>
<h4 id="validation">Validation</h4>
<p>The token is validated in three major ways:</p>
<ol>
<li>The bearer token will be used to access the <code>userinfo</code> ("token validation") endpoint specified in the OIDC configuration. This means the IDP validates the token (at the very least its signature and expiry).</li>
<li>The bearer token (JWT) will be checked that the audience for it is the same as our configurated OIDC configuration. This will ensure that someone isn't getting a token from a different service and attempting to use it here. See <code>AudienceAccessTokenValidator.java</code></li>
<li>The bearer token (JWT) will be checked that the subject of the JWT and the <code>userinfo</code> (returned from the IDP) are the same. This shouldnt be a problem in our use-case, but the OAUTH2 specification recommends this check. See <code>SubjectAccessTokenValidator.java</code></li>
</ol>
<h4 id="bearer_token_configuration">Configuration</h4>
<p>Configure OIDC as above - ensure this is working.</p>
<p>Instead of using <code>GEONETWORK_SECURITY_TYPE=openidconnect</code>, use <code>GEONETWORK_SECURITY_TYPE=openidconnectbearer</code>.</p>
<p>Inside <code>WEB-INF/config-security/config-security-openidconnectbearer.xml</code>:</p>
<ol>
<li>If you are using keycloak (configured with Groups in the <code>userinfo</code> response), then uncomment the <code>UserInfoAccessTokenRolesResolver</code> bean and comment out the <code>MSGraphUserRolesResolver</code> bean.</li>
<li>If you are using Azure AD (MS Graph API for the user's groups), then then uncomment the <code>MSGraphUserRolesResolver</code> bean and comment out the <code>UserInfoAccessTokenRolesResolver</code> bean.</li>
</ol>
<p>The easiest way to test is to obtain a Bearer Token, and then use a browser plugin to add the <code>Authorization: Bearer &lt;token&gt;</code> header to all requests. When you visit the Geonetwork website, you should see yourself logged in with the appropriate permissions.</p>
<h4 id="other-providers">Other Providers</h4>
<p>This has been tested with Azure AD (groups in the MS Graph API) and KeyCloak (groups in the <code>userinfo</code>).</p>
<p>For other IDP, you might have to make some modifications.</p>
<ol>
<li>Make sure the <code>AudienceAccessTokenValidator</code> and <code>SubjectAccessTokenValidator</code> work correctly for your JWT bearer tokens.</li>
<li>Make sure that the user's groups are available - see the <code>UserRolesResolver</code> interface and its two implementations - <code>UserInfoAccessTokenRolesResolver</code> and <code>MSGraphUserRolesResolver</code>.</li>
</ol>
<h2 id="authentication-keycloak">Configuring Keycloak</h2>
<p><a href="https://keycloak.org">Keycloak</a> is a software solution to facilitate storage of authentication details, user federation, identity brokering and social login. GeoNetwork can be set up to use a keycloak instance for authentication.</p>
<p>Install keycloak from its instructions or use this example setup in docker <a href="https://www.keycloak.org/getting-started/getting-started-docker">https://www.keycloak.org/getting-started/getting-started-docker</a></p>
<p>Keycloak details are defined via environment variables</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>KEYCLOAK_AUTH_SERVER_URL={keycloak url}
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>KEYCLOAK_REALM={realm name}
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>KEYCLOAK_RESOURCE={client name}
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>KEYCLOAK_SECRET={client secret}
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>KEYCLOAK_DISABLE_TRUST_MANAGER={true|false}
</span></code></pre></div>
<p>You can setup more advance keycloak settings by editing the file <strong><code>WEB-INF/config-security/keycloak.json</code></strong></p>
<h3 id="geonetwork-client-url-configuration">Geonetwork client URL configuration</h3>
<p>Ensure that when you configure your client that you setup the valid redirect uris to your geonetwork installation. i.e. <code>https://localhost:8443/geonetwork/*</code>. If this is not setup correctly you may get and error indicating that a wrong redirect uri was supplied. Also if wanting to test the client backchannel logout then ensure that the admin URL is also set to the geonetwork installation.</p>
<h3 id="sample-userrolegroup-setup">Sample user/role/group setup</h3>
<h4 id="sample-role-setup">Sample Role setup</h4>
<p>In your client role settings (clients -&gt; myclient -&gt; roles). Add the following roles</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>Administrator
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>RegisteredUser
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>Guest
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>sample:UserAdmin
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>sample:Reviewer
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>sample:Editor
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>sample:RegisteredUser
</span></code></pre></div>
<h4 id="sample-group-configuration">Sample Group configuration</h4>
<ol>
<li>Go to keycloak groups (left menu).</li>
<li>Create a new group called "Administrator"</li>
<li>Edit the group. Go to Role Mappings -&gt; Client Roles (myclient) -&gt; select the administrator roles and click on "Add selected" Any user joined to the Administrator group will be a geonetwork administrator.</li>
</ol>
<h4 id="sample-user-configuration">Sample User configuration</h4>
<ol>
<li>Go to keycloak users (left menu)</li>
<li>Add or select existing user. Then go to that user.</li>
<li>Go to role Mappings -&gt; Client Roles (myclient) -&gt; select the available roles to be applied and click on "Add selected" or go to Groups -&gt; Available Groups -&gt; Click on the Administrator Group and then click on "Join"</li>
</ol>
<p>A similar setup is described for geoserver in the <a href="https://docs.geoserver.org/latest/en/user/community/keycloak/index.html">geoserver documentation</a>.</p>
<h2 id="authentication-ecas">Configuring EU Login</h2>
<p>EU Login is the central login mechanism of the European Commission. You can enable login against that central service in case your intended users have ar can acquire a EU Login.</p>
<p>To enable EU Login, set up authentication by including <code>WEB-INF/config-security/config-security-ecas.xml</code> in <code>WEB-INF/config-security/config-security.xml</code>, uncommenting the following line:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-ecas.xml&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></div>
<p>EU-login requires an ecas-plugin provided by the European Union. The ecas plugin is available via <a href="https://citnet.tech.ec.europa.eu/CITnet/nexus">CITnet</a> for various java containers, such as Tomcat and JBoss.</p>
<p>For tomcat, add two files to the tomcat lib folder: ecas-tomcat-x.y.z.jar and log4j-x.y.z.jar. Inside the lib folder copy two folders from <strong><code>eulogin-tomcat-x.y.z-config.zip</code></strong>: <strong><code>org/apache/catalina/authenticator</code></strong> and <strong><code>org/apache/catalina/startup</code></strong>. The mbeans folder contains a file <strong><code>mbeans-descriptors.xml</code></strong>. The startup folder contains a file <strong><code>Authenticators.properties</code></strong>. Verify that the JDK trusts the <a href="https://webgate.ec.europa.eu/CITnet/confluence/display/IAM/Downloads-Certificates">ECAS certificates</a> else import them on the keystore of the JVM.</p>
<p>The EU Login configuration is defined in <strong><code>WEB-INF/config-security/config-security.properties</code></strong>. You can configure your environment by updating the previous file or by defining property overrides in the file <strong><code>WEB-INF/config-security/config-security-overrides.properties</code></strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>cas.baseURL=https://webgate.ec.europa.eu/cas
</span></code></pre></div>
<p>Restart the service and check the authentication menchanism.</p>
<h2 id="authentication-shibboleth">Configuring Shibboleth</h2>
<p>The catalog can operate in a SAML secured federation. Shibboleth should be installed in Apache as described <a href="https://wiki.shibboleth.net/confluence/display/SHIB2/Installation">here</a>. The catalog is accessed via Apache. Setup Shibboleth authentication by including <code>WEB-INF/config-security/config-security-shibboleth.xml</code> in <code>WEB-INF/config-security/config-security.xml</code>. You can then configure your environment in <code>config-security-shibboleth-overrides.properties</code>.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Managing users and groups">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Managing users and groups
              </div>
            </div>
          </a>
        
        
          
          <a href="../creating-group/" class="md-footer__link md-footer__link--next" aria-label="Next: Creating group">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Creating group
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
  Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Copyright and theme information -->
<div class="md-copyright">
  
  <span class="md-copyright__highlight">
    Copyright &copy; 2001 - 2025 FAO-UN and others
  </span>
  
  
  &mdash; Made by the
  <a
          href="https://geonetwork-opensource.org/"
          target="_blank" rel="noopener"
  >GeoNetwork Community</a>,
  built with
  <a
          href="https://squidfunk.github.io/mkdocs-material/"
          target="_blank" rel="noopener"
  >
    Material for MkDocs
  </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/geonetwork" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/_/geonetwork" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://geonetwork-opensource.org/" target="_blank" rel="noopener" title="GeoNetwork Website" class="md-social__link">
      <?xml version="1.0" encoding="UTF-8"?>
<svg width="300px" height="301px" viewBox="0 0 300 301" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch -->
    <title>gn_logo</title>
    <desc>Created with Sketch.</desc>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="GNlogo" transform="translate(-157.000000, -1.000000)" fill-rule="nonzero">
            <g id="Group" transform="translate(157.000000, 0.105590)">
                <g id="Logo" transform="translate(0.000000, 3.000000)">
                    <path d="M212.641304,294.371739 L212.648758,294.371739 C211.621118,289.141304 184.624845,288.163043 152.745652,288.163043 C107.719565,288.163043 69.957764,281.73354 59.7475155,273.835714 L59.7624224,273.811491 C43.4925466,261.290683 29.876087,245.535093 19.7431677,227.549068 C27.2031056,240.93913 83.907764,251.501553 152.746584,251.501553 C177.136025,251.501553 199.39472,253.253106 216.299068,256.084472 C236.027329,259.390062 248.462422,264.279503 248.462422,269.645963 C248.462422,270.981056 247.693789,272.418634 246.235714,273.668012 L246.233851,274.000621 C235.996584,281.941304 224.719565,287.895652 212.641304,294.371739 Z M274.503727,242.340373 C274.503727,243.565528 274.131056,244.685404 273.408075,245.707453 C284.601242,231.096894 293.863043,214.198137 299.207143,196.107764 C299.464286,195.332609 299.591925,194.480124 299.591925,193.693789 C299.591925,176.150311 233.848137,161.931056 152.745652,161.931056 C69.4229814,161.931056 1.80838509,147.961491 1.80838509,130.421739 L1.79720497,130.077019 C0.69689441,137.475466 0.126708075,145.048137 0.126708075,152.751242 C0.126708075,163.990062 1.34161491,174.948447 3.64658385,185.495031 C6.00745342,196.595031 35.2006211,206.095342 77.6534161,211.368634 C99.7108696,214.112422 125.36646,215.536025 152.745652,215.536025 C219.988509,215.536025 274.503727,227.537888 274.503727,242.340373 Z M183.136025,88.9462733 C184.804658,105.557143 185.843478,123.795652 186.11646,143.003106 C251.136335,139.733851 299.564907,127.125466 299.564907,112.063043 C299.564907,111.274845 299.465217,110.480124 299.207143,109.709627 C293.730745,91.05 284.782919,73.8791925 273.115528,58.9350932 C274.025776,60.2552795 274.502795,61.6080745 274.502795,62.9822981 C274.503727,75.4770186 235.679814,85.9742236 183.136025,88.9462733 Z M152.67205,54.1462733 C144.200311,54.1462733 136.35559,53.9515528 128.525776,53.5779503 C126.538509,64.202795 124.82795,76.1189441 123.537578,89.0086957 C70.4180124,86.1270186 31.0071429,75.5673913 31.0071429,62.9804348 C31.0071429,61.6015528 31.4785714,60.2431677 32.3916149,58.9164596 C20.6487578,73.9555901 11.5462733,91.2186335 6.07919255,110.013354 C5.88074534,110.692547 5.86118012,111.374534 5.86118012,112.06118 C5.86118012,129.601863 72.6959627,143.82205 152.67205,143.82205 L152.67205,54.1462733 Z M209.906832,14.6962733 C209.906832,11.9813665 205.993789,9.46397516 199.340683,7.40590062 L199.348137,7.38167702 C184.654658,2.67950311 168.998758,0.136024845 152.745652,0.136024845 C136.015528,0.136024845 119.920807,2.8257764 104.851863,7.8 L104.859317,7.82049689 C98.9953416,9.7984472 95.5863354,12.1611801 95.5863354,14.6962733 C95.5863354,21.6447205 121.174845,27.2822981 152.746584,27.2822981 C184.311801,27.2822981 209.906832,21.6437888 209.906832,14.6962733 Z" id="Shape"  fill="#BABABA"></path>
                </g>
            </g>
        </g>
    </g>
</svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.view", "content.action.edit", "content.code.copy", "content.tabs.link", "navigation.tabs", "navigation.tracking", "navigation.prune", "navigation.indexes", "toc.follow", "navigation.top", "navigation.footer", "announce.dismiss"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>