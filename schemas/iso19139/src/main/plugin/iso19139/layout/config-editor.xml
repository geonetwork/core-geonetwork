<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (C) 2001-2016 Food and Agriculture Organization of the
  ~ United Nations (FAO-UN), United Nations World Food Programme (WFP)
  ~ and United Nations Environment Programme (UNEP)
  ~
  ~ This program is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation; either version 2 of the License, or (at
  ~ your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but
  ~ WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program; if not, write to the Free Software
  ~ Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
  ~
  ~ Contact: Jeroen Ticheler - FAO - Viale delle Terme di Caracalla 2,
  ~ Rome - Italy. email: geonetwork@osgeo.org
  -->

<editor xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="../../../../../../config-editor.xsd"
        xmlns:gn="http://www.fao.org/geonetwork"
        xmlns:gco="http://www.isotc211.org/2005/gco"
        xmlns:gmd="http://www.isotc211.org/2005/gmd"
        xmlns:gmx="http://www.isotc211.org/2005/gmx"
        xmlns:srv="http://www.isotc211.org/2005/srv"
        xmlns:gml="http://www.opengis.net/gml"
        xmlns:xlink="http://www.w3.org/1999/xlink">

  <!-- Form field type configuration. Default is text. -->
  <fields>
    <for name="gmd:abstract" use="textarea"/>
    <for name="gmd:checkPointDescription" use="textarea"/>
    <for name="gmd:credit" use="textarea"/>
    <for name="gmd:description" use="textarea"/>
    <for name="gmd:evaluationMethodDescription" use="textarea"/>
    <for name="gmd:explanation" use="textarea"/>
    <for name="gmd:handlingDescription" use="textarea"/>
    <for name="gmd:maintenanceNote" use="textarea"/>
    <for name="gmd:measureDescription" use="textarea"/>
    <for name="gmd:purpose" use="textarea"/>
    <for name="gmd:orderingInstructions" use="textarea"/>
    <for name="gmd:otherConstraints" use="textarea"/>
    <for name="gmd:statement" use="textarea"/>
    <for name="gmd:supplementalInformation" use="textarea"/>
    <for name="gmd:specificUsage" use="textarea"/>
    <for name="gmd:userNote" use="textarea"/>
    <for name="gmd:useLimitation" use="textarea"/>
    <for name="gmd:environmentDescription" use="textarea"/>
    <for name="gmd:value" use="textarea"/>


    <for name="gco:Distance" use="number"/>
    <for name="gco:Decimal" use="number"/>
    <for name="gco:Integer" use="number"/>
    <for name="gco:Real" use="number"/>
    <for name="gco:Boolean" use="checkbox"/>


    <for name="gco:Date" use="data-gn-date-picker"/>
    <for name="gco:DateTime" use="data-gn-date-picker"/>



    <!-- gmx:FileName/@src attribute -->
    <for name="src" use="data-gn-logo-selector"/>

    <for name="gmd:electronicMailAddress" use="email"/>

    <for name="gmd:language" use="data-gn-language-picker"/>
    <for name="gmd:languageCode" use="data-gn-language-picker"/>

    <for name="gmd:country" use="data-gn-country-picker"/>

    <for name="gmd:referenceSystemInfo" addDirective="data-gn-crs-selector"/>


    <!--
    This could be an option to use keywords to populate a field
    but we only want this for MEDSEA records and with a specific
    thesaurus. The configuration to create the challenge field
    was done in layout-custom-fields-medsea.xsl.
    <for name="gmd:hierarchyLevelName" use="data-gn-keyword-picker"/>-->
    <!--
    Enable the following to use subtemplates for extent type.
    <for name="gmd:extent" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-template-type="extent"
        data-filter='{"_root": "gmd:EX_Extent"}'
        data-insert-modes=""/>
    </for>

    for formats:
    <for name="gmd:resourceFormat" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="format"
              data-filter='{"_root": "gmd:MD_Format"}'
              data-insert-modes="xlink"/>
    </for>
    <for name="gmd:distributionFormat" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="format"
              data-filter='{"_root": "gmd:MD_Format"}'
              data-insert-modes="xlink"/>
    </for>
    -->

    <for name="gmd:contact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="false"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:pointOfContact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="false"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:distributorContact" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="false"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:processor" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="false"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:citedResponsibleParty" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="false"
        data-popup-action="true"
        data-template-type="contact"
        data-insert-modes=""
        data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
    </for>
    <for name="gmd:report" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
        data-template-add-action="true"
        data-search-action="true"
        data-popup-action="true"
        data-filter='{"_root": "gmd:DQ_DomainConsistency"}'
        data-insert-modes=""
        data-template-type="report"/>
    </for>


    <!-- Example configuration: Add onLine source from subtemplate
    <for name="gmd:onLine" addDirective="data-gn-directory-entry-selector">
      <directiveAttributes
              data-template-add-action="true"
              data-template-type="onLine"
              data-filter='{"_root": "gmd:CI_OnlineResource"}'/>
    </for>
    -->


    <for name="gmd:descriptiveKeywords" addDirective="data-gn-thesaurus-selector">
      <!--
      To restrict the list of thesaurus allowed, set the include attribute
      for the directive:
      <directiveAttributes data-include="external.theme.httpinspireeceuropaeutheme-theme,external.place.regions"/>

      Exclude a thesaurus:
      <directiveAttributes data-include="-external.place.regions"/>

      Exclude all thesaurus already used in the metadata:
      -->
      <directiveAttributes data-include="xpath::string-join(gmd:MD_Metadata/gmd:identificationInfo
                                          //gmd:thesaurusName/*/gmd:identifier/*/
                                            gmd:code/gmx:Anchor/
                                              concat('-', substring-after(text()[. != ''], 'geonetwork.thesaurus.')), ',')"/>
    </for>
  </fields>


  <fieldsWithFieldset>
    <name>gmd:MD_Metadata</name>
    <name>gmd:identificationInfo</name>
    <name>gmd:distributionInfo</name>
    <name>gmd:portrayalCatalogueInfo</name>
    <name>gmd:portrayalCatalogueCitation</name>
    <name>gmd:thesaurusName</name>
    <name>gmd:resourceConstraints</name>
    <name>gmd:spatialRepresentationInfo</name>
    <name>gmd:pointOfContact</name>
    <name>gmd:contact</name>
    <name>gmd:graphicOverview</name>
    <name>gmd:citedResponsibleParty</name>
    <name>gmd:dataQualityInfo</name>
    <name>gmd:contentInfo</name>
    <name>gmd:distributionFormat</name>
    <name>gmd:referenceSystemInfo</name>
    <name>gmd:spatialResolution</name>
    <name>gmd:offLine</name>
    <name>gmd:onLine</name>
    <name>gmd:address</name>
    <name>gmd:projection</name>
    <name>gmd:ellipsoid</name>
    <name>gmd:attributes</name>
    <name>gmd:verticalCRS</name>
    <name>gmd:axisDimensionProperties</name>
    <name>gmd:geographicBox</name>
    <name>gmd:EX_TemporalExtent</name>
    <name>gmd:EX_VerticalExtent</name>
    <name>gmd:MD_Distributor</name>
    <name>srv:containsOperations</name>
    <name>srv:SV_CoupledResource</name>
    <name>gmd:metadataConstraints</name>
    <name>gmd:aggregationInfo</name>
    <name>gmd:processStep</name>
    <name>gmd:lineage</name>
    <name>gmd:centerPoint</name>
    <name>gml:verticalCS</name>
    <name>gml:verticalDatum</name>
    <name>gmd:axisDimensionProperties</name>
    <name>gmd:identifier</name>
    <name>gmd:topicCategory</name>
  </fieldsWithFieldset>

  <multilingualFields>
    <!-- In multilingual mode, define which mode
    the widget should have. If expanded, then one
    field per language is displayed. -->
    <expanded>
      <name>gmd:title</name>
      <name>gmd:abstract</name>
    </expanded>
    <!-- All fields in ISO could be multilingual.
    Define element to exclude.

      The name element can optionally have ancestor, child or parent attributes to
      further restrict the exclusion.  For example if some gmd:code elements are
      multilingual but others are not then adding a parent/child/parent attribute
      can restrict the exclude to only some elements.

      For example:
        <name ancestor="gmd:thesaurusName">gmd:code</name>
        or
        <name child="gmx:Anchor">gmd:code</name>
    -->
    <exclude>
      <name>gmd:identifier</name>
      <name ancestor="gmd:MD_Identifier">gmd:code</name>
      <name>gmd:metadataStandardName</name>
      <name>gmd:metadataStandardVersion</name>
      <name>gmd:hierarchyLevelName</name>
      <name>gmd:parentIdentifier</name>
      <name>gmd:dataSetURI</name>
      <name>gmd:postalCode</name>
      <name>gmd:city</name>
      <name>gmd:language</name>
      <name>gmd:administrativeArea</name>
      <name>gmd:voice</name>
      <name>gmd:facsimile</name>
      <name>gmd:dataset</name>
      <name>gmd:other</name>
      <name>gmd:hoursOfService</name>
      <name>gmd:applicationProfile</name>
      <name>gmd:page</name>
      <name>gmd:date</name>
      <name>gmd:linkage</name>
      <name>gmd:fileName</name>
      <name>gmd:protocol</name>
      <name>gmd:fileType</name>
      <name>gmd:unitsOfDistribution</name>
      <name>gmd:amendmentNumber</name>
      <name>gmd:specification</name>
      <name>gmd:fileDecompressionTechnique</name>
      <name>gmd:turnaround</name>
      <name>gmd:fees</name>
      <name>gmd:userDeterminedLimitations</name>
      <name>gmd:codeSpace</name>
      <name>gmd:version</name>
      <name>gmd:edition</name>
      <name>gmd:ISBN</name>
      <name>gmd:ISSN</name>
      <name>gmd:errorStatistic</name>
      <name>gmd:schemaAscii</name>
      <name>gmd:softwareDevelopmentFileFormat</name>
      <name>gmd:shortName</name>
      <name>gmd:condition</name>
      <name>gmd:maximumOccurence</name>
      <name>gmd:domainValue</name>
      <name>gmd:minimumValue</name>
      <name>gmd:maximumValue</name>
      <name>gmd:densityUnits</name>
      <name>gmd:descriptor</name>
      <name>gmd:denominator</name>
      <name>gmd:classificationSystem</name>
      <name>gmd:checkPointDescription</name>
      <name>gmd:transformationDimensionDescription</name>
      <name>gmd:orientationParameterDescription</name>
      <name>gmd:distance</name>
      <name>srv:name</name>
      <name>srv:invocationName</name>
      <name>srv:serviceTypeVersion</name>
      <name>srv:operationName</name>
      <name>srv:identifier</name>
      <name>srv:serviceType</name>
      <name ancestor="gmd:thesaurusName">gmd:code</name>
      <name ancestor="gmd:aggregateDataSetIdentifier">gmd:code</name>
      <name ancestor="gmd:CI_Citation">gmd:code</name>
    </exclude>
  </multilingualFields>

  <tableFields>
    <table for="gmd:CI_ResponsibleParty">
      <header>
        <!-- TODO: Add label from strings.xml / label with context-->
        <col label="gmd:organisationName"/>
        <col label="gmd:individualName"/>
        <col label="gmd:electronicMailAddress"/>
        <col label="gmd:role"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:organisationName"/>
        <col xpath="gmd:individualName"/>
        <col xpath="gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress"/>
        <col xpath="gmd:role"/>
        <col del=".."/>
      </row>
    </table>
    <table for="gmd:CI_OnlineResource">
      <header>
        <col label="gmd:protocol"/>
        <col label="gmd:linkage"/>
        <col label="gmd:name"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:protocol"/>
        <col xpath="gmd:linkage"/>
        <col xpath="gmd:name"/>
        <col del=".."/>
      </row>
    </table>
    <table for="srv:SV_OperationMetadata">
      <header>
        <col label="srv:operationName"/>
        <col label="srv:DCP"/>
        <col label="srv:connectPoint"/>
        <col/>
      </header>
      <row>
        <col xpath="srv:operationName"/>
        <col xpath="srv:DCP"/>
        <col xpath="srv:connectPoint/gmd:CI_OnlineResource/gmd:linkage"/>
        <col del=".."/>
        <section xpath="srv:SV_OperationMetadata/srv:parameters"
                 or="parameters" in="srv:SV_OperationMetadata"/>
      </row>
    </table>
    <table for="srv:SV_CoupledResource">
      <header>
        <col label="srv:operationName"/>
        <col label="gco:ScopedName"/>
        <col label="srv:identifier"/>
        <col/>
      </header>
      <row>
        <col xpath="srv:operationName"/>
        <col xpath="gco:ScopedName"/>
        <col xpath="srv:identifier"/>
        <col del=".."/>
      </row>
    </table>
    <table for="gmd:MD_Format">
      <header>
        <col label="gmd:name"/>
        <col label="gmd:version"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:name"/>
        <col xpath="gmd:version"/>
        <col del=".."/>
      </row>
    </table>
    <table for="gmd:PT_Locale">
      <header>
        <col label="gmd:languageCode"/>
        <col label="gmd:characterEncoding"/>
        <col/>
      </header>
      <row>
        <col xpath="gmd:languageCode"/>
        <col xpath="gmd:characterEncoding"/>
        <col del=".."/>
      </row>
    </table>
  </tableFields>

  <!-- View configuration -->
  <views>
    <view name="sextant"
          upAndDownControlHidden="true"
          displayIfRecord="contains(
                            gmd:MD_Metadata/gmd:metadataStandardName/gco:CharacterString,
                            'ISO 19115:2003/19139 - SEXTANT')">

      <thesaurusList>
        <thesaurus key="external.theme.httpinspireeceuropaeutheme-theme" maxtags="1"/>
        <thesaurus key="local.theme.sextant-theme" maxtags="1"/>
      </thesaurusList>

      <sidePanel>
        <directive data-gn-onlinesrc-list=""/>
        <directive data-gn-validation-report=""/>
        <directive data-gn-suggestion-list=""/>
        <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
      </sidePanel>

      <tab id="sextant-identification" mode="flat" default="true">
        <section name="sextantidentificationTitle">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:title"
                 name="sextant-title"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:abstract"
                 name="sextant-abstract"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:identifier/*/gmd:code"
                 name="sextant-identifier"/>

          <action type="add" name="sextant-identifier" or="identifier"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/gmd:CI_Citation"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:identifier) = 0">
            <template>
              <snippet>
                <gmd:identifier>
                  <gmd:MD_Identifier>
                    <gmd:code>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:code>
                  </gmd:MD_Identifier>
                </gmd:identifier>
              </snippet>
            </template>
          </action>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:language"/>
          <!--<field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:characterSet"/>-->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:credit"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:date"
                 or="date"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*"
                 name="sextant-date-resource"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialResolution/*/gmd:distance"
                 del="../.."/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialResolution/*/gmd:equivalentScale/*/gmd:denominator"
                 del="../../../.."/>


          <action type="add" btnLabel="sextant-add-scale" or="spatialResolution"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo[*/gmd:spatialRepresentationType/*/@codeListValue = 'vector']) = 1">
            <template>
              <snippet>
                <gmd:spatialResolution>
                  <gmd:MD_Resolution>
                    <gmd:equivalentScale>
                      <gmd:MD_RepresentativeFraction>
                        <gmd:denominator>
                          <gco:Integer/>
                        </gmd:denominator>
                      </gmd:MD_RepresentativeFraction>
                    </gmd:equivalentScale>
                  </gmd:MD_Resolution>
                </gmd:spatialResolution>
              </snippet>
            </template>
          </action>

          <action type="add" btnLabel="sextant-add-resolution" or="spatialResolution"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo[*/gmd:spatialRepresentationType/*/@codeListValue = 'grid']) = 1">
            <template>
              <snippet>
                <gmd:spatialResolution>
                  <gmd:MD_Resolution>
                    <gmd:distance>
                      <gco:Distance uom=""/>
                    </gmd:distance>
                  </gmd:MD_Resolution>
                </gmd:spatialResolution>
              </snippet>
            </template>
          </action>


          <field xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/*/gmd:geometricObjects/*/gmd:geometricObjectType"/>
        </section>



        <section name="sextantkeywordTitle">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:topicCategory"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text() = 'geonetwork.thesaurus.local.theme.sextant-theme']"
                 name="sextant-theme"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text() = 'geonetwork.thesaurus.external.theme.httpinspireeceuropaeutheme-theme']"
                 name="inspireTheme"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                          */gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text() !=
                            'geonetwork.thesaurus.local.theme.sextant-theme' and
                          */gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text() !=
                            'geonetwork.thesaurus.external.theme.httpinspireeceuropaeutheme-theme']"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[not(*/gmd:thesaurusName)]"
                 or="descriptiveKeywords"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*"/>
        </section>

      </tab>
      <tab id="sextant-contact" mode="flat">
        <section name="sextantrespOrgaTitle">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:pointOfContact"/>

          <action type="add"
                  name="pointOfContact"
                  addDirective="data-gn-directory-entry-selector"
                  or="pointOfContact"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*">
            <directiveAttributes
              data-template-add-action="true"
              data-template-type="contact"
              data-search-action="false"
              data-popup-action="true"
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
          </action>
        </section>
      </tab>
      <tab id="sextant-spatial" mode="flat">

        <section name="sextantgeoLocationTitle">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*/gmd:geographicElement/*"/>

          <field xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo"
                 or="referenceSystemInfo"
                 in="/gmd:MD_Metadata"/>
        </section>

        <section name="sextanttempRefTitle">

          <field name="temporalRangeSection"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*/gmd:temporalElement">
            <template>
              <values>
                <!-- -Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gmd:extent|gmd:EX_TemporalExtent">
                  <directiveAttributes data-tag-name="gml:beginPosition"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gmd:extent|gmd:EX_TemporalExtent"
                >
                  <directiveAttributes
                    data-tag-name="gml:endPosition"
                    data-indeterminate-position="eval#gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition/@indeterminatePosition"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>


          <action type="add" name="temporalRangeSection" or="temporalElement"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        <gml:beginPosition/>
                        <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

        </section>
      </tab>
      <tab id="sextant-usage" mode="flat">
        <section name="sextantlimitationsTitle">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:useLimitation"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:useConstraints"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"/>
        </section>
      </tab>
      <tab id="sextant-quality" mode="flat">
        <section name="sextantqualityTitle">
          <field xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:lineage/*/gmd:statement"/>
          <field xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:lineage/*/gmd:processStep"
                 or="processStep" in="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:lineage/*"/>
        </section>

        <!--<section name="sextantconformityTitle">
          <field xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report[
                              .//gmd:specification/*/gmd:title/gco:CharacterString[contains(text(), '1089/2010')]
                              ]" />

          <action type="add"
                  btnLabel="isINSPIREConform"
                  btnClass="fa fa-thumbs-o-up text-success"
                  or="report"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality"
                  if="count(gmd:MD_Metadata/gmd:dataQualityInfo//gmd:DQ_DomainConsistency[
                              .//gmd:specification/*/gmd:title/gco:CharacterString[contains(text(), '1089/2010')]
                              ]) = 0">
            <template>
              <snippet>
                <gmd:report>
                  <gmd:DQ_DomainConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gco:CharacterString>COMMISSION REGULATION (EU) No 1089/2010 of 23 November 2010 implementing Directive 2007/2/EC of the European Parliament and of the Council as regards interoperability of spatial data sets and services</gco:CharacterString>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date>2010-11-23</gco:Date>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                       codeListValue="publication"/>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString>Conforme à la spécification Inspire</gco:CharacterString>
                        </gmd:explanation>
                        <gmd:pass>
                          <gco:Boolean>true</gco:Boolean>
                        </gmd:pass>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_DomainConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>

          <action type="add"
                  btnLabel="isNotINSPIREConform"
                  btnClass="fa fa-thumbs-o-down text-danger"
                  or="report"
                  in="/gmd:MD_Metadata/gmd:dataQualityInfo/gmd:DQ_DataQuality"
                  if="count(gmd:MD_Metadata/gmd:dataQualityInfo//gmd:DQ_DomainConsistency[
                              .//gmd:specification/*/gmd:title/gco:CharacterString[contains(text(), '1089/2010')]
                              ]) = 0">
            <template>
              <snippet>

                <gmd:report>
                  <gmd:DQ_DomainConsistency>
                    <gmd:result>
                      <gmd:DQ_ConformanceResult>
                        <gmd:specification>
                          <gmd:CI_Citation>
                            <gmd:title>
                              <gco:CharacterString>COMMISSION REGULATION (EU) No 1089/2010 of 23 November 2010 implementing Directive 2007/2/EC of the European Parliament and of the Council as regards interoperability of spatial data sets and services</gco:CharacterString>
                            </gmd:title>
                            <gmd:date>
                              <gmd:CI_Date>
                                <gmd:date>
                                  <gco:Date>2010-11-23</gco:Date>
                                </gmd:date>
                                <gmd:dateType>
                                  <gmd:CI_DateTypeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#CI_DateTypeCode"
                                                       codeListValue="publication"/>
                                </gmd:dateType>
                              </gmd:CI_Date>
                            </gmd:date>
                          </gmd:CI_Citation>
                        </gmd:specification>
                        <gmd:explanation>
                          <gco:CharacterString>Non conforme à la spécification Inspire</gco:CharacterString>
                        </gmd:explanation>
                        <gmd:pass>
                          <gco:Boolean>false</gco:Boolean>
                        </gmd:pass>
                      </gmd:DQ_ConformanceResult>
                    </gmd:result>
                  </gmd:DQ_DomainConsistency>
                </gmd:report>
              </snippet>
            </template>
          </action>
        </section>-->
      </tab>
      <tab id="sextant-metadata" mode="flat">
        <section name="sextantmetadataInfoTitle">
          <field xpath="/gmd:MD_Metadata/gmd:language"/>

          <field name="locale"
                 xpath="/gmd:MD_Metadata/gmd:locale[*/gmd:languageCode/*/@codeListValue != ancestor::gmd:MD_Metadata/gmd:language/*/@codeListValue]" or="locale" in="/gmd:MD_Metadata"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 del=".">
            <template>
              <values>
                <key label="locale"
                     use="data-gn-language-picker"
                     xpath="gmd:PT_Locale/gmd:languageCode/gmd:LanguageCode/@codeListValue"/>
              </values>
              <snippet>
                <gmd:locale>
                  <gmd:PT_Locale>
                    <gmd:languageCode>
                      <gmd:LanguageCode codeList="" codeListValue="{{locale}}"/>
                    </gmd:languageCode>
                    <gn:copy select="gmd:characterEncoding"/>
                  </gmd:PT_Locale>
                </gmd:locale>
              </snippet>
            </template>
          </field>

          <action type="add" name="locale" or="locale"
                  in="/gmd:MD_Metadata">
            <template>
              <snippet>
                <gmd:locale>
                  <gmd:PT_Locale>
                    <gmd:languageCode>
                      <gmd:LanguageCode codeList="" codeListValue=""/>
                    </gmd:languageCode>
                    <gmd:characterEncoding>
                      <gmd:MD_CharacterSetCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_CharacterSetCode"
                                               codeListValue="utf8"/>
                    </gmd:characterEncoding>
                  </gmd:PT_Locale>
                </gmd:locale>
              </snippet>
            </template>
          </action>

          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel"/>

          <field xpath="/gmd:MD_Metadata/gmd:contact"/>

          <action type="add" name="metadataPointOfContact"
                  addDirective="data-gn-directory-entry-selector"
                  or="contact"
                  in="/gmd:MD_Metadata">
            <directiveAttributes
              data-template-add-action="true"
              data-search-action="false"
              data-popup-action="true"
              data-template-type="contact"
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
          </action>

          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
        </section>
      </tab>

      <flatModeExceptions>
        <for name="gmd:keyword"/>
      </flatModeExceptions>
    </view>
    <view name="default" disabled="true">
      <sidePanel>
        <directive data-gn-onlinesrc-list=""/>
        <directive data-gn-validation-report=""/>
        <directive data-gn-suggestion-list=""/>
        <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
      </sidePanel>
      <tab id="default" default="true" mode="flat">
        <section xpath="/gmd:MD_Metadata/gmd:identificationInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:distributionInfo"/>
        <section xpath="/gmd:MD_Metadata/gmd:dataQualityInfo"/>
        <section name="gmd:MD_Metadata">
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
          <field xpath="/gmd:MD_Metadata/gmd:language" or="language" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:locale[*/gmd:languageCode/*/@codeListValue != ancestor::gmd:MD_Metadata/gmd:language/*/@codeListValue]" or="locale" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:characterSet"/>
          <field xpath="/gmd:MD_Metadata/gmd:parentIdentifier" or="parentIdentifier"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel" or="hierarchyLevel"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevelName" or="hierarchyLevelName"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
          <field xpath="/gmd:MD_Metadata/gmd:contact" or="contact" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dataSetURI" or="dataSetURI" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:series"/>
          <field xpath="/gmd:MD_Metadata/gmd:describes"/>
          <field xpath="/gmd:MD_Metadata/gmd:propertyType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureAttribute"/>
        </section>
      </tab>

      <!-- Elements that should not use the "flat" mode -->
      <flatModeExceptions>
        <for name="gmd:descriptiveKeywords" />
        <for name="gmd:keyword"/>
        <for name="gmd:spatialResolution"/>
        <for name="gmd:pointOfContact"/>
        <for name="gmd:distributor"/>
        <for name="gmd:distributionFormat"/>
        <for name="gmd:contact"/>
        <for name="gmd:processor"/>
        <for name="gmd:topicCategory"/>
        <for name="srv:parameters"/>
      </flatModeExceptions>

      <!--
      To configure the type of transformations
      or the number of keyword allowed for e
      thesaurus define a specific configuration:

      eg. only 2 INSPIRE themes with Anchor.

      <thesaurusList>
        <thesaurus key="external.theme.httpinspireeceuropaeutheme-theme"
                   maxtags="2"
                   fieldset="false"
                   transformations="to-iso19139-keyword-with-anchor"/>
      </thesaurusList>
      -->

      <thesaurusList>
        <thesaurus key="external.none.allThesaurus"
                   fieldset="false"/>
      </thesaurusList>

    </view>
    <view name="advanced">
      <sidePanel>
        <directive data-gn-onlinesrc-list=""/>
        <directive data-gn-validation-report=""/>
        <directive data-gn-suggestion-list=""/>
        <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
      </sidePanel>

      <tab id="identificationInfo" default="true">
        <section xpath="/gmd:MD_Metadata/gmd:identificationInfo" or="identificationInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="distributionInfo">
        <section xpath="/gmd:MD_Metadata/gmd:distributionInfo" or="distributionInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="dataQualityInfo">
        <section xpath="/gmd:MD_Metadata/gmd:dataQualityInfo" or="dataQualityInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="spatialRepresentationInfo">
        <section xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo"
                 or="spatialRepresentationInfo" in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="referenceSystemInfo">
        <section xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo" or="referenceSystemInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="contentInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:contentInfo" or="contentInfo" in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="portrayalCatalogueInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:portrayalCatalogueInfo" or="portrayalCatalogueInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="metadata">
        <section name="gmd:MD_Metadata">
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
          <field xpath="/gmd:MD_Metadata/gmd:language" or="language" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:locale" or="locale" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:characterSet"/>
          <field xpath="/gmd:MD_Metadata/gmd:parentIdentifier" or="parentIdentifier"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel" or="hierarchyLevel"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevelName" or="hierarchyLevelName"
                 in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardName"/>
          <field xpath="/gmd:MD_Metadata/gmd:metadataStandardVersion"/>
          <field xpath="/gmd:MD_Metadata/gmd:contact" or="contact" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:dataSetURI" or="dataSetURI" in="/gmd:MD_Metadata"/>
          <field xpath="/gmd:MD_Metadata/gmd:series"/>
          <field xpath="/gmd:MD_Metadata/gmd:describes"/>
          <field xpath="/gmd:MD_Metadata/gmd:propertyType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureType"/>
          <field xpath="/gmd:MD_Metadata/gmd:featureAttribute"/>
        </section>
      </tab>
      <tab id="metadataConstraints" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:metadataConstraints" or="metadataConstraints"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="metadataMaintenance" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:metadataMaintenance" or="metadataMaintenance"
                 in="/gmd:MD_Metadata"/>
      </tab>
      <tab id="applicationSchemaInfo" toggle="true">
        <section xpath="/gmd:MD_Metadata/gmd:applicationSchemaInfo" or="applicationSchemaInfo"
                 in="/gmd:MD_Metadata"/>
      </tab>
    </view>
    <!--
       Emodnet view
       https://forge.ifremer.fr/mantis/view.php?id=24534
       https://forge.ifremer.fr/mantis/view.php?id=35695
       -->
    <view name="emodnetHydrography"
          hideTimeInCalendar="true"
          upAndDownControlHidden="true"
          displayIfRecord="contains(gmd:MD_Metadata/gmd:metadataStandardName/gco:CharacterString,
          'EMODNET - BATHYMETRY')">

      <thesaurusList>
        <thesaurus key="external.theme.NVS.L23"
                   fieldset="false" maxtags="1"
                   transformations="to-iso19139-keyword"/>
        <thesaurus key="external.theme.NVS.L05"
                   fieldset="false"
                   transformations="to-iso19139-keyword"/>
        <thesaurus key="external.theme.NVS.L05POS"
                   fieldset="false"
                   transformations="to-iso19139-keyword"/>
        <thesaurus key="local.theme.emodnet-bathymetry.QI.Horizontal"
                   fieldset="false" maxtags="1" orderById="true"
                   transformations="to-iso19139-keyword"/>
        <thesaurus key="local.theme.emodnet-bathymetry.QI.Vertical"
                   fieldset="false" maxtags="1" orderById="true"
                   transformations="to-iso19139-keyword"/>
        <thesaurus key="local.theme.emodnet-bathymetry.QI.Purpose"
                   fieldset="false" maxtags="1" orderById="true"
                   transformations="to-iso19139-keyword"/>
        <thesaurus key="external.parameter.NVS.P02"
                   fieldset="false"
                   transformations="to-iso19139-keyword"/>
        <thesaurus key="local.theme.emodnet-bathymetry.projectname"
                   fieldset="false" maxtags="1"
                   transformations="to-iso19139-keyword"/>
      </thesaurusList>

      <sidePanel>
        <directive data-gn-onlinesrc-list=""/>
        <directive data-gn-validation-report=""/>
        <directive data-gn-suggestion-list=""/>
        <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
      </sidePanel>

      <tab id="emodnetHydrography-what"
           mode="flat"
           default="true">

        <section name="emodnetMetadataInfo">
          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>

          <field name="emodnetCatalogueType"
                 xpath="/gmd:MD_Metadata/gmd:hierarchyLevelName"/>
          <!-- See layout-cutom-fields-emdonet for thesaurus completion init. -->

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                gmd:descriptiveKeywords
                [contains(*/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                'thesaurus.local.theme.emodnet-bathymetry.projectname')]"/>

          <field name="emodnetDisseminationLevel"
                 xpath="/gmd:MD_Metadata/gmd:metadataConstraints/gmd:MD_LegalConstraints/gmd:useLimitation"/>

          <field xpath="/gmd:MD_Metadata/gmd:language"/>

          <field xpath="/gmd:MD_Metadata/gmd:dateStamp"/>

          <!--<field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>-->
          <section name="emodnetIdentificationTitle">

            <field name="emodnetName"
                   xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:title"/>

            <field name="emodnetShortName"
                   xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:identifier/*/gmd:code"/>

          </section>
        </section>


        <section>


          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                          contains(
                            gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                            'NVS.P02')]"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                          ends-with(
                            gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                            'NVS.L05')]"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                          contains(
                            gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                            'NVS.L05POS')]"/>

        </section>


        <section name="emodnetGeomTitle">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType"/>

          <field name="emodnetNbColumnsTitle"
                 xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/
                          gmd:MD_Georectified/gmd:axisDimensionProperties/
                            gmd:MD_Dimension[gmd:dimensionName/gmd:MD_DimensionNameTypeCode/
                                  @codeListValue = 'column']/gmd:dimensionSize"/>

          <field name="emodnetNbLinesTitle"
                 xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/
                          gmd:MD_Georectified/gmd:axisDimensionProperties/
                            gmd:MD_Dimension[gmd:dimensionName/gmd:MD_DimensionNameTypeCode/
                                  @codeListValue = 'row']/gmd:dimensionSize"/>

          <field name="emodnetPixelOrigin"
                 xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/
                          gmd:MD_Georectified/gmd:pointInPixel/
                            gmd:MD_PixelOrientationCode"/>

          <field name="emodnetSpatialResolution"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:spatialResolution/*/gmd:distance"/>

          <field name="emodnetScaleDenominator"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:spatialResolution/gmd:MD_Resolution/
                            gmd:equivalentScale/gmd:MD_RepresentativeFraction/
                              gmd:denominator"/>

        </section>


        <section name="emodnetAbstractTitle">
          <field name="emodnetAbs"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:abstract"/>

          <!--
          Replaced by L05
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                          contains(
                            gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                            'L054')]"/>

          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                          contains(
                            gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                            'L056')]"/>
-->
          <field name="emodnetDataSourcesTitle"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:lineage/*/
                          gmd:source/*/gmd:description"/>

          <field name="emodnetDataProcessingTitle"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:lineage/*[gmd:source]/
                          gmd:statement"/>

          <field name="emodnetProcessingSoftware"
                 xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:scope/*[
                 gmd:level/gmd:MD_ScopeCode/@codeListValue = 'software']/
                          gmd:extent/*/gmd:description"/>

        </section>

      </tab>


      <tab id="emodnetHydrography-details"
           mode="flat">

        <section name="emodnetQualityTitle">
          <section name="emodnetHorAccuracyTitle">
            <field xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report/
                          gmd:DQ_GriddedDataPositionalAccuracy/gmd:measureDescription"/>
            <field xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report/
                          gmd:DQ_GriddedDataPositionalAccuracy/gmd:result/*/gmd:value"/>
            <field xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report/
                          gmd:DQ_GriddedDataPositionalAccuracy/gmd:evaluationMethodDescription"/>

          </section>

          <section name="emodnetVertAccuracyTitle">
            <field xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report/
                            gmd:DQ_QuantitativeAttributeAccuracy/gmd:measureDescription"/>
            <field xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report/
                            gmd:DQ_QuantitativeAttributeAccuracy/gmd:evaluationMethodDescription"/>

          </section>

          <section name="emodnetShoalBias">

            <field name="emodnetShoalBias"
                   xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report/
                          gmd:DQ_NonQuantitativeAttributeAccuracy/gmd:result/
                           *[gmd:specification/*/gmd:title = 'Shoal bias']/
                              gmd:pass"/>
            <field name="emodnetShoalBiasDetails"
                   xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report/
                            gmd:DQ_NonQuantitativeAttributeAccuracy/gmd:result/
                           *[gmd:specification/*/gmd:title = 'Shoal bias']/
                                gmd:explanation"/>
          </section>

          <section name="emodnetSuitabilty">
            <field name="emodnetSuitabilityTitle"
                   xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"/>
          </section>

          <section name="emodnetQualityIndicator">

            <!-- Previously stored in simple keyword
            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                          contains(
                            gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                            'EMODNET_QI_Horizontal')]"/>

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                          contains(
                            gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                            'EMODNET_QI_Vertical')]"/>

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                          contains(
                            gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                            'EMODNET_QI_Purpose')]"/>
-->
            <!--
            Then in quality reports
            <gmd:report>
              <gmd:DQ_AbsoluteExternalPositionalAccuracy>
                <gmd:nameOfMeasure>
                  <gco:CharacterString>EMODNET_QI_Horizontal</gco:CharacterString>
                </gmd:nameOfMeasure>
                <gmd:result>
                  <gmd:DQ_QuantitativeResult>
                    <gmd:value>
                      <gco:Record/>
                    </gmd:value>
                  </gmd:DQ_QuantitativeResult>
                </gmd:result>
              </gmd:DQ_AbsoluteExternalPositionalAccuracy>
            </gmd:report>
            -->
            <field xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report[
                          contains(
                            */gmd:nameOfMeasure/*/text(),
                            'emodnet-bathymetry.QI.')]"/>

            <action type="add"
                    name="emodnetAddQualityIndicators"
                    or="dataQualityInfo"
                    in="/gmd:MD_Metadata"
                    if="count(gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:report[
                          contains(
                            */gmd:nameOfMeasure/*/text(),
                            'emodnet-bathymetry.QI.')]) = 0">
              <template>
                <snippet>
                  <gmd:dataQualityInfo>
                    <gmd:DQ_DataQuality>
                      <gmd:scope>
                        <gmd:DQ_Scope>
                          <gmd:level>
                            <gmd:MD_ScopeCode codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_ScopeCode"
                                              codeListValue="dataset"/>
                          </gmd:level>
                        </gmd:DQ_Scope>
                      </gmd:scope>
                      <gmd:report>
                        <gmd:DQ_AbsoluteExternalPositionalAccuracy>
                          <gmd:nameOfMeasure>
                            <gco:CharacterString>emodnet-bathymetry.QI.Horizontal</gco:CharacterString>
                          </gmd:nameOfMeasure>
                          <gmd:result>
                            <gmd:DQ_QuantitativeResult>
                              <gmd:value>
                                <gco:Record/>
                              </gmd:value>
                            </gmd:DQ_QuantitativeResult>
                          </gmd:result>
                        </gmd:DQ_AbsoluteExternalPositionalAccuracy>
                      </gmd:report>
                      <gmd:report>
                        <gmd:DQ_AbsoluteExternalPositionalAccuracy>
                          <gmd:nameOfMeasure>
                            <gco:CharacterString>emodnet-bathymetry.QI.Vertical</gco:CharacterString>
                          </gmd:nameOfMeasure>
                          <gmd:result>
                            <gmd:DQ_QuantitativeResult>
                              <gmd:value>
                                <gco:Record/>
                              </gmd:value>
                            </gmd:DQ_QuantitativeResult>
                          </gmd:result>
                        </gmd:DQ_AbsoluteExternalPositionalAccuracy>
                      </gmd:report>
                      <gmd:report>
                        <gmd:DQ_DomainConsistency>
                          <gmd:nameOfMeasure>
                            <gco:CharacterString>emodnet-bathymetry.QI.Purpose</gco:CharacterString>
                          </gmd:nameOfMeasure>
                          <gmd:result>
                            <gmd:DQ_QuantitativeResult>
                              <gmd:value>
                                <gco:Record/>
                              </gmd:value>
                            </gmd:DQ_QuantitativeResult>
                          </gmd:result>
                        </gmd:DQ_DomainConsistency>
                      </gmd:report>
                    </gmd:DQ_DataQuality>
                  </gmd:dataQualityInfo>
                </snippet>
              </template>
            </action>
          </section>
        </section>
      </tab>

      <tab id="emodnetHydrography-where"
           mode="flat">
        <section>
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:extent/*/gmd:geographicElement/
                            gmd:EX_GeographicBoundingBox"/>

          <field
            name="minDepth"
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                gmd:extent/gmd:EX_Extent/
                gmd:verticalElement/gmd:EX_VerticalExtent/gmd:minimumValue"/>

          <field
            name="maxDepth"
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                gmd:extent/gmd:EX_Extent/
                gmd:verticalElement/gmd:EX_VerticalExtent/gmd:maximumValue"/>

          <field
            name="minDepth"
            xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/
                gmd:scope/*[gmd:level/*/@codeListValue = 'dataset']/gmd:extent/gmd:EX_Extent/
                gmd:verticalElement/gmd:EX_VerticalExtent/gmd:minimumValue"/>

          <field
            name="maxDepth"
            xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/
                gmd:scope/*[gmd:level/*/@codeListValue = 'dataset']/gmd:extent/gmd:EX_Extent/
                gmd:verticalElement/gmd:EX_VerticalExtent/gmd:maximumValue"/>



          <field name="rsIdentifier" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo/gmd:MD_ReferenceSystem/gmd:referenceSystemIdentifier"
                 del="../..">
            <template>
              <values>
                <key label="code"
                     xpath="gmd:RS_Identifier/gmd:code/gco:CharacterString"
                     tooltip="gmd:MD_ReferenceSystem"/>
                <key label="emodnetCRSversion"
                     xpath="gmd:RS_Identifier/gmd:version/gco:CharacterString"/>
              </values>
              <snippet>
                <gmd:referenceSystemIdentifier>
                  <gmd:RS_Identifier>
                    <gn:copy select="gmd:authority"/>
                    <gmd:code>
                      <gco:CharacterString>{{code}}</gco:CharacterString>
                    </gmd:code>
                    <gn:copy select="gmd:codeSpace"/>
                    <gmd:version>
                      <gco:CharacterString>{{emodnetCRSversion}}</gco:CharacterString>
                    </gmd:version>
                  </gmd:RS_Identifier>
                </gmd:referenceSystemIdentifier>
              </snippet>
            </template>
          </field>

          <action type="add"
                  btnLabel="addCrs"
                  name="referenceSystemInfo" or="referenceSystemInfo"
                  in="/gmd:MD_Metadata">
            <template>
              <snippet label="addCrs4326">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString>WGS 84 (EPSG:4326)</gco:CharacterString>
                        </gmd:code>
                        <gmd:codeSpace>
                          <gco:CharacterString>EPSG</gco:CharacterString>
                        </gmd:codeSpace>
                        <gmd:version>
                          <gco:CharacterString>7.4</gco:CharacterString>
                        </gmd:version>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs4258">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString>ETRS89 (EPSG:4258)</gco:CharacterString>
                        </gmd:code>
                        <gmd:codeSpace>
                          <gco:CharacterString>EPSG</gco:CharacterString>
                        </gmd:codeSpace>
                        <gmd:version>
                          <gco:CharacterString>8.6</gco:CharacterString>
                        </gmd:version>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs3035">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString>ETRS89 / LAEA Europe (EPSG:3035)</gco:CharacterString>
                        </gmd:code>
                        <gmd:codeSpace>
                          <gco:CharacterString>EPSG</gco:CharacterString>
                        </gmd:codeSpace>
                        <gmd:version>
                          <gco:CharacterString>8.6</gco:CharacterString>
                        </gmd:version>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs3395">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString>WGS 84 / World Mercator (EPSG:3395)</gco:CharacterString>
                        </gmd:code>
                        <gmd:codeSpace>
                          <gco:CharacterString>EPSG</gco:CharacterString>
                        </gmd:codeSpace>
                        <gmd:version>
                          <gco:CharacterString>8.6</gco:CharacterString>
                        </gmd:version>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs3395Custom">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString>WGS 84 / World Mercator (EPSG:3395)</gco:CharacterString>
                        </gmd:code>
                        <gmd:version>
                          <gco:CharacterString>
                            Map projection parameters, values and units :
                            Axes units :
                          </gco:CharacterString>
                        </gmd:version>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>

          <action type="add" name="rsIdentifier" addDirective="data-gn-crs-selector"
                  or="referenceSystemInfo" in="/gmd:MD_Metadata">
            <template>
              <snippet>
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString/>
                        </gmd:code>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                          contains(
                            gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                            'L11')]"/>

        </section>
      </tab>


      <tab id="emodnetHydrography-when"
           mode="flat">
        <section>
          <field name="creationDate" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/
                    gmd:date[*/gmd:dateType/*/@codeListValue = 'creation']">
            <template>
              <values>
                <key label="date"
                     xpath="gmd:CI_Date/gmd:date/*"
                     use="gn-date-picker"
                     tooltip="gmd:date||/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date"/>
              </values>
              <snippet>
                <gmd:date>
                  <gmd:CI_Date>
                    <gmd:date>{{date}}</gmd:date>
                    <gmd:dateType>
                      <gmd:CI_DateTypeCode
                        codeList="http://www.isotc211.org/2005/resources/codeList.xml#CI_DateTypeCode"
                        codeListValue="creation"/>
                    </gmd:dateType>
                  </gmd:CI_Date>
                </gmd:date>
              </snippet>
            </template>
          </field>


          <field name="revisionDate" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/
                    gmd:date[*/gmd:dateType/*/@codeListValue = 'revision']">
            <template>
              <values>
                <key label="date"
                     xpath="gmd:CI_Date/gmd:date/*"
                     use="gn-date-picker"
                     tooltip="gmd:date||/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:date/gmd:CI_Date/gmd:date"/>
              </values>
              <snippet>
                <gmd:date>
                  <gmd:CI_Date>
                    <gmd:date>{{date}}</gmd:date>
                    <gmd:dateType>
                      <gmd:CI_DateTypeCode
                        codeList="http://www.isotc211.org/2005/resources/codeList.xml#CI_DateTypeCode"
                        codeListValue="revision"/>
                    </gmd:dateType>
                  </gmd:CI_Date>
                </gmd:date>
              </snippet>
            </template>
          </field>

          <field name="temporalExtent" templateModeOnly="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent/gmd:EX_Extent/gmd:temporalElement"
                 if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification) > 0">
            <template>
              <values>
                <!-- -Need a *  or // for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod//gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gmd:extent|gmd:EX_TemporalExtent">
                  <directiveAttributes data-tag-name="gml:beginPosition"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod//gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gmd:extent|gmd:EX_TemporalExtent"
                >
                  <directiveAttributes
                    data-tag-name="gml:endPosition"
                    data-indeterminate-position="eval#gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition/@indeterminatePosition"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>


          <field
            name="measureFreq"
            xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/gmd:MD_Georectified/
                gmd:axisDimensionProperties/gmd:MD_Dimension/gmd:resolution"/>
        </section>


      </tab>


      <tab id="emodnetHydrography-who"
           mode="flat">
        <section>
          <field name="emodnetOriginatorTitle"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:pointOfContact[*/gmd:role/*/@codeListValue = 'originator']"
                 del=".">
            <template>
              <values readonlyIf="count(@xlink:href) > 0">
                <key label="organisationName"
                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                <key label="country"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                            gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:country/gco:CharacterString"/>
                <key label="electronicMailAddress"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                  gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                     use="email"/>
                <key label="edmoId"
                     xpath="*[1]/@uuid"/>
              </values>
              <snippet>
                <gmd:contact>
                  <gmd:CI_ResponsibleParty uuid="{{edmoId}}">
                    <gn:copy select="gmd:individualName"/>
                    <gmd:organisationName>
                      <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                    </gmd:organisationName>
                    <gn:copy select="gmd:positionName"/>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gn:copy select="gmd:phone"/>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gn:copy select="gmd:deliveryPoint"/>
                            <gn:copy select="gmd:city"/>
                            <gn:copy select="gmd:administrativeArea"/>
                            <gn:copy select="gmd:postalCode"/>
                            <!--<gn:copy select="gmd:country"/>-->
                            <gmd:country>
                              <gco:CharacterString>{{country}}</gco:CharacterString>
                            </gmd:country>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                        <gn:copy select="gmd:onlineResource"/>
                        <gn:copy select="gmd:hoursOfService"/>
                        <gn:copy select="gmd:contactInstructions"/>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gn:copy select="gmd:role"/>
                  </gmd:CI_ResponsibleParty>
                </gmd:contact>
              </snippet>
            </template>
          </field>

          <!-- TODO: check cardinality
          if="count(gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification/gmd:pointOfContact[gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode/@codeListValue = 'originator']) = 0"
          -->
          <action type="add"
                  name="emodnetOriginatorTitle"
                  forceLabel="true"
                  addDirective="data-gn-directory-entry-selector"
                  or="pointOfContact"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <!-- TODO: filter on a group  ?
            data-filter='{"_groupPublished": "CONTACTS_EDMERP"}' -->
            <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-filter='{"_groupPublished": "CONTACTS_EDMO"}'
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~originator"/>
          </action>



          <field name="emodnetDataHoldingCenterTitle"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:pointOfContact[*/gmd:role/*/@codeListValue = 'custodian']"
                 del=".">
            <template>
              <values readonlyIf="count(@xlink:href) > 0">
                <key label="organisationName"
                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                <key label="country"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                            gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:country/gco:CharacterString"/>
                <key label="electronicMailAddress"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                  gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                     use="email"/>
                <key label="edmoId"
                     xpath="gmd:CI_ResponsibleParty/@uuid[starts-with(., 'http')]"/>
              </values>
              <snippet>
                <gmd:contact>
                  <gmd:CI_ResponsibleParty uuid="{{edmoId}}">
                    <gn:copy select="gmd:individualName"/>
                    <gmd:organisationName>
                      <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                    </gmd:organisationName>
                    <gn:copy select="gmd:positionName"/>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gn:copy select="gmd:phone"/>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gn:copy select="gmd:deliveryPoint"/>
                            <gn:copy select="gmd:city"/>
                            <gn:copy select="gmd:administrativeArea"/>
                            <gn:copy select="gmd:postalCode"/>
                            <!--<gn:copy select="gmd:country"/>-->
                            <gmd:country>
                              <gco:CharacterString>{{country}}</gco:CharacterString>
                            </gmd:country>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                        <gn:copy select="gmd:onlineResource"/>
                        <gn:copy select="gmd:hoursOfService"/>
                        <gn:copy select="gmd:contactInstructions"/>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gn:copy select="gmd:role"/>
                  </gmd:CI_ResponsibleParty>
                </gmd:contact>
              </snippet>
            </template>
          </field>

          <action type="add"
                  name="emodnetDataHoldingCenterTitle"
                  addDirective="data-gn-directory-entry-selector"
                  forceLabel="true"
                  or="pointOfContact"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-filter='{"_groupPublished": "CONTACTS_EDMO"}'
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~custodian"/>
          </action>




          <field name="emodnetMetadataAuthor"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:contact"
                 del=".">
            <template>
              <values readonlyIf="count(@xlink:href) > 0">
                <key label="organisationName"
                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                <key label="country"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                            gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:country/gco:CharacterString"/>
                <key label="electronicMailAddress"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                  gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                     use="email"/>
                <key label="edmoId"
                     xpath="*[1]/@uuid"/>
              </values>
              <snippet>
                <gmd:contact>
                  <gmd:CI_ResponsibleParty uuid="{{edmoId}}">
                    <gn:copy select="gmd:individualName"/>
                    <gmd:organisationName>
                      <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                    </gmd:organisationName>
                    <gn:copy select="gmd:positionName"/>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gn:copy select="gmd:phone"/>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gn:copy select="gmd:deliveryPoint"/>
                            <gn:copy select="gmd:city"/>
                            <gn:copy select="gmd:administrativeArea"/>
                            <gn:copy select="gmd:postalCode"/>
                            <!--<gn:copy select="gmd:country"/>-->
                            <gmd:country>
                              <gco:CharacterString>{{country}}</gco:CharacterString>
                            </gmd:country>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                        <gn:copy select="gmd:onlineResource"/>
                        <gn:copy select="gmd:hoursOfService"/>
                        <gn:copy select="gmd:contactInstructions"/>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gn:copy select="gmd:role"/>
                  </gmd:CI_ResponsibleParty>
                </gmd:contact>
              </snippet>
            </template>
          </field>

          <action type="add"
                  name="emodnetMetadataAuthor"
                  forceLabel="true"
                  addDirective="data-gn-directory-entry-selector"
                  or="contact"
                  in="/gmd:MD_Metadata">
            <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-filter='{"_groupPublished": "CONTACTS_EDMO"}'
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~author"/>
          </action>
        </section>
      </tab>


      <tab id="emodnetHydrography-access"
           mode="flat">
        <section>
          <field name="emodnetDistributor"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:distributionInfo/*/gmd:distributor/*/
                          gmd:distributorContact"
                 del=".">
            <template>
              <values readonlyIf="count(@xlink:href) > 0">
                <key label="organisationName"
                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                <key label="country"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                            gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:country/gco:CharacterString"/>
                <key label="electronicMailAddress"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                  gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                     use="email"/>
                <key label="edmoId"
                     xpath="*[1]/@uuid"/>
              </values>
              <snippet>
                <gmd:distributorContact>
                  <gmd:CI_ResponsibleParty uuid="{{edmoId}}">
                    <gn:copy select="gmd:individualName"/>
                    <gmd:organisationName>
                      <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                    </gmd:organisationName>
                    <gn:copy select="gmd:positionName"/>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gn:copy select="gmd:phone"/>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gn:copy select="gmd:deliveryPoint"/>
                            <gn:copy select="gmd:city"/>
                            <gn:copy select="gmd:administrativeArea"/>
                            <gn:copy select="gmd:postalCode"/>
                            <!--<gn:copy select="gmd:country"/>-->
                            <gmd:country>
                              <gco:CharacterString>{{country}}</gco:CharacterString>
                            </gmd:country>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                        <gn:copy select="gmd:onlineResource"/>
                        <gn:copy select="gmd:hoursOfService"/>
                        <gn:copy select="gmd:contactInstructions"/>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gn:copy select="gmd:role"/>
                  </gmd:CI_ResponsibleParty>
                </gmd:distributorContact>
              </snippet>
            </template>
          </field>

          <!-- Add first a distributor with no
          mandatory distributor contact. -->
          <action type="add"
                  btnLabel="addADistributor"
                  or="distributor"
                  in="/gmd:MD_Metadata/gmd:distributionInfo/*">
            <template>
              <snippet>
                <gmd:distributor>
                  <gmd:MD_Distributor/>
                </gmd:distributor>
              </snippet>
            </template>
          </action>

          <!-- Then add a distributor contact based on the directory -->
          <action type="add"
                  name="emodnetDistributor"
                  forceLabel="true"
                  addDirective="data-gn-directory-entry-selector"
                  or="distributorContact"
                  in="/gmd:MD_Metadata/gmd:distributionInfo/*/gmd:distributor/*">
            <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-filter='{"_groupPublished": "CONTACTS_EDMO"}'
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~distributor"/>
          </action>


          <field name="dataFormats" templateModeOnly="true" notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:distributionFormat"
                 del=".">
            <template>
              <values>
                <key label="format"
                     xpath="gmd:MD_Format/gmd:name/gco:CharacterString"
                     tooltip="gmd:name|gmd:MD_Format">
                  <helper name="gmd:name" context="gmd:MD_Format"/>
                </key>
                <key label="format_version" xpath="gmd:MD_Format/gmd:version/gco:CharacterString"/>
              </values>
              <snippet>
                <gmd:distributionFormat>
                  <gmd:MD_Format>
                    <gmd:name>
                      <gco:CharacterString>{{format}}</gco:CharacterString>
                    </gmd:name>
                    <gmd:version>
                      <gco:CharacterString>{{format_version}}</gco:CharacterString>
                    </gmd:version>
                    <gn:copy select="gmd:amendmentNumber"/>
                    <gn:copy select="gmd:specification"/>
                    <gn:copy select="gmd:fileDecompressionTechnique"/>
                    <gn:copy select="gmd:formatDistributor"/>
                  </gmd:MD_Format>
                </gmd:distributionFormat>
              </snippet>
            </template>
          </field>

          <action type="add" name="dataFormats" or="distributionFormat"
                  in="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution">
            <template>
              <snippet>
                <gmd:distributionFormat>
                  <gmd:MD_Format>
                    <gmd:name>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:name>
                    <gmd:version>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:version>
                  </gmd:MD_Format>
                </gmd:distributionFormat>
              </snippet>
            </template>
          </action>


          <field xpath="/gmd:MD_Metadata/gmd:distributionInfo/gmd:MD_Distribution/gmd:transferOptions//gmd:MD_DigitalTransferOptions"/>
        </section>


        <section name="emodnetIntellectualPropertyTitle">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:useLimitation"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:useConstraints"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"/>


        </section>

      </tab>
    </view>

    <!--
      SDN view
      https://forge.ifremer.fr/mantis/view.php?id=40735
    -->
    <view name="sdn"
          upAndDownControlHidden="true"
          displayIfRecord="contains(
                              gmd:MD_Metadata/gmd:metadataStandardName/gco:CharacterString,
                              'ISO 19115:2003/19139 - EMODNET - SDN')">
      <thesaurusList>
        <thesaurus key="external.theme.httpinspireeceuropaeutheme-theme"
                   fieldset="false"
                   transformations="to-iso19139-keyword"
                   maxtags="1"/>
        <thesaurus key="local.theme.sextant-theme"
                   fieldset="false"
                   transformations="to-iso19139-keyword"
                   maxtags="1"/>
        <thesaurus key="external.parameter.NVS.P35"
                   fieldset="false"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.parameter.NVS.P02"
                   fieldset="false"
                   transformations="to-iso19139-keyword-with-anchor"/>
        <thesaurus key="external.reference-geographical-area.NVS.C19"
                   fieldset="false"
                   transformations="to-iso19139-keyword-with-anchor"/>

      </thesaurusList>

      <sidePanel>
        <directive data-gn-onlinesrc-list=""/>
        <directive data-gn-validation-report=""/>
        <directive data-gn-suggestion-list=""/>
        <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
      </sidePanel>

      <tab id="sdn-identification" mode="flat" default="true">
        <section name="sextantidentificationTitle">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:title"
                 name="sextant-title"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:abstract"
                 name="sdn-abstract"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:alternateTitle"
                 name="sdn-short-name"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:language"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:credit"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*/gmd:date"
                 or="date"
                 in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:citation/*"
                 name="sextant-date-resource"/>

          <section name="sextantkeywordTitle">
            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:topicCategory"/>

            <field
              xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[*/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text() = 'geonetwork.thesaurus.local.theme.sextant-theme']"
              name="sextant-theme"/>

            <field
              xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                          */gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text() =
                          'geonetwork.thesaurus.external.theme.httpinspireeceuropaeutheme-theme' or
                          */gmd:thesaurusName/*/gmd:title/*/text() = 'GEMET - INSPIRE themes, version 1.0']"
              name="inspireTheme"/>

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                        contains(
                          gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                          'NVS.C19') or
                          */gmd:thesaurusName/*/gmd:title/*/text() = 'SeaVoX salt and fresh water body gazetteer']"
                    name="seaAreas"/>

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                        contains(
                          gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                          'NVS.P02')  or
                          */gmd:thesaurusName/*/gmd:title/*/text() = 'Parameter Discovery Vocabulary (P02)']"
                    name="oceanDiscoveryParameters"/>

            <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:descriptiveKeywords[
                        contains(
                          gmd:MD_Keywords/gmd:thesaurusName/*/gmd:identifier/*/gmd:code/*/text(),
                          'NVS.P35') or
                          */gmd:thesaurusName/*/gmd:title/*/text() = 'EMODNET chemistry lot aggregated parameter names']"
                    name="oceanChemistryVariables"/>
          </section>
        </section>
      </tab>



      <tab id="sdn-contact" mode="flat">
        <section>

          <field name="sdn-ResourceProviderTitle"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:pointOfContact[*/gmd:role/*/@codeListValue = 'resourceProvider']"
                 del=".">
            <template>
              <values readonlyIf="count(@xlink:href) > 0">
                <key label="organisationName"
                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                <key label="country"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                            gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:country/gco:CharacterString"/>
                <key label="electronicMailAddress"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                  gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                     use="email"/>
                <key label="edmoId"
                     xpath="*[1]/@uuid"/>
              </values>
              <snippet>
                <gmd:pointOfContact>
                  <gmd:CI_ResponsibleParty uuid="{{edmoId}}">
                    <gn:copy select="gmd:individualName"/>
                    <gmd:organisationName>
                      <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                    </gmd:organisationName>
                    <gn:copy select="gmd:positionName"/>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gn:copy select="gmd:phone"/>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gn:copy select="gmd:deliveryPoint"/>
                            <gn:copy select="gmd:city"/>
                            <gn:copy select="gmd:administrativeArea"/>
                            <gn:copy select="gmd:postalCode"/>
                            <!--<gn:copy select="gmd:country"/>-->
                            <gmd:country>
                              <gco:CharacterString>{{country}}</gco:CharacterString>
                            </gmd:country>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                        <gn:copy select="gmd:onlineResource"/>
                        <gn:copy select="gmd:hoursOfService"/>
                        <gn:copy select="gmd:contactInstructions"/>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gn:copy select="gmd:role"/>
                  </gmd:CI_ResponsibleParty>
                </gmd:pointOfContact>
              </snippet>
            </template>
          </field>

          <action type="add"
                  name="sdn-ResourceProviderTitle"
                  addDirective="data-gn-directory-entry-selector"
                  forceLabel="true"
                  or="pointOfContact"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-filter='{"_groupPublished": "CONTACTS_EDMO"}'
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~resourceProvider"/>
          </action>
          <action type="add"
                  name="orAddresourceProvider"
                  forceLabel="true"
                  or="pointOfContact"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:pointOfContact>
                  <gmd:CI_ResponsibleParty uuid="">
                    <gmd:organisationName>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:organisationName>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gmd:country>
                              <gco:CharacterString></gco:CharacterString>
                            </gmd:country>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString></gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gmd:role>
                      <gmd:CI_RoleCode codeList="codeListLocation#CI_RoleCode"
                                       codeListValue="resourceProvider">resourceProvider</gmd:CI_RoleCode>
                    </gmd:role>
                  </gmd:CI_ResponsibleParty>
                </gmd:pointOfContact>
              </snippet>
            </template>
          </action>

          <text ref="hrfullrow"/>

          <!-- Custodian -->
          <field name="sdn-custodian"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:pointOfContact[*/gmd:role/*/@codeListValue = 'custodian']"
                 del=".">
            <template>
              <values readonlyIf="count(@xlink:href) > 0">
                <key label="organisationName"
                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                <key label="country"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                            gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:country/gco:CharacterString"/>
                <key label="electronicMailAddress"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                  gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                     use="email"/>
                <key label="edmoId"
                     xpath="gmd:CI_ResponsibleParty/@uuid"/>
              </values>
              <snippet>
                <gmd:pointOfContact>
                  <gmd:CI_ResponsibleParty uuid="{{edmoId}}">
                    <gn:copy select="gmd:individualName"/>
                    <gmd:organisationName>
                      <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                    </gmd:organisationName>
                    <gn:copy select="gmd:positionName"/>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gn:copy select="gmd:phone"/>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gn:copy select="gmd:deliveryPoint"/>
                            <gn:copy select="gmd:city"/>
                            <gn:copy select="gmd:administrativeArea"/>
                            <gn:copy select="gmd:postalCode"/>
                            <!--<gn:copy select="gmd:country"/>-->
                            <gmd:country>
                              <gco:CharacterString>{{country}}</gco:CharacterString>
                            </gmd:country>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                        <gn:copy select="gmd:onlineResource"/>
                        <gn:copy select="gmd:hoursOfService"/>
                        <gn:copy select="gmd:contactInstructions"/>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gn:copy select="gmd:role"/>
                  </gmd:CI_ResponsibleParty>
                </gmd:pointOfContact>
              </snippet>
            </template>
          </field>

          <action type="add"
                  name="sdn-custodian"
                  addDirective="data-gn-directory-entry-selector"
                  forceLabel="true"
                  or="pointOfContact"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-filter='{"_groupPublished": "CONTACTS_EDMO"}'
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~custodian"/>
          </action>
          <action type="add"
                  name="orAddCustodian"
                  forceLabel="true"
                  or="pointOfContact"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:pointOfContact>
                  <gmd:CI_ResponsibleParty uuid="">
                    <gmd:organisationName>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:organisationName>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gmd:country>
                              <gco:CharacterString></gco:CharacterString>
                            </gmd:country>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString></gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gmd:role>
                      <gmd:CI_RoleCode codeList="codeListLocation#CI_RoleCode"
                                       codeListValue="custodian"></gmd:CI_RoleCode>
                    </gmd:role>
                  </gmd:CI_ResponsibleParty>
                </gmd:pointOfContact>
              </snippet>
            </template>
          </action>


          <text ref="hrfullrow"/>
          <!-- Add author-->
          <field name="sdn-author"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:pointOfContact[*/gmd:role/*/@codeListValue = 'author']"
                 del=".">
            <template>
              <values readonlyIf="count(@xlink:href) > 0">
                <key label="individualName"
                     xpath="gmd:CI_ResponsibleParty/gmd:individualName/gco:CharacterString"/>
                <key label="organisationName"
                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                <key label="country"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                            gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:country/gco:CharacterString"/>
                <key label="electronicMailAddress"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                  gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                     use="email"/>
              </values>
              <snippet>
                <gmd:pointOfContact>
                  <gmd:CI_ResponsibleParty>
                    <gmd:individualName>
                      <gco:CharacterString>{{individualName}}</gco:CharacterString>
                    </gmd:individualName>
                    <gmd:organisationName>
                      <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                    </gmd:organisationName>
                    <gn:copy select="gmd:positionName"/>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gn:copy select="gmd:phone"/>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gn:copy select="gmd:deliveryPoint"/>
                            <gn:copy select="gmd:city"/>
                            <gn:copy select="gmd:administrativeArea"/>
                            <gn:copy select="gmd:postalCode"/>
                            <!--<gn:copy select="gmd:country"/>-->
                            <gmd:country>
                              <gco:CharacterString>{{country}}</gco:CharacterString>
                            </gmd:country>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                        <gn:copy select="gmd:onlineResource"/>
                        <gn:copy select="gmd:hoursOfService"/>
                        <gn:copy select="gmd:contactInstructions"/>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gn:copy select="gmd:role"/>
                  </gmd:CI_ResponsibleParty>
                </gmd:pointOfContact>
              </snippet>
            </template>
          </field>

          <action type="add"
                  name="sdn-addAuthor"
                  forceLabel="true"
                  or="pointOfContact"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:pointOfContact>
                  <gmd:CI_ResponsibleParty>
                    <gmd:individualName>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:individualName>
                    <gmd:organisationName>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:organisationName>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gmd:country>
                              <gco:CharacterString></gco:CharacterString>
                            </gmd:country>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString></gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gmd:role>
                      <gmd:CI_RoleCode codeList="codeListLocation#CI_RoleCode"
                                       codeListValue="author"></gmd:CI_RoleCode>
                    </gmd:role>
                  </gmd:CI_ResponsibleParty>
                </gmd:pointOfContact>
              </snippet>
            </template>
          </action>


          <text ref="hrfullrow"/>



          <field name="sdn-OriginatorTitle"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/
                          gmd:pointOfContact[*/gmd:role/*/@codeListValue = 'originator']"
                 del=".">
            <template>
              <values readonlyIf="count(@xlink:href) > 0">
                <key label="organisationName"
                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                <key label="country"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                            gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:country/gco:CharacterString"/>
                <!--<key label="electronicMailAddress"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                  gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                     use="email"/>-->
                <key label="edmoId"
                     xpath="*[1]/@uuid"/>
              </values>
              <snippet>
                <gmd:pointOfContact>
                  <gmd:CI_ResponsibleParty uuid="{{edmoId}}">
                    <gn:copy select="gmd:individualName"/>
                    <gmd:organisationName>
                      <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                    </gmd:organisationName>
                    <gn:copy select="gmd:positionName"/>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gn:copy select="gmd:phone"/>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gn:copy select="gmd:deliveryPoint"/>
                            <gn:copy select="gmd:city"/>
                            <gn:copy select="gmd:administrativeArea"/>
                            <gn:copy select="gmd:postalCode"/>
                            <!--<gn:copy select="gmd:country"/>-->
                            <gmd:country>
                              <gco:CharacterString>{{country}}</gco:CharacterString>
                            </gmd:country>
                            <gn:copy select="gmd:electronicMailAddress"/>
                            <!--<gmd:electronicMailAddress>
                              <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                            </gmd:electronicMailAddress>-->
                          </gmd:CI_Address>
                        </gmd:address>
                        <gn:copy select="gmd:onlineResource"/>
                        <gn:copy select="gmd:hoursOfService"/>
                        <gn:copy select="gmd:contactInstructions"/>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gn:copy select="gmd:role"/>
                  </gmd:CI_ResponsibleParty>
                </gmd:pointOfContact>
              </snippet>
            </template>
          </field>

          <action type="add"
                  name="sdn-OriginatorTitle"
                  forceLabel="true"
                  addDirective="data-gn-directory-entry-selector"
                  or="pointOfContact"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-filter='{"_groupPublished": "CONTACTS_EDMO"}'
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~originator"/>
          </action>

          <action type="add"
                  name="orAddoriginator"
                  forceLabel="true"
                  or="pointOfContact"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/gmd:MD_DataIdentification">
            <template>
              <snippet>
                <gmd:pointOfContact>
                  <gmd:CI_ResponsibleParty uuid="">
                    <gmd:organisationName>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:organisationName>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gmd:country>
                              <gco:CharacterString></gco:CharacterString>
                            </gmd:country>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString></gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gmd:role>
                      <gmd:CI_RoleCode codeList="codeListLocation#CI_RoleCode"
                                       codeListValue="originator">originator</gmd:CI_RoleCode>
                    </gmd:role>
                  </gmd:CI_ResponsibleParty>
                </gmd:pointOfContact>
              </snippet>
            </template>
          </action>
        </section>
      </tab>


      <tab id="sdn-spatial" mode="flat">
        <section name="sdnSpatialRepresentationType">
          <!-- TODO: layout on one line ? -->
          <action type="process"
                  btnClass="fa fa-square-o"
                  process="add-vector-info"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType) = 0 and count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType[*/@codeListValue = 'vector']) = 0"/>
          <action type="process"
                  btnClass="fa fa-square-o"
                  process="change-to-vector-info"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType[*/@codeListValue = 'grid']) = 1"/>


          <action type="process"
                  btnClass="fa fa-th"
                  process="add-grid-info"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType) = 0 and count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType[*/@codeListValue = 'grid']) = 0"/>
          <action type="process"
                  btnClass="fa fa-th"
                  process="change-to-grid-info"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType[*/@codeListValue = 'vector']) = 1"/>

          <text ref="change-spatial-type-alert"
                if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType) = 1"/>


          <!--<field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType"/>-->
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialResolution/*/gmd:distance"
                 del="../.."/>
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialResolution/*/gmd:equivalentScale/*/gmd:denominator"
            del="../../../.."/>


          <action type="add" btnLabel="sextant-add-scale" or="spatialResolution"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo[*/gmd:spatialRepresentationType/*/@codeListValue = 'vector']) = 1">
            <template>
              <snippet>
                <gmd:spatialResolution>
                  <gmd:MD_Resolution>
                    <gmd:equivalentScale>
                      <gmd:MD_RepresentativeFraction>
                        <gmd:denominator>
                          <gco:Integer/>
                        </gmd:denominator>
                      </gmd:MD_RepresentativeFraction>
                    </gmd:equivalentScale>
                  </gmd:MD_Resolution>
                </gmd:spatialResolution>
              </snippet>
            </template>
          </action>

          <action type="add" btnLabel="sextant-add-resolution" or="spatialResolution"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*"
                  if="count(gmd:MD_Metadata/gmd:identificationInfo[*/gmd:spatialRepresentationType/*/@codeListValue = 'grid']) = 1">
            <template>
              <snippet>
                <gmd:spatialResolution>
                  <gmd:MD_Resolution>
                    <gmd:distance>
                      <gco:Distance uom=""/>
                    </gmd:distance>
                  </gmd:MD_Resolution>
                </gmd:spatialResolution>
              </snippet>
            </template>
          </action>

          <field
            xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/*/gmd:axisDimensionProperties"
            or="axisDimensionProperties"
            in="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/*"/>
          <field
            xpath="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/*/gmd:geometricObjects"/>

          <text ref="hr"
                if="count(gmd:MD_Metadata/gmd:identificationInfo/*/gmd:spatialRepresentationType) = 1"/>

        </section>

        <section name="sextantgeoLocationTitle">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*/gmd:geographicElement/*"/>


          <field xpath="/gmd:MD_Metadata/gmd:referenceSystemInfo"
                 or="referenceSystemInfo"
                 in="/gmd:MD_Metadata"/>


          <action type="add"
                  btnLabel="addCrs"
                  name="referenceSystemInfo" or="referenceSystemInfo"
                  in="/gmd:MD_Metadata">
            <template>
              <snippet label="addCrs4326">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString>WGS 84 (EPSG:4326)</gco:CharacterString>
                        </gmd:code>
                        <gmd:codeSpace>
                          <gco:CharacterString>EPSG</gco:CharacterString>
                        </gmd:codeSpace>
                        <gmd:version>
                          <gco:CharacterString>7.4</gco:CharacterString>
                        </gmd:version>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs3035">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString>Lambert Azimuthal Equal Area (EPSG 3035)</gco:CharacterString>
                        </gmd:code>
                        <gmd:codeSpace>
                          <gco:CharacterString>EPSG</gco:CharacterString>
                        </gmd:codeSpace>
                        <gmd:version>
                          <gco:CharacterString>7.4</gco:CharacterString>
                        </gmd:version>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs4258">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString>ETRS89 (EPSG 4258)</gco:CharacterString>
                        </gmd:code>
                        <gmd:codeSpace>
                          <gco:CharacterString>EPSG</gco:CharacterString>
                        </gmd:codeSpace>
                        <gmd:version>
                          <gco:CharacterString>7.4</gco:CharacterString>
                        </gmd:version>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs3395">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString>WGS 84 / World Mercator (EPSG 3395)</gco:CharacterString>
                        </gmd:code>
                        <gmd:codeSpace>
                          <gco:CharacterString>EPSG</gco:CharacterString>
                        </gmd:codeSpace>
                        <gmd:version>
                          <gco:CharacterString>7.4</gco:CharacterString>
                        </gmd:version>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
              <snippet label="addCrs6404">
                <gmd:referenceSystemInfo>
                  <gmd:MD_ReferenceSystem>
                    <gmd:referenceSystemIdentifier>
                      <gmd:RS_Identifier>
                        <gmd:code>
                          <gco:CharacterString>Spherical 3D CS (EPSG 6404)</gco:CharacterString>
                        </gmd:code>
                        <gmd:codeSpace>
                          <gco:CharacterString>EPSG</gco:CharacterString>
                        </gmd:codeSpace>
                        <gmd:version>
                          <gco:CharacterString>7.4</gco:CharacterString>
                        </gmd:version>
                      </gmd:RS_Identifier>
                    </gmd:referenceSystemIdentifier>
                  </gmd:MD_ReferenceSystem>
                </gmd:referenceSystemInfo>
              </snippet>
            </template>
          </action>



        </section>

        <section name="sextanttempRefTitle">

          <field name="temporalRangeSection"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*/gmd:temporalElement">
            <template>
              <values>
                <!-- -Need a * for gml:TimePeriodTypeCHOICE_ELEMENT2 added by editor enumerated tree
                but this will make the XSLT formatter fails. Using // to access the element in both case. -->
                <key label="beginPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod//gml:beginPosition"
                     use="gn-date-picker"
                     tooltip="gmd:extent|gmd:EX_TemporalExtent">
                  <directiveAttributes data-tag-name="gml:beginPosition"/>
                </key>
                <key label="endPosition"
                     xpath="gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod//gml:endPosition"
                     use="gn-date-picker"
                     tooltip="gmd:extent|gmd:EX_TemporalExtent"
                >
                  <directiveAttributes
                    data-tag-name="gml:endPosition"
                    data-indeterminate-position="eval#gmd:EX_TemporalExtent/gmd:extent/gml:TimePeriod/*/gml:endPosition/@indeterminatePosition"/>
                </key>
              </values>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        {{beginPosition}}
                        {{endPosition}}
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </field>


          <action type="add" name="temporalRangeSection" or="temporalElement"
                  in="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*">
            <template>
              <snippet>
                <gmd:temporalElement>
                  <gmd:EX_TemporalExtent>
                    <gmd:extent>
                      <gml:TimePeriod gml:id="">
                        <gml:beginPosition/>
                        <gml:endPosition/>
                      </gml:TimePeriod>
                    </gmd:extent>
                  </gmd:EX_TemporalExtent>
                </gmd:temporalElement>
              </snippet>
            </template>
          </action>

        </section>
          <!-- TODO: add
        Temporal resolution
        Number of vertical levels
        -->
        <section name="sdn-verticalExtent">
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*/gmd:verticalElement/*/gmd:minimumValue"/>
          <field xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:extent/*/gmd:verticalElement/*/gmd:maximumValue"/>
        </section>
      </tab>


      <tab id="sdn-usage" mode="flat">
        <section name="sextantlimitationsTitle">
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_Constraints/gmd:useLimitation"/>
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:useLimitation"/>
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:useConstraints"/>
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:accessConstraints"/>
          <field
            xpath="/gmd:MD_Metadata/gmd:identificationInfo/*/gmd:resourceConstraints/gmd:MD_LegalConstraints/gmd:otherConstraints"/>
        </section>
      </tab>


      <tab id="sdn-quality" mode="flat">
        <section name="sextantqualityTitle">
          <field xpath="/gmd:MD_Metadata/gmd:dataQualityInfo/*/gmd:lineage/*/gmd:statement"/>
        </section>

      </tab>


      <tab id="sdn-metadata" mode="flat">
        <section name="sextantmetadataInfoTitle">
          <field xpath="/gmd:MD_Metadata/gmd:language"/>

          <field name="locale"
                 xpath="/gmd:MD_Metadata/gmd:locale[*/gmd:languageCode/*/@codeListValue != ancestor::gmd:MD_Metadata/gmd:language/*/@codeListValue]"
                 or="locale" in="/gmd:MD_Metadata"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 del=".">
            <template>
              <values>
                <key label="locale"
                     use="data-gn-language-picker"
                     xpath="gmd:PT_Locale/gmd:languageCode/gmd:LanguageCode/@codeListValue"/>
              </values>
              <snippet>
                <gmd:locale>
                  <gmd:PT_Locale>
                    <gmd:languageCode>
                      <gmd:LanguageCode codeList="" codeListValue="{{locale}}"/>
                    </gmd:languageCode>
                    <gn:copy select="gmd:characterEncoding"/>
                  </gmd:PT_Locale>
                </gmd:locale>
              </snippet>
            </template>
          </field>

          <action type="add" name="locale" or="locale"
                  in="/gmd:MD_Metadata">
            <template>
              <snippet>
                <gmd:locale>
                  <gmd:PT_Locale>
                    <gmd:languageCode>
                      <gmd:LanguageCode codeList="" codeListValue=""/>
                    </gmd:languageCode>
                    <gmd:characterEncoding>
                      <gmd:MD_CharacterSetCode
                        codeList="http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_19139_Schemas/resources/codelist/ML_gmxCodelists.xml#MD_CharacterSetCode"
                        codeListValue="utf8"/>
                    </gmd:characterEncoding>
                  </gmd:PT_Locale>
                </gmd:locale>
              </snippet>
            </template>
          </action>

          <field xpath="/gmd:MD_Metadata/gmd:hierarchyLevel"/>

          <!--<field xpath="/gmd:MD_Metadata/gmd:contact"/>-->

          <field name="metadataPointOfContact"
                 templateModeOnly="true"
                 notDisplayedIfMissing="true"
                 xpath="/gmd:MD_Metadata/gmd:contact"
                 del=".">
            <template>
              <values readonlyIf="count(@xlink:href) > 0">
                <key label="individualName"
                     xpath="gmd:CI_ResponsibleParty/gmd:individualName/gco:CharacterString"/>
                <key label="organisationName"
                     xpath="gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString"/>
                <key label="electronicMailAddress"
                     xpath="gmd:CI_ResponsibleParty/gmd:contactInfo/
                  gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString"
                     use="email"/>
              </values>
              <snippet>
                <gmd:contact>
                  <gmd:CI_ResponsibleParty>
                    <gmd:individualName>
                      <gco:CharacterString>{{individualName}}</gco:CharacterString>
                    </gmd:individualName>
                    <gmd:organisationName>
                      <gco:CharacterString>{{organisationName}}</gco:CharacterString>
                    </gmd:organisationName>
                    <gn:copy select="gmd:positionName"/>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gn:copy select="gmd:phone"/>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gn:copy select="gmd:deliveryPoint"/>
                            <gn:copy select="gmd:city"/>
                            <gn:copy select="gmd:administrativeArea"/>
                            <gn:copy select="gmd:postalCode"/>
                            <gn:copy select="gmd:country"/>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString>{{electronicMailAddress}}</gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                        <gn:copy select="gmd:onlineResource"/>
                        <gn:copy select="gmd:hoursOfService"/>
                        <gn:copy select="gmd:contactInstructions"/>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gn:copy select="gmd:role"/>
                  </gmd:CI_ResponsibleParty>
                </gmd:contact>
              </snippet>
            </template>
          </field>

          <action name="metadataPointOfContact"
                  type="add"
                  addDirective="data-gn-directory-entry-selector"
                  or="contact"
                  in="/gmd:MD_Metadata">
            <directiveAttributes
              data-template-add-action="false"
              data-search-action="true"
              data-popup-action="true"
              data-template-type="contact"
              data-variables="gmd:role/gmd:CI_RoleCode/@codeListValue~{role}"/>
          </action>


          <action type="add"
                  name="metadataPointOfContact"
                  btnLabel="sdn-add-md-contact"
                  forceLabel="true"
                  or="contact"
                  in="/gmd:MD_Metadata">
            <template>
              <snippet>
                <gmd:contact>
                  <gmd:CI_ResponsibleParty>
                    <gmd:individualName>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:individualName>
                    <gmd:organisationName>
                      <gco:CharacterString></gco:CharacterString>
                    </gmd:organisationName>
                    <gmd:contactInfo>
                      <gmd:CI_Contact>
                        <gmd:address>
                          <gmd:CI_Address>
                            <gmd:electronicMailAddress>
                              <gco:CharacterString></gco:CharacterString>
                            </gmd:electronicMailAddress>
                          </gmd:CI_Address>
                        </gmd:address>
                      </gmd:CI_Contact>
                    </gmd:contactInfo>
                    <gmd:role>
                      <gmd:CI_RoleCode codeList="codeListLocation#CI_RoleCode"
                                       codeListValue="pointOfContact"></gmd:CI_RoleCode>
                    </gmd:role>
                  </gmd:CI_ResponsibleParty>
                </gmd:contact>
              </snippet>
            </template>
          </action>

          <field xpath="/gmd:MD_Metadata/gmd:fileIdentifier"/>
        </section>
      </tab>

      <flatModeExceptions>
        <for name="gmd:keyword"/>
        <for name="gmd:resolution"/>
      </flatModeExceptions>
    </view>

    <view name="xml">
      <sidePanel>
        <directive data-gn-onlinesrc-list=""/>
        <directive data-gn-validation-report=""/>
        <directive data-gn-suggestion-list=""/>
        <directive data-gn-need-help="user-guide/describing-information/creating-metadata.html"/>
      </sidePanel>

      <tab id="xml" default="true"/>
    </view>
  </views>
  <batchEditing>
    <section name="identification">
      <!-- Update existing title in metadata record -->
      <field name="title"
             xpath="gmd:identificationInfo/*/gmd:citation/*/gmd:title"
             insertMode="gn_replace"
             indexField="title">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>

      <!-- Insert a new keyword in the first gmd:descriptiveKeywords found.
      Warning: The section may contains a thesaurusName reference and
      the keyword may not be part of it.
      Warning: Duplicates may be inserted.
      -->
      <field name="keyword"
             xpath="gmd:identificationInfo/gmd:MD_DataIdentification/
                      gmd:descriptiveKeywords/gmd:MD_Keywords/gmd:keyword"
             indexField="keyword"
             insertMode="gn_create">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>

      <!-- Insert a new topic category
      Warning: Duplicates may be inserted.
      -->
      <field name="topicCats"
             xpath="gmd:identificationInfo/*/
                      gmd:topicCategory"
             use="data-gn-codelist-picker"
             codelist="gmd:MD_TopicCategoryCode"
             indexField="topicCat"
             insertMode="gn_create">
        <template><![CDATA[<gmd:MD_TopicCategoryCode xmlns:gmd='http://www.isotc211.org/2005/gmd'>{{value}}</gmd:MD_TopicCategoryCode>]]></template>
      </field>

      <!-- Insert a new extent
      Warning: Duplicates may be inserted.
      -->
      <field name="extent"
             xpath="gmd:identificationInfo/gmd:MD_DataIdentification/gmd:extent"
             use="data-gn-draw-bbox"
             insertMode="gn_create"/>

      <!-- Insert a new resource language
      Warning: Duplicates may be inserted.
      -->
      <field name="language"
             xpath="gmd:identificationInfo/*/
                      gmd:language"
             use="data-gn-language-picker"
             insertMode="gn_replace"
             removable="true">
        <template><![CDATA[<gmd:LanguageCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>

      <!-- Insert, or replace if existing, the parent identifier.
      Warning: Duplicates may be inserted.
      -->
      <field name="parentIdentifier"
             xpath="gmd:parentIdentifier"
             use="data-gn-metadata-picker"
             insertMode="gn_replace"
             removable="true">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>

      <field name="resourceStatus"
             xpath="gmd:identificationInfo/*/
                      gmd:status"
             use="data-gn-codelist-picker"
             codelist="gmd:MD_ProgressCode"
             insertMode="gn_replace"
             removable="true">
        <template><![CDATA[<gmd:MD_ProgressCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>
    </section>

    <section name="resourceConstraints">
      <!-- Insert a new access contraints
            Warning: Duplicates may be inserted.
      -->
      <field name="legalConstraints"
             xpath="gmd:identificationInfo/*/
                      gmd:resourceConstraints/gmd:MD_LegalConstraints/
                        gmd:accessConstraints"
             use="data-gn-codelist-picker"
             codelist="gmd:MD_RestrictionCode"
             insertMode="gn_create"
             removable="true">
        <template><![CDATA[<gmd:MD_RestrictionCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>

      <!-- Insert a new other contraints
            Warning: Duplicates may be inserted.
      -->
      <field name="otherConstraints"
             xpath="gmd:identificationInfo/*/
                      gmd:resourceConstraints/gmd:MD_LegalConstraints/
                        gmd:otherConstraints"
             use="textarea"
             insertMode="gn_create"
             removable="true">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>
    </section>


    <!-- Replace current lineage or insert a new one.
          Warning: Duplicates may be inserted.
    -->
    <section name="quality">
      <field name="lineage"
             xpath="gmd:dataQualityInfo/gmd:DQ_DataQuality/
                      gmd:lineage/gmd:LI_Lineage/gmd:statement"
             use="textarea"
             insertMode="gn_replace"
             removable="true">
        <template><![CDATA[<gco:CharacterString xmlns:gco='http://www.isotc211.org/2005/gco'>{{value}}</gco:CharacterString>]]></template>
      </field>
    </section>

    <section name="contact">
      <field name="resourceContact"
             xpath="gmd:identificationInfo/gmd:MD_DataIdentification/gmd:pointOfContact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
      <field name="distributor"
             xpath="gmd:distributionInfo/gmd:MD_Distribution/gmd:distributor/gmd:MD_Distributor/gmd:distributorContact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
      <field name="mdContact"
             xpath="gmd:contact"
             use="data-gn-directory-entry-selector"
             insertMode="gn_create"/>
    </section>

    <section name="metadata">
      <field name="mdLanguage"
             xpath="gmd:language"
             use="data-gn-language-picker"
             removable="true">
        <template><![CDATA[<gmd:LanguageCode xmlns:gmd='http://www.isotc211.org/2005/gmd' codeListValue='{{value}}'/>]]></template>
      </field>
    </section>
  </batchEditing>
</editor>
